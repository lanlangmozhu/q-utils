{"version":3,"file":"index.umd.js","sources":["../src/array/validate.ts","../src/array/tree.ts","../src/array/basic.ts","../src/array/group.ts","../src/array/stats.ts","../src/array/compare.ts","../src/array/operation.ts","../src/array/random.ts","../src/array/sort.ts","../src/array/transform.ts","../src/array/unique.ts","../src/browser/browser.ts","../src/browser/device.ts","../src/color/adjustColor.ts","../src/color/hexToRgb.ts","../src/color/rgbToHex.ts","../src/date/special.ts","../src/date/time.ts","../src/date/lunar.ts","../src/date/timezone.ts","../src/date/calendar.ts","../src/date/calculation.ts","../src/date/format.ts","../src/date/range.ts","../src/date/statistics.ts","../src/date/basic.ts","../src/dom/basic.ts","../src/dom/event.ts","../src/dom/animation.ts","../src/dom/utils.ts","../src/dom/element.ts","../src/dom/form.ts","../src/dom/position.ts","../src/file/base64ToFile.ts","../src/file/fileToBase64.ts","../src/file/getFileExtension.ts","../src/file/getFileSize.ts","../src/file/isValidFileType.ts","../src/file/readFile.ts","../src/file/saveFile.ts","../src/function/debounce.ts","../src/function/throttle.ts","../src/function/compose.ts","../src/function/curry.ts","../src/function/memoize.ts","../src/function/once.ts","../src/function/pipe.ts","../src/function/sleep.ts","../src/network/url.ts","../src/network/downloadFile.ts","../src/network/fetchWithTimeout.ts","../src/network/jsonp.ts","../src/network/ping.ts","../src/network/request.ts","../src/number/basic.ts","../src/number/math.ts","../src/number/random.ts","../src/number/analysis.ts","../src/number/statistics.ts","../src/number/finance.ts","../src/number/special.ts","../src/number/animation.ts","../src/number/unit.ts","../src/number/performance.ts","../src/number/range.ts","../src/number/format.ts","../src/number/radix.ts","../src/object/deepMerge.ts","../src/object/deepClone.ts","../src/object/getValueByPath.ts","../src/object/isEqual.ts","../src/object/omit.ts","../src/object/pick.ts","../src/object/setValueByPath.ts","../src/storage/localStorage.ts","../src/storage/sessionStorage.ts","../src/storage/cookie.ts","../src/string/basic.ts","../src/string/transform.ts","../src/string/substring.ts","../src/string/uuid.ts","../src/string/compare.ts","../src/string/stats.ts","../src/string/encode.ts","../src/string/search.ts","../src/string/format.ts","../src/string/validate.ts","../src/string/split.ts","../src/type/index.ts","../src/empty/index.ts","../src/boolean/index.ts","../src/promise/index.ts","../src/regexp/index.ts","../src/error/index.ts","../src/symbol/index.ts","../src/bigint/index.ts","../src/index.ts"],"sourcesContent":["/**\n * 验证相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 验证数组是否有效\n * @param arr - 要验证的数组\n * @returns 是否有效\n * @example\n * ```typescript\n * isValid([1, 2, 3])\n * // 返回 true\n * ```\n */\nexport function isValid<T>(arr: T[]): boolean {\n  return Array.isArray(arr) && arr.length > 0;\n}\n\n/**\n * 比较两个数组是否相等\n * @param arr1 - 第一个数组\n * @param arr2 - 第二个数组\n * @param compareFn - 可选的比较函数\n * @returns 是否相等\n * @example\n * ```typescript\n * isEqual([1, 2, 3], [1, 2, 3])\n * // 返回 true\n * ```\n */\nexport function isEqual<T>(\n  arr1: T[],\n  arr2: T[],\n  compareFn?: (a: T, b: T) => boolean\n): boolean {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) {\n    return false;\n  }\n  if (arr1.length !== arr2.length) {\n    return false;\n  }\n  return arr1.every((item, index) => {\n    return compareFn ? compareFn(item, arr2[index]) : item === arr2[index];\n  });\n}\n\n/**\n * 检查是否所有元素都满足条件\n * @param arr - 要检查的数组\n * @param predicate - 判断函数\n * @returns 是否所有元素都满足条件\n * @example\n * ```typescript\n * allMatch([1, 2, 3], n => n > 0)\n * // 返回 true\n * ```\n */\nexport function allMatch<T>(arr: T[], predicate: (item: T) => boolean): boolean {\n  if (!Array.isArray(arr)) {\n    return false;\n  }\n  return arr.every(predicate);\n}\n\n/**\n * 检查是否存在满足条件的元素\n * @param arr - 要检查的数组\n * @param predicate - 判断函数\n * @returns 是否存在满足条件的元素\n * @example\n * ```typescript\n * anyMatch([1, 2, 3], n => n === 2)\n * // 返回 true\n * ```\n */\nexport function anyMatch<T>(arr: T[], predicate: (item: T) => boolean): boolean {\n  if (!Array.isArray(arr)) {\n    return false;\n  }\n  return arr.some(predicate);\n}\n\n/**\n * 检查是否没有元素满足条件\n * @param arr - 要检查的数组\n * @param predicate - 判断函数\n * @returns 是否没有元素满足条件\n * @example\n * ```typescript\n * noneMatch([1, 2, 3], n => n < 0)\n * // 返回 true\n * ```\n */\nexport function noneMatch<T>(arr: T[], predicate: (item: T) => boolean): boolean {\n  if (!Array.isArray(arr)) {\n    return true;\n  }\n  return !arr.some(predicate);\n} ","/**\n * 树形结构相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 将数组转换为树结构\n * @param arr - 要转换的数组\n * @param options - 配置选项\n * @returns 树结构\n * @example\n * ```typescript\n * arrayToTree([\n *   { id: 1, parentId: null },\n *   { id: 2, parentId: 1 },\n *   { id: 3, parentId: 1 }\n * ])\n * // 返回 [{ id: 1, children: [{ id: 2 }, { id: 3 }] }]\n * ```\n */\nexport function arrayToTree<T extends { [key: string]: any }>(\n  arr: T[] | null | undefined,\n  options: {\n    idKey?: string;\n    parentKey?: string;\n    childrenKey?: string;\n  } | null | undefined = {}\n): (T & { [key: string]: any })[] {\n  const {\n    idKey = 'id',\n    parentKey = 'parentId',\n    childrenKey = 'children'\n  } = options || {};\n\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n\n  const map = new Map<string | number, T & { [key: string]: any }>();\n  const result: (T & { [key: string]: any })[] = [];\n\n  arr.forEach(item => {\n    map.set(item[idKey], { ...item });\n  });\n\n  arr.forEach(item => {\n    const node = map.get(item[idKey])!;\n    const parentId = item[parentKey];\n\n    if (parentId === null || parentId === undefined) {\n      result.push(node);\n    } else {\n      const parent = map.get(parentId);\n      if (parent) {\n        if (!parent[childrenKey]) {\n          (parent as any)[childrenKey] = [];\n        }\n        (parent as any)[childrenKey].push(node);\n      }\n    }\n  });\n\n  return result;\n}\n\n/**\n * 将树结构转换为数组\n * @param tree - 要转换的树结构\n * @param options - 配置选项\n * @returns 数组\n * @example\n * ```typescript\n * treeToArray([\n *   { id: 1, children: [{ id: 2 }, { id: 3 }] }\n * ])\n * // 返回 [{ id: 1, parentId: null }, { id: 2, parentId: 1 }, { id: 3, parentId: 1 }]\n * ```\n */\nexport function treeToArray<T extends { [key: string]: any }>(\n  tree: (T & { [key: string]: any })[] | null | undefined,\n  options: {\n    idKey?: string;\n    parentKey?: string;\n    childrenKey?: string;\n  } | null | undefined = {}\n): T[] {\n  const {\n    idKey = 'id',\n    parentKey = 'parentId',\n    childrenKey = 'children'\n  } = options || {};\n\n  if (!Array.isArray(tree)) {\n    return [];\n  }\n\n  const result: T[] = [];\n\n  function traverse(nodes: (T & { [key: string]: any })[], parentId: string | number | null = null) {\n    nodes.forEach(node => {\n      const { [childrenKey]: children, ...rest } = node;\n      result.push({\n        ...rest,\n        [parentKey]: parentId\n      } as T);\n\n      if (children && Array.isArray(children) && children.length > 0) {\n        traverse(children as (T & { [key: string]: any })[], node[idKey]);\n      }\n    });\n  }\n\n  traverse(tree);\n  return result;\n}\n\n/**\n * 在树结构中查找节点\n * @param tree - 树结构\n * @param predicate - 查找条件\n * @param options - 配置选项\n * @returns 找到的节点\n * @example\n * ```typescript\n * findTreeNode(\n *   [{ id: 1, children: [{ id: 2 }, { id: 3 }] }],\n *   node => node.id === 2\n * )\n * // 返回 { id: 2 }\n * ```\n */\nexport function findTreeNode<T extends { [key: string]: any }>(\n  tree: (T & { [key: string]: any })[] | null | undefined,\n  predicate: (node: T & { [key: string]: any }) => boolean,\n  options: {\n    childrenKey?: string;\n  } | null | undefined = {}\n): (T & { [key: string]: any }) | undefined {\n  const { childrenKey = 'children' } = options || {};\n\n  if (!Array.isArray(tree)) {\n    return undefined;\n  }\n\n  for (const node of tree) {\n    if (predicate(node)) {\n      return node;\n    }\n\n    const children = node[childrenKey];\n    if (children && Array.isArray(children) && children.length > 0) {\n      const found = findTreeNode(children as (T & { [key: string]: any })[], predicate, options);\n      if (found) {\n        return found;\n      }\n    }\n  }\n\n  return undefined;\n}\n\n/**\n * 过滤树结构\n * @param tree - 树结构\n * @param predicate - 过滤条件\n * @param options - 配置选项\n * @returns 过滤后的树结构\n * @example\n * ```typescript\n * filterTree(\n *   [{ id: 1, children: [{ id: 2 }, { id: 3 }] }],\n *   node => node.id !== 2\n * )\n * // 返回 [{ id: 1, children: [{ id: 3 }] }]\n * ```\n */\nexport function filterTree<T extends { [key: string]: any }>(\n  tree: (T & { [key: string]: any })[] | null | undefined,\n  predicate: (node: T & { [key: string]: any }) => boolean,\n  options: {\n    childrenKey?: string;\n  } | null | undefined = {}\n): (T & { [key: string]: any })[] {\n  const { childrenKey = 'children' } = options || {};\n\n  if (!Array.isArray(tree)) {\n    return [];\n  }\n\n  return tree\n    .filter(predicate)\n    .map(node => {\n      const children = node[childrenKey];\n      if (children && Array.isArray(children) && children.length > 0) {\n        return {\n          ...node,\n          [childrenKey]: filterTree(children as (T & { [key: string]: any })[], predicate, options)\n        };\n      }\n      return node;\n    });\n} ","/**\n * 基础数组操作相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 判断数组是否为空\n * @param arr - 要检查的数组\n * @returns 是否为空\n * @example\n * ```typescript\n * isEmpty([])\n * // 返回 true\n * ```\n */\nexport function isEmpty<T>(arr: T[] | null | undefined): boolean {\n  return !Array.isArray(arr) || arr.length === 0;\n}\n\n/**\n * 获取数组第一个元素\n * @param arr - 源数组\n * @returns 第一个元素\n * @example\n * ```typescript\n * first([1, 2, 3])\n * // 返回 1\n * ```\n */\nexport function first<T>(arr: T[] | null | undefined): T | undefined {\n  if (!Array.isArray(arr) || arr.length === 0) {\n    return undefined;\n  }\n  return arr[0];\n}\n\n/**\n * 获取数组最后一个元素\n * @param arr - 源数组\n * @returns 最后一个元素\n * @example\n * ```typescript\n * last([1, 2, 3])\n * // 返回 3\n * ```\n */\nexport function last<T>(arr: T[] | null | undefined): T | undefined {\n  if (!Array.isArray(arr) || arr.length === 0) {\n    return undefined;\n  }\n  return arr[arr.length - 1];\n}\n\n/**\n * 获取数组指定范围的元素\n * @param arr - 源数组\n * @param start - 起始索引\n * @param end - 结束索引\n * @returns 指定范围的元素数组\n * @example\n * ```typescript\n * range([1, 2, 3, 4, 5], 1, 3)\n * // 返回 [2, 3]\n * ```\n */\nexport function range<T>(arr: T[] | null | undefined, start: number, end: number): T[] {\n  if (!Array.isArray(arr) || start < 0 || end > arr.length || start > end) {\n    return [];\n  }\n  return arr.slice(start, end);\n}\n\n/**\n * 安全获取数组元素\n * @param arr - 源数组\n * @param index - 索引\n * @param defaultValue - 默认值\n * @returns 指定索引的元素或默认值\n * @example\n * ```typescript\n * get([1, 2, 3], 1, 0)\n * // 返回 2\n * get([1, 2, 3], 5, 0)\n * // 返回 0\n * ```\n */\nexport function get<T>(arr: T[] | null | undefined, index: number, defaultValue?: T): T | undefined {\n  if (!Array.isArray(arr) || index < 0 || index >= arr.length) {\n    return defaultValue;\n  }\n  return arr[index];\n}\n\n/**\n * 将数组分割成指定大小的块\n * @param arr - 要分割的数组\n * @param size - 每个块的大小\n * @returns 分割后的数组块\n * @example\n * ```typescript\n * chunk([1, 2, 3, 4, 5], 2)\n * // 返回 [[1, 2], [3, 4], [5]]\n * ```\n */\nexport function chunk<T>(arr: T[] | null | undefined, size: number): T[][] {\n  if (!Array.isArray(arr) || size < 1) {\n    return [];\n  }\n  const result: T[][] = [];\n  for (let i = 0; i < arr.length; i += size) {\n    result.push(arr.slice(i, i + size));\n  }\n  return result;\n}\n\n/**\n * 将多维数组扁平化为一维数组\n * @param arr - 要扁平化的数组\n * @param depth - 扁平化的深度，默认为 Infinity\n * @returns 扁平化后的数组\n * @example\n * ```typescript\n * flatten([1, [2, 3], [4, [5, 6]]])\n * // 返回 [1, 2, 3, 4, 5, 6]\n * ```\n */\nexport function flatten<T>(arr: T[] | null | undefined, depth: number = Infinity): T[] {\n  if (!Array.isArray(arr) || depth < 1) {\n    return arr || [];\n  }\n  return arr.reduce((acc, val) => {\n    return acc.concat(Array.isArray(val) ? flatten(val, depth - 1) : val);\n  }, [] as T[]);\n} ","/**\n * 数组分组相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 按指定条件将数组元素分组\n * @param arr - 要分组的数组\n * @param keyOrFn - 分组的键或转换函数\n * @returns 分组后的对象\n * @example\n * ```typescript\n * groupBy([1, 2, 3, 4, 5, 6], n => n % 2 === 0 ? '偶数' : '奇数')\n * // 返回 { '偶数': [2, 4, 6], '奇数': [1, 3, 5] }\n * ```\n */\nexport function groupBy<T, K extends keyof T | string>(\n  arr: T[] | null | undefined,\n  keyOrFn: K | ((item: T) => string | number)\n): Record<string, T[]> {\n  if (!Array.isArray(arr)) {\n    return {};\n  }\n  return arr.reduce((groups, item) => {\n    const key = typeof keyOrFn === 'function'\n      ? keyOrFn(item)\n      : String(item[keyOrFn as keyof T]);\n    if (!groups[key]) {\n      groups[key] = [];\n    }\n    groups[key].push(item);\n    return groups;\n  }, {} as Record<string, T[]>);\n}\n\n/**\n * 按大小将数组分组\n * @param arr - 要分组的数组\n * @param size - 每组的大小\n * @returns 分组后的数组\n * @example\n * ```typescript\n * chunk([1, 2, 3, 4, 5], 2)\n * // 返回 [[1, 2], [3, 4], [5]]\n * ```\n */\nexport function chunkGroups<T>(arr: T[] | null | undefined, size: number): T[][] {\n  if (!Array.isArray(arr) || size < 1) {\n    return [];\n  }\n  return Array.from(\n    { length: Math.ceil(arr.length / size) },\n    (_, i) => arr.slice(i * size, i * size + size)\n  );\n}\n\n/**\n * 按数量将数组分组\n * @param arr - 要分组的数组\n * @param count - 分组数量\n * @param options - 配置选项\n * @returns 分组后的数组\n * @example\n * ```typescript\n * splitIntoGroups([1, 2, 3, 4, 5, 6, 7], 3)\n * // 返回 [[1, 2, 3], [4, 5], [6, 7]]\n * ```\n */\nexport function splitIntoGroups<T>(\n  arr: T[] | null | undefined,\n  count: number,\n  options: { balanced?: boolean } | null | undefined = {}\n): T[][] {\n  if (!Array.isArray(arr) || count < 1) {\n    return [];\n  }\n\n  const { balanced = false } = options || {};\n  const result: T[][] = Array.from({ length: count }, () => []);\n  \n  if (balanced) {\n    // 平均分配元素\n    arr.forEach((item, index) => {\n      result[index % count].push(item);\n    });\n  } else {\n    // 按顺序分配元素\n    const size = Math.ceil(arr.length / count);\n    for (let i = 0; i < count; i++) {\n      result[i] = arr.slice(i * size, (i + 1) * size);\n    }\n  }\n\n  // 移除空数组\n  return result.filter(group => group.length > 0);\n} ","/**\n * 统计相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 统计数组元素出现次数\n * @param arr - 要统计的数组\n * @returns 元素出现次数的对象\n * @example\n * ```typescript\n * count([1, 2, 1, 3, 2, 1])\n * // 返回 { 1: 3, 2: 2, 3: 1 }\n * ```\n */\nexport function count<T>(arr: T[] | null | undefined): Record<string, number> {\n  if (!Array.isArray(arr)) {\n    return {};\n  }\n  return arr.reduce((acc, item) => {\n    const key = String(item);\n    acc[key] = (acc[key] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n}\n\n/**\n * 计算数组的统计信息\n * @param arr - 要计算的数组\n * @returns 统计信息对象\n * @example\n * ```typescript\n * stats([1, 2, 3, 4, 5])\n * // 返回 { sum: 15, avg: 3, min: 1, max: 5, length: 5 }\n * ```\n */\nexport function stats(arr: number[] | null | undefined): {\n  sum: number;\n  avg: number;\n  min: number;\n  max: number;\n  length: number;\n} {\n  if (!Array.isArray(arr) || arr.length === 0) {\n    return {\n      sum: 0,\n      avg: 0,\n      min: 0,\n      max: 0,\n      length: 0\n    };\n  }\n  const sum = arr.reduce((acc, val) => acc + val, 0);\n  return {\n    sum,\n    avg: sum / arr.length,\n    min: Math.min(...arr),\n    max: Math.max(...arr),\n    length: arr.length\n  };\n} ","/**\n * 数组比较相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 计算数组差集\n * @param arr1 - 第一个数组\n * @param arr2 - 第二个数组\n * @param compareFn - 可选的比较函数\n * @returns 差集数组\n * @example\n * ```typescript\n * difference([1, 2, 3], [2, 3, 4])\n * // 返回 [1]\n * ```\n */\nexport function difference<T>(\n  arr1: T[] | null | undefined,\n  arr2: T[] | null | undefined,\n  compareFn?: (a: T, b: T) => boolean\n): T[] {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) {\n    return [];\n  }\n  return arr1.filter(item => {\n    return !arr2.some(otherItem => {\n      return compareFn ? compareFn(item, otherItem) : item === otherItem;\n    });\n  });\n}\n\n/**\n * 计算数组交集\n * @param arr1 - 第一个数组\n * @param arr2 - 第二个数组\n * @param compareFn - 可选的比较函数\n * @returns 交集数组\n * @example\n * ```typescript\n * intersection([1, 2, 3], [2, 3, 4])\n * // 返回 [2, 3]\n * ```\n */\nexport function intersection<T>(\n  arr1: T[] | null | undefined,\n  arr2: T[] | null | undefined,\n  compareFn?: (a: T, b: T) => boolean\n): T[] {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) {\n    return [];\n  }\n  return arr1.filter(item => {\n    return arr2.some(otherItem => {\n      return compareFn ? compareFn(item, otherItem) : item === otherItem;\n    });\n  });\n}\n\n/**\n * 计算数组并集\n * @param arr1 - 第一个数组\n * @param arr2 - 第二个数组\n * @param compareFn - 可选的比较函数\n * @returns 并集数组\n * @example\n * ```typescript\n * union([1, 2, 3], [2, 3, 4])\n * // 返回 [1, 2, 3, 4]\n * ```\n */\nexport function union<T>(\n  arr1: T[] | null | undefined,\n  arr2: T[] | null | undefined,\n  compareFn?: (a: T, b: T) => boolean\n): T[] {\n  if (!Array.isArray(arr1) || !Array.isArray(arr2)) {\n    return [];\n  }\n  const result = [...arr1];\n  arr2.forEach(item => {\n    if (!result.some(existingItem => {\n      return compareFn ? compareFn(item, existingItem) : item === existingItem;\n    })) {\n      result.push(item);\n    }\n  });\n  return result;\n}\n\n/**\n * 检查数组是否包含子数组\n * @param arr - 主数组\n * @param subArr - 子数组\n * @param compareFn - 可选的比较函数\n * @returns 是否包含\n * @example\n * ```typescript\n * includes([1, 2, 3, 4], [2, 3])\n * // 返回 true\n * ```\n */\nexport function includes<T>(\n  arr: T[] | null | undefined,\n  subArr: T[] | null | undefined,\n  compareFn?: (a: T, b: T) => boolean\n): boolean {\n  if (!Array.isArray(arr) || !Array.isArray(subArr) || subArr.length > arr.length) {\n    return false;\n  }\n  \n  for (let i = 0; i <= arr.length - subArr.length; i++) {\n    let found = true;\n    for (let j = 0; j < subArr.length; j++) {\n      const matches = compareFn\n        ? compareFn(arr[i + j], subArr[j])\n        : arr[i + j] === subArr[j];\n      if (!matches) {\n        found = false;\n        break;\n      }\n    }\n    if (found) {\n      return true;\n    }\n  }\n  return false;\n} ","/**\n * 数组操作相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 移动数组元素到指定位置\n * @param arr - 要操作的数组\n * @param fromIndex - 要移动的元素的索引\n * @param toIndex - 目标位置的索引\n * @returns 移动后的数组\n * @example\n * ```typescript\n * move([1, 2, 3, 4], 1, 3)\n * // 返回 [1, 3, 4, 2]\n * ```\n */\nexport function move<T>(arr: T[] | null | undefined, fromIndex: number, toIndex: number): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  const result = [...arr];\n  const [item] = result.splice(fromIndex, 1);\n  result.splice(toIndex, 0, item);\n  return result;\n}\n\n/**\n * 旋转数组元素\n * @param arr - 要操作的数组\n * @param count - 旋转的次数，正数向右旋转，负数向左旋转\n * @returns 旋转后的数组\n * @example\n * ```typescript\n * rotate([1, 2, 3, 4], 1)\n * // 返回 [4, 1, 2, 3]\n * ```\n */\nexport function rotate<T>(arr: T[] | null | undefined, count: number): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  const result = [...arr];\n  const len = result.length;\n  const normalizedCount = ((count % len) + len) % len;\n  return [...result.slice(-normalizedCount), ...result.slice(0, -normalizedCount)];\n}\n\n/**\n * 交换数组中的两个元素\n * @param arr - 要操作的数组\n * @param index1 - 第一个元素的索引\n * @param index2 - 第二个元素的索引\n * @returns 交换后的数组\n * @example\n * ```typescript\n * swap([1, 2, 3, 4], 0, 3)\n * // 返回 [4, 2, 3, 1]\n * ```\n */\nexport function swap<T>(arr: T[] | null | undefined, index1: number, index2: number): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  const result = [...arr];\n  [result[index1], result[index2]] = [result[index2], result[index1]];\n  return result;\n} ","/**\n * 数组随机操作相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 从数组中随机获取一个元素\n * @param arr - 源数组\n * @returns 随机获取的元素\n * @example\n * ```typescript\n * randomItem([1, 2, 3, 4, 5])\n * // 可能返回 1, 2, 3, 4, 5 中的任意一个\n * ```\n */\nexport function randomItem<T>(arr: T[]): T | undefined {\n  if (!Array.isArray(arr) || arr.length === 0) {\n    return undefined;\n  }\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\n/**\n * 从数组中随机获取指定数量的元素\n * @param arr - 源数组\n * @param count - 需要获取的元素数量\n * @returns 随机获取的元素数组\n * @example\n * ```typescript\n * randomItems([1, 2, 3, 4, 5], 3)\n * // 可能返回 [1, 3, 5] 等任意三个元素的组合\n * ```\n */\nexport function randomItems<T>(arr: T[], count: number): T[] {\n  if (!Array.isArray(arr) || count <= 0 || count > arr.length) {\n    return [];\n  }\n  \n  const result: T[] = [];\n  const tempArr = [...arr];\n  \n  for (let i = 0; i < count; i++) {\n    const randomIndex = Math.floor(Math.random() * tempArr.length);\n    result.push(tempArr[randomIndex]);\n    tempArr.splice(randomIndex, 1);\n  }\n  \n  return result;\n}\n\n/**\n * 随机打乱数组\n * @param arr - 要打乱的数组\n * @returns 打乱后的新数组\n * @example\n * ```typescript\n * shuffle([1, 2, 3, 4, 5])\n * // 可能返回 [3, 1, 5, 2, 4] 等任意排列\n * ```\n */\nexport function shuffle<T>(arr: T[]): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  \n  const result = [...arr];\n  for (let i = result.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n  \n  return result;\n}\n\n/**\n * 随机获取指定范围内的元素\n * @param arr - 源数组\n * @param start - 起始索引\n * @param end - 结束索引\n * @returns 指定范围内的随机元素\n * @example\n * ```typescript\n * randomRange([1, 2, 3, 4, 5], 1, 3)\n * // 可能返回 2, 3, 4 中的任意一个\n * ```\n */\nexport function randomRange<T>(arr: T[], start: number, end: number): T | undefined {\n  if (!Array.isArray(arr) || start < 0 || end > arr.length || start > end) {\n    return undefined;\n  }\n  \n  const range = end - start;\n  const randomIndex = start + Math.floor(Math.random() * range);\n  return arr[randomIndex];\n}\n","/**\n * 排序相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 根据指定条件对数组元素进行排序\n * @param arr - 要排序的数组\n * @param keyOrFn - 排序的键或比较函数\n * @param order - 排序顺序，'asc' 或 'desc'，默认为 'asc'\n * @returns 排序后的数组\n * @example\n * ```typescript\n * sortBy([{ id: 1, value: 3 }, { id: 2, value: 1 }, { id: 3, value: 2 }], 'value')\n * // 返回 [{ id: 2, value: 1 }, { id: 3, value: 2 }, { id: 1, value: 3 }]\n * ```\n */\nexport function sortBy<T, K extends keyof T | string>(\n  arr: T[] | null | undefined,\n  keyOrFn: K | ((a: T, b: T) => number),\n  order: 'asc' | 'desc' = 'asc'\n): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  const result = [...arr];\n  const compareFn = typeof keyOrFn === 'function'\n    ? keyOrFn\n    : (a: T, b: T) => {\n        const aVal = a[keyOrFn as keyof T];\n        const bVal = b[keyOrFn as keyof T];\n        return aVal < bVal ? -1 : aVal > bVal ? 1 : 0;\n      };\n  return result.sort((a, b) => {\n    const result = compareFn(a, b);\n    return order === 'asc' ? result : -result;\n  });\n}\n\n/**\n * 根据多个条件对数组元素进行排序\n * @param arr - 要排序的数组\n * @param conditions - 排序条件数组\n * @returns 排序后的数组\n * @example\n * ```typescript\n * sortByMultiple(\n *   [\n *     { name: 'a', age: 20 },\n *     { name: 'b', age: 18 },\n *     { name: 'a', age: 18 }\n *   ],\n *   [\n *     { key: 'name', order: 'asc' },\n *     { key: 'age', order: 'desc' }\n *   ]\n * )\n * // 返回 [{ name: 'a', age: 20 }, { name: 'a', age: 18 }, { name: 'b', age: 18 }]\n * ```\n */\nexport function sortByMultiple<T>(\n  arr: T[] | null | undefined,\n  conditions: Array<{ key: keyof T; order?: 'asc' | 'desc' }> | null | undefined\n): T[] {\n  if (!Array.isArray(arr) || !Array.isArray(conditions)) {\n    return [];\n  }\n  const result = [...arr];\n  return result.sort((a, b) => {\n    for (const { key, order = 'asc' } of conditions) {\n      const aVal = a[key];\n      const bVal = b[key];\n      if (aVal !== bVal) {\n        return order === 'asc'\n          ? aVal < bVal ? -1 : 1\n          : aVal < bVal ? 1 : -1;\n      }\n    }\n    return 0;\n  });\n}\n\n/**\n * 使用自定义比较函数对数组进行排序\n * @param arr - 要排序的数组\n * @param compareFn - 比较函数\n * @returns 排序后的数组\n * @example\n * ```typescript\n * sortWith([1, 2, 3, 4], (a, b) => b - a)\n * // 返回 [4, 3, 2, 1]\n * ```\n */\nexport function sortWith<T>(arr: T[] | null | undefined, compareFn: (a: T, b: T) => number): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  const result = [...arr];\n  return result.sort(compareFn);\n}\n\n/**\n * 使用稳定排序算法对数组进行排序\n * @param arr - 要排序的数组\n * @param compareFn - 比较函数\n * @returns 排序后的数组\n * @example\n * ```typescript\n * stableSort([{ id: 1, value: 1 }, { id: 2, value: 1 }], (a, b) => a.value - b.value)\n * // 返回 [{ id: 1, value: 1 }, { id: 2, value: 1 }]，保持相等元素的原始顺序\n * ```\n */\nexport function stableSort<T>(arr: T[] | null | undefined, compareFn: (a: T, b: T) => number): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  const indexed = arr.map((item, index) => ({ item, index }));\n  return indexed\n    .sort((a, b) => {\n      const result = compareFn(a.item, b.item);\n      return result === 0 ? a.index - b.index : result;\n    })\n    .map(({ item }) => item);\n} ","/**\n * 数组转换相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 将数组转换为对象\n * @param arr - 源数组\n * @param keyFn - 生成键的函数\n * @param valueFn - 生成值的函数\n * @returns 转换后的对象\n * @example\n * ```typescript\n * toObject(\n *   [{ id: 1, name: 'a' }, { id: 2, name: 'b' }],\n *   item => item.id,\n *   item => item.name\n * )\n * // 返回 { 1: 'a', 2: 'b' }\n * ```\n */\nexport function toObject<T, K extends string | number, V>(\n  arr: T[] | null | undefined,\n  keyFn: (item: T) => K,\n  valueFn: (item: T) => V\n): Record<K, V> {\n  if (!Array.isArray(arr)) {\n    return {} as Record<K, V>;\n  }\n  \n  return arr.reduce((obj, item) => {\n    const key = keyFn(item);\n    const value = valueFn(item);\n    obj[key] = value;\n    return obj;\n  }, {} as Record<K, V>);\n}\n\n/**\n * 将数组转换为Map\n * @param arr - 源数组\n * @param keyFn - 生成键的函数\n * @param valueFn - 生成值的函数\n * @returns 转换后的Map\n * @example\n * ```typescript\n * toMap(\n *   [{ id: 1, name: 'a' }, { id: 2, name: 'b' }],\n *   item => item.id,\n *   item => item.name\n * )\n * // 返回 Map(2) { 1 => 'a', 2 => 'b' }\n * ```\n */\nexport function toMap<T, K, V>(\n  arr: T[] | null | undefined,\n  keyFn: (item: T) => K,\n  valueFn: (item: T) => V\n): Map<K, V> {\n  if (!Array.isArray(arr)) {\n    return new Map();\n  }\n  \n  return new Map(arr.map(item => [keyFn(item), valueFn(item)]));\n}\n\n/**\n * 将数组转换为Set\n * @param arr - 源数组\n * @param transformFn - 转换函数\n * @returns 转换后的Set\n * @example\n * ```typescript\n * toSet([1, 2, 3, 3, 4, 4, 5])\n * // 返回 Set(5) { 1, 2, 3, 4, 5 }\n * ```\n */\nexport function toSet<T, R = T>(\n  arr: T[] | null | undefined,\n  transformFn?: (item: T) => R\n): Set<R> {\n  if (!Array.isArray(arr)) {\n    return new Set<R>();\n  }\n  \n  if (transformFn) {\n    return new Set<R>(arr.map(transformFn));\n  }\n  \n  return new Set<R>(arr as unknown as R[]);\n}\n\n/**\n * 将数组转换为字符串\n * @param arr - 源数组\n * @param separator - 分隔符\n * @returns 转换后的字符串\n * @example\n * ```typescript\n * toString([1, 2, 3], '-')\n * // 返回 '1-2-3'\n * ```\n */\nexport function toString<T>(\n  arr: T[] | null | undefined,\n  separator: string = ','\n): string {\n  if (!Array.isArray(arr)) {\n    return '';\n  }\n  \n  return arr.join(separator);\n}\n","/**\n * 去重相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 数组去重\n * @param arr - 要去重的数组\n * @returns 去重后的数组\n * @example\n * ```typescript\n * unique([1, 2, 1, 3, 2, 1])\n * // 返回 [1, 2, 3]\n * ```\n */\nexport function unique<T>(arr: T[]): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  return Array.from(new Set(arr));\n}\n\n/**\n * 根据指定条件去重\n * @param arr - 要去重的数组\n * @param keyOrFn - 去重的键或比较函数\n * @returns 去重后的数组\n * @example\n * ```typescript\n * uniqueBy([{ id: 1, value: 1 }, { id: 2, value: 1 }, { id: 3, value: 2 }], 'value')\n * // 返回 [{ id: 1, value: 1 }, { id: 3, value: 2 }]\n * ```\n */\nexport function uniqueBy<T, K extends keyof T | string>(\n  arr: T[],\n  keyOrFn: K | ((a: T, b: T) => boolean)\n): T[] {\n  if (!Array.isArray(arr)) {\n    return [];\n  }\n  const seen = new Set();\n  return arr.filter(item => {\n    const key = typeof keyOrFn === 'function'\n      ? keyOrFn(item, item)\n      : item[keyOrFn as keyof T];\n    if (seen.has(key)) {\n      return false;\n    }\n    seen.add(key);\n    return true;\n  });\n} ","/**\n * 浏览器检测相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 浏览器信息接口\n */\nexport interface BrowserInfo {\n  /** 浏览器名称 */\n  name: string;\n  /** 浏览器版本 */\n  version: string;\n  /** 是否为移动浏览器 */\n  isMobile: boolean;\n}\n\n/**\n * 获取当前浏览器的详细信息\n * \n * @returns 浏览器名称、版本和移动浏览器标志\n * @example\n * ```ts\n * const browser = getBrowserInfo();\n * console.log(`浏览器: ${browser.name} ${browser.version}`);\n * if (browser.isMobile) {\n *   console.log('这是移动浏览器');\n * }\n * ```\n */\nexport function getBrowserInfo(): BrowserInfo {\n  const userAgent = navigator.userAgent;\n  let name = 'Unknown';\n  let version = 'Unknown';\n  let isMobile = false;\n  \n  // 检查是否为移动浏览器\n  if (/Mobi|Android/i.test(userAgent)) {\n    isMobile = true;\n  }\n  \n  // 检测常见浏览器\n  if (/Edge|Edg/i.test(userAgent)) {\n    name = 'Edge';\n    const match = userAgent.match(/(Edge|Edg)\\/(\\d+(\\.\\d+)?)/);\n    if (match) {\n      version = match[2];\n    }\n  } else if (/Firefox/i.test(userAgent)) {\n    name = 'Firefox';\n    const match = userAgent.match(/Firefox\\/(\\d+(\\.\\d+)?)/);\n    if (match) {\n      version = match[1];\n    }\n  } else if (/Chrome/i.test(userAgent)) {\n    name = 'Chrome';\n    const match = userAgent.match(/Chrome\\/(\\d+(\\.\\d+)?)/);\n    if (match) {\n      version = match[1];\n    }\n  } else if (/Safari/i.test(userAgent) && !/Chrome/i.test(userAgent)) {\n    name = 'Safari';\n    const match = userAgent.match(/Version\\/(\\d+(\\.\\d+)?)/);\n    if (match) {\n      version = match[1];\n    }\n  } else if (/MSIE|Trident/i.test(userAgent)) {\n    name = 'Internet Explorer';\n    const match = userAgent.match(/(?:MSIE |rv:)(\\d+(\\.\\d+)?)/);\n    if (match) {\n      version = match[1];\n    }\n  } else if (/Opera|OPR/i.test(userAgent)) {\n    name = 'Opera';\n    const match = userAgent.match(/(?:Opera|OPR)\\/(\\d+(\\.\\d+)?)/);\n    if (match) {\n      version = match[1];\n    }\n  }\n  \n  return { name, version, isMobile };\n}\n\n/**\n * 检查当前浏览器是否为指定的浏览器类型\n * \n * @param browserName - 浏览器名称\n * @returns 如果匹配则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isBrowser('Chrome')) {\n *   // Chrome 特定功能\n * } else if (isBrowser('Safari')) {\n *   // Safari 特定功能\n * }\n * ```\n */\nexport function isBrowser(browserName: string): boolean {\n  const info = getBrowserInfo();\n  return info.name.toLowerCase() === browserName.toLowerCase();\n}\n\n/**\n * 检查当前浏览器是否为 Chrome\n * \n * @returns 如果是 Chrome 则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isChrome()) {\n *   // 使用 Chrome 特定功能\n * }\n * ```\n */\nexport function isChrome(): boolean {\n  return isBrowser('Chrome');\n}\n\n/**\n * 检查当前浏览器是否为 Firefox\n * \n * @returns 如果是 Firefox 则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isFirefox()) {\n *   // 使用 Firefox 特定功能\n * }\n * ```\n */\nexport function isFirefox(): boolean {\n  return isBrowser('Firefox');\n}\n\n/**\n * 检查当前浏览器是否为 Safari\n * \n * @returns 如果是 Safari 则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isSafari()) {\n *   // 处理 Safari 兼容性问题\n * }\n * ```\n */\nexport function isSafari(): boolean {\n  return isBrowser('Safari');\n}\n\n/**\n * 检查当前浏览器是否为 Edge\n * \n * @returns 如果是 Edge 则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isEdge()) {\n *   // 处理 Edge 特定问题\n * }\n * ```\n */\nexport function isEdge(): boolean {\n  return isBrowser('Edge');\n}\n\n/**\n * 检查当前浏览器是否为 Internet Explorer\n * \n * @returns 如果是 IE 则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isIE()) {\n *   alert('您的浏览器不受支持，请使用现代浏览器');\n * }\n * ```\n */\nexport function isIE(): boolean {\n  return isBrowser('Internet Explorer');\n}\n\n/**\n * 检查浏览器是否支持某个 CSS 属性\n * \n * @param property - 要检查的 CSS 属性\n * @returns 如果支持则返回 true，否则返回 false\n * @example\n * ```ts\n * if (supportsCSSProperty('grid')) {\n *   // 使用 CSS Grid 布局\n * } else {\n *   // 使用替代布局\n * }\n * ```\n */\nexport function supportsCSSProperty(property: string): boolean {\n  return property in document.documentElement.style;\n}\n\n/**\n * 检查浏览器是否支持某种媒体查询\n * \n * @param query - 要检查的媒体查询字符串\n * @returns 如果支持则返回 true，否则返回 false\n * @example\n * ```ts\n * if (supportsMediaQuery('(prefers-color-scheme: dark)')) {\n *   // 支持暗黑模式偏好检测\n * }\n * ```\n */\nexport function supportsMediaQuery(query: string): boolean {\n  return window.matchMedia && window.matchMedia(query).matches;\n}\n\n/**\n * 检查浏览器是否支持某个 Web API\n * \n * @param api - 要检查的 API 名称\n * @returns 如果支持则返回 true，否则返回 false\n * @example\n * ```ts\n * if (supportsWebAPI('IntersectionObserver')) {\n *   // 使用 Intersection Observer API 实现懒加载\n * } else {\n *   // 使用滚动事件实现懒加载\n * }\n * ```\n */\nexport function supportsWebAPI(api: string): boolean {\n  return api in window;\n}\n\n/**\n * 检查浏览器是否支持离线存储\n * \n * @returns 如果支持则返回 true，否则返回 false\n * @example\n * ```ts\n * if (supportsOfflineStorage()) {\n *   // 实现离线功能\n * }\n * ```\n */\nexport function supportsOfflineStorage(): boolean {\n  return 'serviceWorker' in navigator && 'caches' in window;\n}\n\n/**\n * 检查浏览器是否支持指定的输入类型\n * \n * @param inputType - 要检查的输入类型\n * @returns 如果支持则返回 true，否则返回 false\n * @example\n * ```ts\n * if (supportsInputType('date')) {\n *   // 使用原生日期选择器\n * } else {\n *   // 使用自定义日期选择器\n * }\n * ```\n */\nexport function supportsInputType(inputType: string): boolean {\n  const input = document.createElement('input');\n  input.setAttribute('type', inputType);\n  return input.type === inputType;\n} ","/**\n * 设备检测相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 检测当前设备是否为移动设备\n * \n * @returns 如果是移动设备则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isMobile()) {\n *   // 显示移动版布局\n * } else {\n *   // 显示桌面版布局\n * }\n * ```\n */\nexport function isMobile(): boolean {\n  const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera || '';\n  \n  // 检查常见的移动设备标识\n  const mobileRegex = /android|webos|iphone|ipad|ipod|blackberry|iemobile|opera mini/i;\n  \n  return mobileRegex.test(userAgent.toLowerCase());\n}\n\n/**\n * 检测当前设备是否为平板设备\n * \n * @returns 如果是平板设备则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isTablet()) {\n *   // 调整布局适应平板设备\n * }\n * ```\n */\nexport function isTablet(): boolean {\n  // 综合多种方法判断是否为平板\n  const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera || '';\n  \n  // 检查常见的平板设备标识\n  const tabletRegex = /(ipad|tablet|playbook|silk)|(android(?!.*mobile))/i;\n  \n  // 检查屏幕大小（通常平板设备宽度 > 768px）\n  const screenWidth = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\n  \n  return tabletRegex.test(userAgent.toLowerCase()) || (screenWidth > 768 && isMobile());\n}\n\n/**\n * 检测当前设备是否为桌面设备\n * \n * @returns 如果是桌面设备则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isDesktop()) {\n *   // 启用高级交互功能\n * }\n * ```\n */\nexport function isDesktop(): boolean {\n  return !isMobile() && !isTablet();\n}\n\n/**\n * 检测当前设备是否为 iOS 设备\n * \n * @returns 如果是 iOS 设备则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isIOS()) {\n *   // 处理 iOS 特定功能\n * }\n * ```\n */\nexport function isIOS(): boolean {\n  const userAgent = navigator.userAgent || navigator.vendor || (window as any).opera || '';\n  \n  // 检查 iOS 设备的特征\n  return /ipad|iphone|ipod/i.test(userAgent) && !(window as any).MSStream;\n}\n\n/**\n * 检测当前设备是否为 Android 设备\n * \n * @returns 如果是 Android 设备则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isAndroid()) {\n *   // 处理 Android 特定功能\n * }\n * ```\n */\nexport function isAndroid(): boolean {\n  const userAgent = navigator.userAgent || '';\n  \n  return /android/i.test(userAgent);\n}\n\n/**\n * 检测屏幕是否处于竖屏模式\n * \n * @returns 如果是竖屏模式则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isPortrait()) {\n *   // 优化竖屏布局\n * } else {\n *   // 优化横屏布局\n * }\n * ```\n */\nexport function isPortrait(): boolean {\n  // 首先尝试使用 window.matchMedia\n  if (window.matchMedia) {\n    return window.matchMedia('(orientation: portrait)').matches;\n  }\n  \n  // 备选方法：比较窗口宽高\n  return window.innerHeight > window.innerWidth;\n}\n\n/**\n * 检测屏幕是否处于横屏模式\n * \n * @returns 如果是横屏模式则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isLandscape()) {\n *   // 显示横屏优化的内容\n * }\n * ```\n */\nexport function isLandscape(): boolean {\n  return !isPortrait();\n}\n\n/**\n * 获取设备像素比\n * \n * @returns 设备的像素比\n * @example\n * ```ts\n * const ratio = getDevicePixelRatio();\n * console.log(`设备像素比是: ${ratio}`);\n * \n * // 基于像素比调整图像质量\n * if (ratio >= 2) {\n *   // 使用高分辨率图像\n * }\n * ```\n */\nexport function getDevicePixelRatio(): number {\n  return window.devicePixelRatio || 1;\n}\n\n/**\n * 判断是否支持触摸事件\n * \n * @returns 如果支持触摸事件则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isTouchDevice()) {\n *   // 启用触摸优化交互\n * } else {\n *   // 启用鼠标优化交互\n * }\n * ```\n */\nexport function isTouchDevice(): boolean {\n  return (\n    ('ontouchstart' in window) ||\n    (navigator.maxTouchPoints > 0) ||\n    ((navigator as any).msMaxTouchPoints > 0)\n  );\n}\n\n/**\n * 获取设备类型\n * \n * @returns 设备类型的字符串表示 ('mobile', 'tablet', 'desktop')\n * @example\n * ```ts\n * const deviceType = getDeviceType();\n * switch (deviceType) {\n *   case 'mobile':\n *     // 移动设备处理\n *     break;\n *   case 'tablet':\n *     // 平板设备处理\n *     break;\n *   case 'desktop':\n *     // 桌面设备处理\n *     break;\n * }\n * ```\n */\nexport function getDeviceType(): 'mobile' | 'tablet' | 'desktop' {\n  if (isTablet()) {\n    return 'tablet';\n  } else if (isMobile()) {\n    return 'mobile';\n  } else {\n    return 'desktop';\n  }\n} ","/**\n * 调整颜色的亮度、饱和度或色调\n * \n * @param color - 要调整的颜色，可以是十六进制或RGB格式\n * @param adjustments - 调整选项\n * @param adjustments.lightness - 亮度调整值，范围为-1到1，0表示不变\n * @param adjustments.saturation - 饱和度调整值，范围为-1到1，0表示不变\n * @param adjustments.hue - 色调调整值，范围为-360到360，0表示不变\n * @param adjustments.alpha - alpha通道值，范围为0到1\n * @returns 调整后的颜色（与输入格式相同）\n * @example\n * ```ts\n * // 调整亮度\n * adjustColor('#ff0000', { lightness: 0.2 }); // 返回: \"#ff3333\" (变亮)\n * adjustColor('#ff0000', { lightness: -0.2 }); // 返回: \"#cc0000\" (变暗)\n * \n * // 调整饱和度\n * adjustColor('#ff0000', { saturation: -0.5 }); // 返回: \"#bf4040\" (降低饱和度)\n * \n * // 调整色调\n * adjustColor('#ff0000', { hue: 60 }); // 返回: \"#ffff00\" (红色 -> 黄色)\n * adjustColor('#ff0000', { hue: 120 }); // 返回: \"#00ff00\" (红色 -> 绿色)\n * \n * // 组合调整\n * adjustColor('#ff0000', { lightness: 0.1, saturation: -0.2, hue: 30 }); // 返回混合调整后的颜色\n * \n * // 使用RGB对象\n * adjustColor({ r: 255, g: 0, b: 0 }, { lightness: 0.2 }); // 返回: { r: 255, g: 51, b: 51 }\n * ```\n */\nexport function adjustColor(\n  color: string | { r: number; g: number; b: number; a?: number | undefined },\n  adjustments: {\n    lightness?: number | undefined;\n    saturation?: number | undefined;\n    hue?: number | undefined;\n    alpha?: number | undefined;\n  } = {}\n): string | { r: number; g: number; b: number; a?: number | undefined } {\n  // 获取调整值，默认为0表示不变\n  const {\n    lightness = 0,\n    saturation = 0,\n    hue = 0,\n    alpha\n  } = adjustments;\n  \n  // 将颜色转换为HSL格式便于调整\n  const hsl = toHSL(color);\n  if (!hsl) return color; // 如果转换失败则返回原始颜色\n  \n  // 调整HSL值\n  hsl.h = (hsl.h + hue) % 360;\n  if (hsl.h < 0) hsl.h += 360; // 确保色调值在0-360范围内\n  \n  // 调整饱和度，确保在0-100范围内\n  hsl.s = Math.max(0, Math.min(100, hsl.s + saturation * 100));\n  \n  // 调整亮度，确保在0-100范围内\n  hsl.l = Math.max(0, Math.min(100, hsl.l + lightness * 100));\n  \n  // 应用alpha值\n  if (alpha !== undefined) {\n    hsl.a = Math.max(0, Math.min(1, alpha));\n  }\n  \n  // 转换回原始格式\n  return typeof color === 'string'\n    ? hslToString(hsl)\n    : hslToRgb(hsl);\n}\n\n/**\n * 将颜色转换为HSL格式\n * \n * @param color - 要转换的颜色，可以是十六进制或RGB格式\n * @returns HSL对象\n */\nfunction toHSL(\n  color: string | { r: number; g: number; b: number; a?: number | undefined }\n): { h: number; s: number; l: number; a?: number | undefined } | null {\n  let r: number, g: number, b: number, a: number | undefined;\n  \n  // 解析输入颜色\n  if (typeof color === 'string') {\n    // 如果是十六进制格式\n    const hex = color.replace(/^#/, '');\n    \n    if (!/^([0-9a-f]{3}|[0-9a-f]{6})$/i.test(hex)) {\n      console.error('无效的十六进制颜色:', color);\n      return null;\n    }\n    \n    // 标准化为6位格式\n    const fullHex = hex.length === 3\n      ? hex.split('').map(c => c + c).join('')\n      : hex;\n    \n    // 解析RGB通道\n    r = parseInt(fullHex.substring(0, 2), 16);\n    g = parseInt(fullHex.substring(2, 4), 16);\n    b = parseInt(fullHex.substring(4, 6), 16);\n  } else {\n    // 如果是RGB对象\n    r = color.r;\n    g = color.g;\n    b = color.b;\n    a = color.a;\n  }\n  \n  // 将RGB值标准化为0-1范围\n  r /= 255;\n  g /= 255;\n  b /= 255;\n  \n  // 找出最大和最小的RGB通道\n  const max = Math.max(r, g, b);\n  const min = Math.min(r, g, b);\n  let h = 0, s = 0, l = (max + min) / 2;\n  \n  // 计算色调和饱和度\n  if (max !== min) {\n    const d = max - min;\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n    \n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0);\n        break;\n      case g:\n        h = (b - r) / d + 2;\n        break;\n      case b:\n        h = (r - g) / d + 4;\n        break;\n    }\n    \n    h /= 6;\n  }\n  \n  // 转换为标准HSL格式\n  return {\n    h: Math.round(h * 360),\n    s: Math.round(s * 100),\n    l: Math.round(l * 100),\n    a\n  };\n}\n\n/**\n * 将HSL颜色格式转换为字符串表示\n * \n * @param hsl - HSL颜色对象\n * @returns HSL颜色字符串\n */\nfunction hslToString(hsl: { h: number; s: number; l: number; a?: number | undefined }): string {\n  const { h, s, l, a } = hsl;\n  return a !== undefined\n    ? `hsla(${h}, ${s}%, ${l}%, ${a})`\n    : `hsl(${h}, ${s}%, ${l}%)`;\n}\n\n/**\n * 将HSL颜色转换为RGB对象\n * \n * @param hsl - HSL颜色对象\n * @returns RGB颜色对象\n */\nfunction hslToRgb(hsl: { h: number; s: number; l: number; a?: number | undefined }): { r: number; g: number; b: number; a?: number | undefined } {\n  const { h, s, l, a } = hsl;\n  const hNormalized = h / 360;\n  const sNormalized = s / 100;\n  const lNormalized = l / 100;\n  \n  let r: number, g: number, b: number;\n  \n  if (s === 0) {\n    // 如果饱和度为0，则为灰度\n    r = g = b = lNormalized;\n  } else {\n    // 辅助函数，计算给定色调的RGB分量\n    const hue2rgb = (p: number, q: number, t: number) => {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1/6) return p + (q - p) * 6 * t;\n      if (t < 1/2) return q;\n      if (t < 2/3) return p + (q - p) * (2/3 - t) * 6;\n      return p;\n    };\n    \n    const q = lNormalized < 0.5\n      ? lNormalized * (1 + sNormalized)\n      : lNormalized + sNormalized - lNormalized * sNormalized;\n    const p = 2 * lNormalized - q;\n    \n    r = hue2rgb(p, q, hNormalized + 1/3);\n    g = hue2rgb(p, q, hNormalized);\n    b = hue2rgb(p, q, hNormalized - 1/3);\n  }\n  \n  // 将RGB值转换回0-255范围\n  const result = {\n    r: Math.round(r * 255),\n    g: Math.round(g * 255),\n    b: Math.round(b * 255)\n  };\n  \n  // 添加alpha通道（如果有）\n  if (a !== undefined) {\n    return { ...result, a };\n  }\n  \n  return result;\n} ","/**\n * 将十六进制颜色代码转换为RGB颜色值\n * \n * @param hex - 十六进制颜色代码，支持3位(#RGB)和6位(#RRGGBB)格式，可选带#前缀\n * @param options - 配置选项\n * @param options.alpha - 是否返回包含alpha通道的RGBA值，默认为false\n * @param options.format - 返回格式，可以是'object'、'array'或'string'，默认为'object'\n * @returns 转换后的RGB颜色值，格式由options.format决定\n * @example\n * ```ts\n * // 基本用法\n * hexToRgb('#ff0000'); // 返回: { r: 255, g: 0, b: 0 }\n * \n * // 缩写形式\n * hexToRgb('#f00'); // 返回: { r: 255, g: 0, b: 0 }\n * \n * // 不带#前缀\n * hexToRgb('ff0000'); // 返回: { r: 255, g: 0, b: 0 }\n * \n * // 返回数组格式\n * hexToRgb('#ff0000', { format: 'array' }); // 返回: [255, 0, 0]\n * \n * // 返回字符串格式\n * hexToRgb('#ff0000', { format: 'string' }); // 返回: \"rgb(255, 0, 0)\"\n * \n * // 包含alpha值\n * hexToRgb('#ff0000', { alpha: 0.5, format: 'string' }); // 返回: \"rgba(255, 0, 0, 0.5)\"\n * ```\n */\nexport function hexToRgb(\n  hex: string,\n  options: { \n    alpha?: number; \n    format?: 'object' | 'array' | 'string'\n  } = {}\n): { r: number; g: number; b: number; a?: number } | number[] | string | null {\n  // 设置默认选项\n  const { \n    alpha = undefined, \n    format = 'object'\n  } = options;\n  \n  // 移除#前缀并统一转为小写\n  const cleanHex = hex.replace(/^#/, '').toLowerCase();\n  \n  // 验证十六进制格式\n  // 支持3位(#RGB)和6位(#RRGGBB)格式\n  const isValidHex = /^([0-9a-f]{3}|[0-9a-f]{6})$/.test(cleanHex);\n  \n  if (!isValidHex) {\n    console.error('无效的十六进制颜色代码:', hex);\n    return null;\n  }\n  \n  // 如果是3位格式，转换为6位格式\n  let fullHex = cleanHex;\n  if (cleanHex.length === 3) {\n    fullHex = cleanHex\n      .split('')\n      .map(char => char + char)\n      .join('');\n  }\n  \n  // 分别解析RGB值\n  const r = parseInt(fullHex.substring(0, 2), 16);\n  const g = parseInt(fullHex.substring(2, 4), 16);\n  const b = parseInt(fullHex.substring(4, 6), 16);\n  \n  // 根据指定格式返回结果\n  switch (format) {\n    case 'object':\n      return alpha !== undefined\n        ? { r, g, b, a: alpha }\n        : { r, g, b };\n      \n    case 'array':\n      return alpha !== undefined\n        ? [r, g, b, alpha]\n        : [r, g, b];\n      \n    case 'string':\n      return alpha !== undefined\n        ? `rgba(${r}, ${g}, ${b}, ${alpha})`\n        : `rgb(${r}, ${g}, ${b})`;\n      \n    default:\n      return { r, g, b };\n  }\n}","/**\n * 将RGB颜色值转换为十六进制颜色代码\n * \n * @param r - 红色通道值（0-255）或包含RGB值的对象或数组\n * @param g - 绿色通道值（0-255），如果第一个参数是对象或数组则忽略\n * @param b - 蓝色通道值（0-255），如果第一个参数是对象或数组则忽略\n * @param options - 配置选项\n * @param options.prefix - 是否包含#前缀，默认为true\n * @param options.alpha - alpha通道值（0-1），用于生成RGBA颜色\n * @returns 十六进制颜色代码\n * @example\n * ```ts\n * // 基本用法\n * rgbToHex(255, 0, 0); // 返回: \"#ff0000\"\n * \n * // 不带#前缀\n * rgbToHex(255, 0, 0, { prefix: false }); // 返回: \"ff0000\"\n * \n * // 使用对象\n * rgbToHex({ r: 255, g: 0, b: 0 }); // 返回: \"#ff0000\"\n * \n * // 使用数组\n * rgbToHex([255, 0, 0]); // 返回: \"#ff0000\"\n * \n * // 包含alpha通道\n * rgbToHex(255, 0, 0, { alpha: 0.5 }); // 返回: \"#ff0000\" (alpha值在十六进制表示中被忽略)\n * ```\n */\nexport function rgbToHex(\n  r: number | { r: number; g: number; b: number } | number[],\n  g?: number,\n  b?: number,\n  options: { prefix?: boolean; alpha?: number } = {}\n): string {\n  let red: number;\n  let green: number;\n  let blue: number;\n  \n  // 设置默认选项\n  const { prefix = true } = options;\n  \n  // 解析输入参数\n  if (typeof r === 'object') {\n    if (Array.isArray(r)) {\n      // 如果是数组\n      red = Math.round(r[0] || 0);\n      green = Math.round(r[1] || 0);\n      blue = Math.round(r[2] || 0);\n    } else {\n      // 如果是对象\n      red = Math.round(r.r || 0);\n      green = Math.round(r.g || 0);\n      blue = Math.round(r.b || 0);\n    }\n  } else {\n    // 如果是分开的RGB值\n    red = Math.round(r || 0);\n    green = Math.round(g || 0);\n    blue = Math.round(b || 0);\n  }\n  \n  // 确保值在0-255范围内\n  red = Math.max(0, Math.min(255, red));\n  green = Math.max(0, Math.min(255, green));\n  blue = Math.max(0, Math.min(255, blue));\n  \n  // 转换为十六进制字符串\n  const hexR = red.toString(16).padStart(2, '0');\n  const hexG = green.toString(16).padStart(2, '0');\n  const hexB = blue.toString(16).padStart(2, '0');\n  \n  // 拼接结果\n  return `${prefix ? '#' : ''}${hexR}${hexG}${hexB}`;\n} ","/**\n * 判断是否为闰年\n * @param year - 要判断的年份\n * @returns 是否为闰年\n * @example\n * isLeapYear(2024) // true\n */\nexport function isLeapYear(year: number): boolean {\n  return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;\n}\n\n/**\n * 获取指定月份的第一天\n * @param date - 日期对象\n * @returns 该月第一天\n * @example\n * getFirstDayOfMonth(new Date('2024-03-20')) // 2024-03-01\n */\nexport function getFirstDayOfMonth(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth(), 1);\n}\n\n/**\n * 获取指定月份的最后一天\n * @param date - 日期对象\n * @returns 该月最后一天\n * @example\n * getLastDayOfMonth(new Date('2024-03-20')) // 2024-03-31\n */\nexport function getLastDayOfMonth(date: Date): Date {\n  return new Date(date.getFullYear(), date.getMonth() + 1, 0);\n} ","import { getFirstDayOfMonth, getLastDayOfMonth } from './special';\n\n/**\n * 获取日期的开始时间（00:00:00）\n * @param date - 日期对象\n * @returns 开始时间\n * @example\n * startOfDay(new Date('2024-03-20 14:30:00')) // 2024-03-20 00:00:00\n */\nexport function startOfDay(date: Date): Date {\n  const result = new Date(date);\n  result.setHours(0, 0, 0, 0);\n  return result;\n}\n\n/**\n * 获取日期的结束时间（23:59:59）\n * @param date - 日期对象\n * @returns 结束时间\n * @example\n * endOfDay(new Date('2024-03-20 14:30:00')) // 2024-03-20 23:59:59\n */\nexport function endOfDay(date: Date): Date {\n  const result = new Date(date);\n  result.setHours(23, 59, 59, 999);\n  return result;\n}\n\n/**\n * 获取周的开始时间\n * @param date - 日期对象\n * @returns 周开始时间\n * @example\n * startOfWeek(new Date('2024-03-20')) // 2024-03-18 00:00:00\n */\nexport function startOfWeek(date: Date): Date {\n  const result = new Date(date);\n  const day = result.getDay() || 7;\n  result.setDate(result.getDate() - day + 1);\n  return startOfDay(result);\n}\n\n/**\n * 获取周的结束时间\n * @param date - 日期对象\n * @returns 周结束时间\n * @example\n * endOfWeek(new Date('2024-03-20')) // 2024-03-24 23:59:59\n */\nexport function endOfWeek(date: Date): Date {\n  const result = new Date(date);\n  const day = result.getDay() || 7;\n  result.setDate(result.getDate() + (7 - day));\n  return endOfDay(result);\n}\n\n/**\n * 获取月份的开始时间\n * @param date - 日期对象\n * @returns 月开始时间\n * @example\n * startOfMonth(new Date('2024-03-20')) // 2024-03-01 00:00:00\n */\nexport function startOfMonth(date: Date): Date {\n  return startOfDay(getFirstDayOfMonth(date));\n}\n\n/**\n * 获取月份的结束时间\n * @param date - 日期对象\n * @returns 月结束时间\n * @example\n * endOfMonth(new Date('2024-03-20')) // 2024-03-31 23:59:59\n */\nexport function endOfMonth(date: Date): Date {\n  return endOfDay(getLastDayOfMonth(date));\n} ","interface LunarDate {\n  year: number;\n  month: number;\n  day: number;\n  leap: boolean;\n  festival?: string;\n}\n\n/**\n * 公历转农历\n * @param date - 公历日期\n * @returns 农历日期信息\n * @example\n * solarToLunar(new Date('2024-03-20')) // { year: 2024, month: 2, day: 11, leap: false }\n */\nexport function solarToLunar(date: Date): LunarDate {\n  // 这里使用简化算法，实际项目中建议使用成熟的农历转换库\n  const baseDate = new Date(1900, 0, 31);\n  const offset = Math.floor((date.getTime() - baseDate.getTime()) / (24 * 60 * 60 * 1000));\n  \n  // 简化计算，实际项目中需要更复杂的算法\n  const year = 1900 + Math.floor(offset / 365);\n  const month = 1 + Math.floor((offset % 365) / 30);\n  const day = 1 + (offset % 30);\n  \n  return {\n    year,\n    month,\n    day,\n    leap: false\n  };\n}\n\n/**\n * 农历转公历\n * @param year - 农历年\n * @param month - 农历月\n * @param day - 农历日\n * @returns 公历日期\n * @example\n * lunarToSolar(2024, 2, 11) // 2024-03-20\n */\nexport function lunarToSolar(year: number, month: number, day: number): Date {\n  // 这里使用简化算法，实际项目中建议使用成熟的农历转换库\n  const baseDate = new Date(1900, 0, 31);\n  const offset = (year - 1900) * 365 + (month - 1) * 30 + day;\n  return new Date(baseDate.getTime() + offset * 24 * 60 * 60 * 1000);\n}\n\n/**\n * 获取农历节日\n * @param date - 公历日期\n * @returns 农历节日名称\n * @example\n * getLunarFestival(new Date('2024-02-10')) // '春节'\n */\nexport function getLunarFestival(date: Date): string | undefined {\n  const lunar = solarToLunar(date);\n  // 这里使用简化判断，实际项目中需要更完整的节日数据\n  if (lunar.month === 1 && lunar.day === 1) return '春节';\n  if (lunar.month === 5 && lunar.day === 5) return '端午节';\n  if (lunar.month === 8 && lunar.day === 15) return '中秋节';\n  return undefined;\n}\n\n/**\n * 获取二十四节气\n * @param date - 公历日期\n * @returns 节气名称\n * @example\n * getSolarTerm(new Date('2024-03-20')) // '春分'\n */\nexport function getSolarTerm(date: Date): string | undefined {\n  // 这里使用简化算法，实际项目中需要更复杂的节气计算\n  const month = date.getMonth() + 1;\n  const day = date.getDate();\n  \n  // 简化判断，实际项目中需要更准确的节气数据\n  if (month === 3 && day === 20) return '春分';\n  if (month === 6 && day === 21) return '夏至';\n  if (month === 9 && day === 23) return '秋分';\n  if (month === 12 && day === 22) return '冬至';\n  \n  return undefined;\n} ","/**\n * 转换时区\n * @param date - 要转换的日期\n * @param fromZone - 源时区\n * @param toZone - 目标时区\n * @returns 转换后的日期\n * @example\n * convertTimeZone(new Date(), 'UTC', 'Asia/Shanghai')\n */\nexport function convertTimeZone(date: Date, fromZone: string, toZone: string): Date {\n  const fromOffset = getTimezoneOffset(fromZone);\n  const toOffset = getTimezoneOffset(toZone);\n  const diff = toOffset - fromOffset;\n  \n  const result = new Date(date.getTime() + diff * 60 * 60 * 1000);\n  return result;\n}\n\n/**\n * 获取时区偏移量（小时）\n * @param timezone - 时区名称\n * @returns 偏移量\n * @example\n * getTimezoneOffset('Asia/Shanghai') // 8\n */\nexport function getTimezoneOffset(timezone: string): number {\n  // 这里使用简化判断，实际项目中需要更完整的时区数据\n  const timezoneOffsets: Record<string, number> = {\n    'UTC': 0,\n    'Asia/Shanghai': 8,\n    'America/New_York': -4,\n    'Europe/London': 0,\n    'Asia/Tokyo': 9\n  };\n  \n  return timezoneOffsets[timezone] || 0;\n}\n\n/**\n * UTC时间转本地时间\n * @param date - UTC时间\n * @returns 本地时间\n * @example\n * utcToLocal(new Date('2024-03-20T00:00:00Z')) // 2024-03-20 08:00:00\n */\nexport function utcToLocal(date: Date): Date {\n  return convertTimeZone(date, 'UTC', Intl.DateTimeFormat().resolvedOptions().timeZone);\n}\n\n/**\n * 本地时间转UTC时间\n * @param date - 本地时间\n * @returns UTC时间\n * @example\n * localToUtc(new Date('2024-03-20 08:00:00')) // 2024-03-20T00:00:00Z\n */\nexport function localToUtc(date: Date): Date {\n  return convertTimeZone(date, Intl.DateTimeFormat().resolvedOptions().timeZone, 'UTC');\n} ","interface CalendarDay {\n  date: Date;\n  isCurrentMonth: boolean;\n  isToday: boolean;\n  isWeekend: boolean;\n}\n\n/**\n * 判断是否是今天\n * @param date - 要检查的日期\n * @returns 是否是今天\n */\nfunction isToday(date: Date): boolean {\n  const today = new Date();\n  return (\n    date.getFullYear() === today.getFullYear() &&\n    date.getMonth() === today.getMonth() &&\n    date.getDate() === today.getDate()\n  );\n}\n\n/**\n * 获取一周的开始日期\n * @param date - 日期对象\n * @returns 一周的开始日期\n */\nfunction getStartOfWeek(date: Date): Date {\n  const day = date.getDay() || 7;\n  return new Date(date.getFullYear(), date.getMonth(), date.getDate() - day + 1);\n}\n\n/**\n * 添加天数\n * @param date - 日期对象\n * @param days - 要添加的天数\n * @returns 新的日期对象\n */\nfunction addDays(date: Date, days: number): Date {\n  const result = new Date(date);\n  result.setDate(result.getDate() + days);\n  return result;\n}\n\n/**\n * 生成月历数据\n * @param year - 年份\n * @param month - 月份（0-11）\n * @returns 月历数据\n * @example\n * generateCalendarMonth(2024, 2) // 生成2024年3月的日历数据\n */\nexport function generateCalendarMonth(year: number, month: number): CalendarDay[] {\n  const firstDay = new Date(year, month, 1);\n  const lastDay = new Date(year, month + 1, 0);\n  const daysInMonth = lastDay.getDate();\n  const firstDayWeek = firstDay.getDay() || 7;\n  \n  const days: CalendarDay[] = [];\n  \n  // 添加上个月的日期\n  const prevMonthDays = firstDayWeek - 1;\n  const prevMonth = new Date(year, month, 0);\n  for (let i = prevMonthDays - 1; i >= 0; i--) {\n    const date = new Date(year, month - 1, prevMonth.getDate() - i);\n    days.push({\n      date,\n      isCurrentMonth: false,\n      isToday: isToday(date),\n      isWeekend: date.getDay() === 0 || date.getDay() === 6\n    });\n  }\n  \n  // 添加当前月的日期\n  for (let i = 1; i <= daysInMonth; i++) {\n    const date = new Date(year, month, i);\n    days.push({\n      date,\n      isCurrentMonth: true,\n      isToday: isToday(date),\n      isWeekend: date.getDay() === 0 || date.getDay() === 6\n    });\n  }\n  \n  // 添加下个月的日期\n  const remainingDays = 42 - days.length; // 保持6行\n  for (let i = 1; i <= remainingDays; i++) {\n    const date = new Date(year, month + 1, i);\n    days.push({\n      date,\n      isCurrentMonth: false,\n      isToday: isToday(date),\n      isWeekend: date.getDay() === 0 || date.getDay() === 6\n    });\n  }\n  \n  return days;\n}\n\n/**\n * 生成周历数据\n * @param date - 日期对象\n * @returns 周历数据\n * @example\n * generateCalendarWeek(new Date('2024-03-20')) // 生成包含该日期的周历数据\n */\nexport function generateCalendarWeek(date: Date): Date[] {\n  const week: Date[] = [];\n  const weekStart = getStartOfWeek(date);\n  \n  for (let i = 0; i < 7; i++) {\n    week.push(addDays(weekStart, i));\n  }\n  \n  return week;\n}\n\n/**\n * 获取日历网格\n * @param year - 年份\n * @param month - 月份（0-11）\n * @returns 日历网格数据\n * @example\n * getCalendarGrid(2024, 2) // 生成2024年3月的日历网格\n */\nexport function getCalendarGrid(year: number, month: number): Date[][] {\n  const days = generateCalendarMonth(year, month);\n  const grid: Date[][] = [];\n  \n  for (let i = 0; i < 6; i++) {\n    grid.push(days.slice(i * 7, (i + 1) * 7).map(day => day.date));\n  }\n  \n  return grid;\n} ","/**\n * 添加天数\n * @param date - 基准日期\n * @param days - 要添加的天数\n * @returns 新的日期对象\n * @example\n * addDays(new Date('2024-03-20'), 5) // 2024-03-25\n */\nexport function addDays(date: Date, days: number): Date {\n  const result = new Date(date);\n  result.setDate(result.getDate() + days);\n  return result;\n}\n\n/**\n * 添加月份\n * @param date - 基准日期\n * @param months - 要添加的月份数\n * @returns 新的日期对象\n * @example\n * addMonths(new Date('2024-03-20'), 2) // 2024-05-20\n */\nexport function addMonths(date: Date, months: number): Date {\n  const result = new Date(date);\n  result.setMonth(result.getMonth() + months);\n  return result;\n}\n\n/**\n * 添加年份\n * @param date - 基准日期\n * @param years - 要添加的年份数\n * @returns 新的日期对象\n * @example\n * addYears(new Date('2024-03-20'), 1) // 2025-03-20\n */\nexport function addYears(date: Date, years: number): Date {\n  const result = new Date(date);\n  result.setFullYear(result.getFullYear() + years);\n  return result;\n}\n\n/**\n * 获取指定月份的天数\n * @param year - 年份\n * @param month - 月份（0-11）\n * @returns 该月的天数\n * @example\n * getDaysInMonth(2024, 1) // 29 (2024是闰年)\n */\nexport function getDaysInMonth(year: number, month: number): number {\n  return new Date(year, month + 1, 0).getDate();\n}\n\n/**\n * 获取日期是当年的第几周\n * @param date - 要计算的日期\n * @returns 周数\n * @example\n * getWeekNumber(new Date('2024-03-20')) // 12\n */\nexport function getWeekNumber(date: Date): number {\n  const firstDayOfYear = new Date(date.getFullYear(), 0, 1);\n  const pastDaysOfYear = (date.getTime() - firstDayOfYear.getTime()) / 86400000;\n  return Math.ceil((pastDaysOfYear + firstDayOfYear.getDay() + 1) / 7);\n} ","/**\n * 格式化日期\n * @param date - 要格式化的日期\n * @param format - 格式化模式\n * @returns 格式化后的日期字符串\n * @example\n * formatDate(new Date(), 'YYYY-MM-DD HH:mm:ss') // '2024-03-20 14:30:00'\n */\nexport function formatDate(date: Date, format: string = 'YYYY-MM-DD'): string {\n  const year = date.getFullYear();\n  const month = String(date.getMonth() + 1).padStart(2, '0');\n  const day = String(date.getDate()).padStart(2, '0');\n  const hours = String(date.getHours()).padStart(2, '0');\n  const minutes = String(date.getMinutes()).padStart(2, '0');\n  const seconds = String(date.getSeconds()).padStart(2, '0');\n  const milliseconds = String(date.getMilliseconds()).padStart(3, '0');\n\n  return format\n    .replace('YYYY', String(year))\n    .replace('MM', month)\n    .replace('DD', day)\n    .replace('HH', hours)\n    .replace('mm', minutes)\n    .replace('ss', seconds)\n    .replace('SSS', milliseconds);\n}\n\n/**\n * 获取相对时间描述\n * @param date - 要计算的日期\n * @returns 相对时间描述\n * @example\n * timeAgo(new Date(Date.now() - 3600000)) // '1小时前'\n */\nexport function timeAgo(date: Date): string {\n  const now = new Date();\n  const diff = now.getTime() - date.getTime();\n  \n  const seconds = Math.floor(diff / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n  const days = Math.floor(hours / 24);\n  const months = Math.floor(days / 30);\n  const years = Math.floor(days / 365);\n\n  if (years > 0) return `${years}年前`;\n  if (months > 0) return `${months}个月前`;\n  if (days > 0) return `${days}天前`;\n  if (hours > 0) return `${hours}小时前`;\n  if (minutes > 0) return `${minutes}分钟前`;\n  if (seconds > 0) return `${seconds}秒前`;\n  \n  return '刚刚';\n} ","/**\n * 判断日期是否在指定范围内\n * @param date - 要检查的日期\n * @param startDate - 范围开始日期\n * @param endDate - 范围结束日期\n * @returns 是否在范围内\n * @example\n * isDateInRange(new Date('2024-03-20'), new Date('2024-03-19'), new Date('2024-03-21')) // true\n */\nexport function isDateInRange(date: Date, startDate: Date, endDate: Date): boolean {\n  const time = date.getTime();\n  return time >= startDate.getTime() && time <= endDate.getTime();\n}\n\n/**\n * 计算两个日期范围的交集\n * @param range1 - 第一个日期范围\n * @param range2 - 第二个日期范围\n * @returns 交集范围或null\n * @example\n * getDateRangeIntersection(\n *   [new Date('2024-03-19'), new Date('2024-03-21')],\n *   [new Date('2024-03-20'), new Date('2024-03-22')]\n * ) // [2024-03-20, 2024-03-21]\n */\nexport function getDateRangeIntersection(\n  range1: [Date, Date],\n  range2: [Date, Date]\n): [Date, Date] | null {\n  const [start1, end1] = range1;\n  const [start2, end2] = range2;\n\n  const start = new Date(Math.max(start1.getTime(), start2.getTime()));\n  const end = new Date(Math.min(end1.getTime(), end2.getTime()));\n\n  if (start > end) return null;\n  return [start, end];\n} ","/**\n * 计算工作日数量\n * @param startDate - 开始日期\n * @param endDate - 结束日期\n * @returns 工作日数量\n * @example\n * getWorkingDays(new Date('2024-03-20'), new Date('2024-03-25')) // 4\n */\nexport function getWorkingDays(startDate: Date, endDate: Date): number {\n  let count = 0;\n  const curDate = new Date(startDate);\n  \n  while (curDate <= endDate) {\n    const dayOfWeek = curDate.getDay();\n    if (dayOfWeek !== 0 && dayOfWeek !== 6) {\n      count++;\n    }\n    curDate.setDate(curDate.getDate() + 1);\n  }\n  \n  return count;\n}\n\n/**\n * 获取两个日期之间的所有日期\n * @param startDate - 开始日期\n * @param endDate - 结束日期\n * @returns 日期数组\n * @example\n * getDatesBetween(new Date('2024-03-20'), new Date('2024-03-22'))\n * // [2024-03-20, 2024-03-21, 2024-03-22]\n */\nexport function getDatesBetween(startDate: Date, endDate: Date): Date[] {\n  const dates: Date[] = [];\n  const curDate = new Date(startDate);\n  \n  while (curDate <= endDate) {\n    dates.push(new Date(curDate));\n    curDate.setDate(curDate.getDate() + 1);\n  }\n  \n  return dates;\n} ","/**\n * 判断是否为有效的日期对象\n * @param date - 要检查的值\n * @returns 是否为有效的日期对象\n * @example\n * isDate(new Date()) // true\n * isDate('2024-03-20') // false\n */\nexport function isDate(date: any): boolean {\n  return date instanceof Date && !isNaN(date.getTime());\n}\n\n/**\n * 判断日期是否为今天\n * @param date - 要检查的日期\n * @returns 是否为今天\n * @example\n * isToday(new Date()) // true\n * isToday(new Date('2024-03-19')) // false\n */\nexport function isToday(date: Date): boolean {\n  const today = new Date();\n  return date.getDate() === today.getDate() &&\n    date.getMonth() === today.getMonth() &&\n    date.getFullYear() === today.getFullYear();\n}\n\n/**\n * 判断日期是否在指定日期之前\n * @param date - 要检查的日期\n * @param compareDate - 比较的日期\n * @returns 是否在指定日期之前\n * @example\n * isBefore(new Date('2024-03-19'), new Date('2024-03-20')) // true\n */\nexport function isBefore(date: Date, compareDate: Date): boolean {\n  return date.getTime() < compareDate.getTime();\n}\n\n/**\n * 判断日期是否在指定日期之后\n * @param date - 要检查的日期\n * @param compareDate - 比较的日期\n * @returns 是否在指定日期之后\n * @example\n * isAfter(new Date('2024-03-20'), new Date('2024-03-19')) // true\n */\nexport function isAfter(date: Date, compareDate: Date): boolean {\n  return date.getTime() > compareDate.getTime();\n}\n\n/**\n * 判断两个日期是否为同一天\n * @param date1 - 第一个日期\n * @param date2 - 第二个日期\n * @returns 是否为同一天\n * @example\n * isSameDay(new Date('2024-03-20'), new Date('2024-03-20')) // true\n */\nexport function isSameDay(date1: Date, date2: Date): boolean {\n  return date1.getDate() === date2.getDate() &&\n    date1.getMonth() === date2.getMonth() &&\n    date1.getFullYear() === date2.getFullYear();\n} ","/**\n * 元素查找\n */\n\n/**\n * 查找元素\n * @param selector - CSS选择器\n * @returns 找到的元素或null\n */\nexport function querySelector(selector: string): Element | null {\n  return document.querySelector(selector);\n}\n\n/**\n * 判断元素是否包含指定类名\n * @param element - DOM元素\n * @param className - 类名\n * @returns 是否包含类名\n */\nexport function hasClass(element: HTMLElement, className: string): boolean {\n  return element.classList.contains(className);\n}\n\n/**\n * 判断元素是否匹配选择器\n * @param element - DOM元素\n * @param selector - CSS选择器\n * @returns 是否匹配\n */\nexport function matches(element: HTMLElement, selector: string): boolean {\n  return element.matches(selector);\n}\n\n/**\n * 获取最近的匹配选择器的祖先元素\n * @param element - DOM元素\n * @param selector - CSS选择器\n * @returns 匹配的祖先元素或null\n */\nexport function closest(element: HTMLElement, selector: string): HTMLElement | null {\n  return element.closest(selector);\n}\n\n/**\n * 类名操作\n */\n\n/**\n * 添加类名\n * @param element - DOM元素\n * @param className - 类名或类名数组\n */\nexport function addClass(element: HTMLElement, className: string | string[]): void {\n  if (Array.isArray(className)) {\n    element.classList.add(...className);\n  } else {\n    element.classList.add(className);\n  }\n}\n\n/**\n * 移除类名\n * @param element - DOM元素\n * @param className - 类名或类名数组\n */\nexport function removeClass(element: HTMLElement, className: string | string[]): void {\n  if (Array.isArray(className)) {\n    element.classList.remove(...className);\n  } else {\n    element.classList.remove(className);\n  }\n}\n\n/**\n * 切换类名\n * @param element - DOM元素\n * @param className - 类名\n */\nexport function toggleClass(element: HTMLElement, className: string): void {\n  element.classList.toggle(className);\n}\n\n/**\n * 样式操作\n */\n\n/**\n * 设置样式\n * @param element - DOM元素\n * @param property - 样式属性\n * @param value - 样式值\n */\nexport function setStyle(element: HTMLElement, property: string, value: string | number): void {\n  element.style[property as any] = value.toString();\n}\n\n/**\n * 获取样式\n * @param element - DOM元素\n * @param property - 样式属性\n * @returns 样式值\n */\nexport function getStyle(element: HTMLElement, property: string): string | null {\n  return element.style[property as any] || null;\n}\n\n/**\n * 设置多个样式\n * @param element - DOM元素\n * @param styles - 样式对象\n */\nexport function setStyles(element: HTMLElement, styles: Record<string, string | number>): void {\n  Object.entries(styles).forEach(([property, value]) => {\n    setStyle(element, property, value);\n  });\n} ","/**\n * 添加事件监听\n * @param element - DOM元素\n * @param eventType - 事件类型\n * @param handler - 事件处理函数\n */\nexport function on(element: HTMLElement, eventType: string, handler: (event: Event) => void): void {\n  element.addEventListener(eventType, handler);\n}\n\n/**\n * 移除事件监听\n * @param element - DOM元素\n * @param eventType - 事件类型\n * @param handler - 事件处理函数\n */\nexport function off(element: HTMLElement, eventType: string, handler: (event: Event) => void): void {\n  element.removeEventListener(eventType, handler);\n}\n\n/**\n * 添加一次性事件监听\n * @param element - DOM元素\n * @param eventType - 事件类型\n * @param handler - 事件处理函数\n */\nexport function once(element: HTMLElement, eventType: string, handler: (event: Event) => void): void {\n  const onceHandler = (event: Event) => {\n    handler(event);\n    off(element, eventType, onceHandler);\n  };\n  on(element, eventType, onceHandler);\n}\n\n/**\n * 事件委托\n * @param element - 委托元素\n * @param eventType - 事件类型\n * @param selector - 选择器\n * @param handler - 事件处理函数\n */\nexport function delegate(\n  element: HTMLElement,\n  eventType: string,\n  selector: string,\n  handler: (event: Event) => void\n): void {\n  element.addEventListener(eventType, (event: Event) => {\n    const target = event.target as HTMLElement;\n    const matched = target.closest(selector);\n    if (matched) {\n      handler.call(matched, event);\n    }\n  });\n} ","/**\n * 淡入效果\n * @param element - DOM元素\n * @param duration - 动画持续时间（毫秒）\n * @param callback - 动画完成回调\n */\nexport function fadeIn(\n  element: HTMLElement,\n  duration: number = 300,\n  callback?: () => void\n): void {\n  element.style.opacity = '0';\n  element.style.display = 'block';\n  \n  const start = performance.now();\n  const animate = (currentTime: number) => {\n    const elapsed = currentTime - start;\n    const progress = Math.min(elapsed / duration, 1);\n    \n    element.style.opacity = progress.toString();\n    \n    if (progress < 1) {\n      requestAnimationFrame(animate);\n    } else if (callback) {\n      callback();\n    }\n  };\n  \n  requestAnimationFrame(animate);\n}\n\n/**\n * 淡出效果\n * @param element - DOM元素\n * @param duration - 动画持续时间（毫秒）\n * @param callback - 动画完成回调\n */\nexport function fadeOut(\n  element: HTMLElement,\n  duration: number = 300,\n  callback?: () => void\n): void {\n  const start = performance.now();\n  const animate = (currentTime: number) => {\n    const elapsed = currentTime - start;\n    const progress = Math.min(elapsed / duration, 1);\n    \n    element.style.opacity = (1 - progress).toString();\n    \n    if (progress < 1) {\n      requestAnimationFrame(animate);\n    } else {\n      element.style.display = 'none';\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  \n  requestAnimationFrame(animate);\n}\n\n/**\n * 滑动显示\n * @param element - DOM元素\n * @param duration - 动画持续时间（毫秒）\n * @param callback - 动画完成回调\n */\nexport function slideDown(\n  element: HTMLElement,\n  duration: number = 300,\n  callback?: () => void\n): void {\n  const height = element.scrollHeight;\n  element.style.height = '0';\n  element.style.display = 'block';\n  element.style.overflow = 'hidden';\n  \n  const start = performance.now();\n  const animate = (currentTime: number) => {\n    const elapsed = currentTime - start;\n    const progress = Math.min(elapsed / duration, 1);\n    \n    element.style.height = `${height * progress}px`;\n    \n    if (progress < 1) {\n      requestAnimationFrame(animate);\n    } else {\n      element.style.height = 'auto';\n      element.style.overflow = 'visible';\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  \n  requestAnimationFrame(animate);\n}\n\n/**\n * 滑动隐藏\n * @param element - DOM元素\n * @param duration - 动画持续时间（毫秒）\n * @param callback - 动画完成回调\n */\nexport function slideUp(\n  element: HTMLElement,\n  duration: number = 300,\n  callback?: () => void\n): void {\n  const height = element.scrollHeight;\n  element.style.height = `${height}px`;\n  element.style.overflow = 'hidden';\n  \n  const start = performance.now();\n  const animate = (currentTime: number) => {\n    const elapsed = currentTime - start;\n    const progress = Math.min(elapsed / duration, 1);\n    \n    element.style.height = `${height * (1 - progress)}px`;\n    \n    if (progress < 1) {\n      requestAnimationFrame(animate);\n    } else {\n      element.style.display = 'none';\n      element.style.height = 'auto';\n      element.style.overflow = 'visible';\n      if (callback) {\n        callback();\n      }\n    }\n  };\n  \n  requestAnimationFrame(animate);\n}\n\n/**\n * 添加过渡效果\n * @param element - DOM元素\n * @param properties - 需要添加过渡效果的属性\n * @param duration - 过渡持续时间（毫秒）\n * @param timing - 过渡时间函数\n */\nexport function addTransition(\n  element: HTMLElement,\n  properties: string | string[],\n  duration: number = 300,\n  timing: string = 'ease'\n): void {\n  const props = Array.isArray(properties) ? properties : [properties];\n  const transitions = props.map(prop => `${prop} ${duration}ms ${timing}`);\n  element.style.transition = transitions.join(', ');\n}\n\n/**\n * 移除过渡效果\n * @param element - DOM元素\n */\nexport function removeTransition(element: HTMLElement): void {\n  element.style.transition = '';\n} ","/**\n * DOM 操作工具函数\n */\n\n/**\n * 复制文本到剪贴板\n * @param text - 要复制的文本\n * @returns Promise<void>\n */\nexport async function copyToClipboard(text: string): Promise<void> {\n  try {\n    await navigator.clipboard.writeText(text);\n  } catch (err) {\n    // 降级处理\n    const textarea = document.createElement('textarea');\n    textarea.value = text;\n    document.body.appendChild(textarea);\n    textarea.select();\n    document.execCommand('copy');\n    document.body.removeChild(textarea);\n  }\n}\n\n/**\n * 获取元素的计算样式\n * @param element - DOM元素\n * @param property - 样式属性\n * @returns 计算后的样式值\n */\nexport function getComputedStyleValue(\n  element: HTMLElement,\n  property: string\n): string {\n  return window.getComputedStyle(element).getPropertyValue(property);\n}\n\n/**\n * 检查元素是否可见\n * @param element - DOM元素\n * @returns 是否可见\n */\nexport function isVisible(element: HTMLElement): boolean {\n  const style = window.getComputedStyle(element);\n  return style.display !== 'none' && style.visibility !== 'hidden' && style.opacity !== '0';\n}\n\n/**\n * 检查元素是否可聚焦\n * @param element - DOM元素\n * @returns 是否可聚焦\n */\nexport function isFocusable(element: HTMLElement): boolean {\n  const tabIndex = element.getAttribute('tabindex');\n  const isTabIndex = tabIndex !== null && parseInt(tabIndex, 10) >= 0;\n  \n  return (\n    isTabIndex ||\n    element.tagName === 'BUTTON' ||\n    element.tagName === 'INPUT' ||\n    element.tagName === 'SELECT' ||\n    element.tagName === 'TEXTAREA' ||\n    element.tagName === 'A' ||\n    element.tagName === 'AREA'\n  );\n}\n\n/**\n * 获取元素的文本内容\n * @param element - DOM元素\n * @returns 文本内容\n */\nexport function getTextContent(element: HTMLElement): string {\n  return element.textContent || '';\n}\n\n/**\n * 设置元素的文本内容\n * @param element - DOM元素\n * @param text - 文本内容\n */\nexport function setTextContent(element: HTMLElement, text: string): void {\n  element.textContent = text;\n}\n\n/**\n * 获取元素的HTML内容\n * @param element - DOM元素\n * @returns HTML内容\n */\nexport function getInnerHTML(element: HTMLElement): string {\n  return element.innerHTML;\n}\n\n/**\n * 设置元素的HTML内容\n * @param element - DOM元素\n * @param html - HTML内容\n */\nexport function setInnerHTML(element: HTMLElement, html: string): void {\n  element.innerHTML = html;\n} ","/**\n * 创建元素\n * @param tag - 标签名\n * @param attributes - 属性对象\n * @param children - 子元素数组\n * @returns 创建的元素\n */\nexport function createElement<K extends keyof HTMLElementTagNameMap>(\n  tag: K,\n  attributes?: Record<string, string>,\n  children?: (string | HTMLElement)[]\n): HTMLElementTagNameMap[K] {\n  const element = document.createElement(tag);\n  \n  if (attributes) {\n    Object.entries(attributes).forEach(([key, value]) => {\n      element.setAttribute(key, value);\n    });\n  }\n  \n  if (children) {\n    children.forEach(child => {\n      if (typeof child === 'string') {\n        element.appendChild(document.createTextNode(child));\n      } else {\n        element.appendChild(child);\n      }\n    });\n  }\n  \n  return element;\n}\n\n/**\n * 在目标元素前插入新元素\n * @param newElement - 新元素\n * @param targetElement - 目标元素\n */\nexport function insertBefore(newElement: HTMLElement, targetElement: HTMLElement): void {\n  targetElement.parentNode?.insertBefore(newElement, targetElement);\n}\n\n/**\n * 在目标元素后插入新元素\n * @param newElement - 新元素\n * @param targetElement - 目标元素\n */\nexport function insertAfter(newElement: HTMLElement, targetElement: HTMLElement): void {\n  targetElement.parentNode?.insertBefore(newElement, targetElement.nextSibling);\n}\n\n/**\n * 设置多个属性\n * @param element - DOM元素\n * @param attributes - 属性对象\n */\nexport function setAttributes(element: HTMLElement, attributes: Record<string, string>): void {\n  Object.entries(attributes).forEach(([key, value]) => {\n    element.setAttribute(key, value);\n  });\n}\n\n/**\n * 获取数据属性值\n * @param element - DOM元素\n * @param key - 数据属性名\n * @returns 数据属性值\n */\nexport function getData(element: HTMLElement, key: string): string | null {\n  return element.dataset[key] || null;\n}\n\n/**\n * 设置数据属性值\n * @param element - DOM元素\n * @param key - 数据属性名\n * @param value - 数据属性值\n */\nexport function setData(element: HTMLElement, key: string, value: string): void {\n  element.dataset[key] = value;\n} ","/**\n * 序列化表单数据\n * @param form - 表单元素\n * @returns 表单数据对象\n */\nexport function serializeForm(form: HTMLFormElement): Record<string, string> {\n  const formData = new FormData(form);\n  const data: Record<string, string> = {};\n  \n  formData.forEach((value, key) => {\n    data[key] = value.toString();\n  });\n  \n  return data;\n}\n\n/**\n * 重置表单\n * @param form - 表单元素\n */\nexport function resetForm(form: HTMLFormElement): void {\n  form.reset();\n}\n\n/**\n * 禁用表单\n * @param form - 表单元素\n */\nexport function disableForm(form: HTMLFormElement): void {\n  const elements = form.elements;\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i] as HTMLElement;\n    element.setAttribute('disabled', 'disabled');\n  }\n}\n\n/**\n * 启用表单\n * @param form - 表单元素\n */\nexport function enableForm(form: HTMLFormElement): void {\n  const elements = form.elements;\n  for (let i = 0; i < elements.length; i++) {\n    const element = elements[i] as HTMLElement;\n    element.removeAttribute('disabled');\n  }\n}\n\n/**\n * 获取表单字段值\n * @param field - 表单字段元素\n * @returns 字段值\n */\nexport function getFormFieldValue(\n  field: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement\n): string {\n  if (field instanceof HTMLInputElement && field.type === 'checkbox') {\n    return field.checked ? field.value : '';\n  }\n  return field.value;\n}\n\n/**\n * 设置表单字段值\n * @param field - 表单字段元素\n * @param value - 字段值\n */\nexport function setFormFieldValue(\n  field: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement,\n  value: string\n): void {\n  if (field instanceof HTMLInputElement && field.type === 'checkbox') {\n    field.checked = value === field.value;\n  } else {\n    field.value = value;\n  }\n} ","/**\n * 获取元素尺寸\n * @param element - DOM元素\n * @returns 元素尺寸对象\n */\nexport function getElementSize(element: HTMLElement): { width: number; height: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    width: rect.width,\n    height: rect.height\n  };\n}\n\n/**\n * 获取元素位置\n * @param element - DOM元素\n * @returns 元素位置对象\n */\nexport function getElementPosition(element: HTMLElement): { top: number; left: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    top: rect.top + window.scrollY,\n    left: rect.left + window.scrollX\n  };\n}\n\n/**\n * 获取元素视口位置\n * @param element - DOM元素\n * @returns 元素视口位置对象\n */\nexport function getElementViewportPosition(element: HTMLElement): { top: number; left: number } {\n  const rect = element.getBoundingClientRect();\n  return {\n    top: rect.top,\n    left: rect.left\n  };\n}\n\n/**\n * 检查元素是否在视口中\n * @param element - DOM元素\n * @param threshold - 阈值（0-1之间）\n * @returns 是否在视口中\n */\nexport function isElementInViewport(\n  element: HTMLElement,\n  threshold: number = 0\n): boolean {\n  const rect = element.getBoundingClientRect();\n  const windowHeight = window.innerHeight;\n  const windowWidth = window.innerWidth;\n  \n  const visibleHeight = Math.min(rect.bottom, windowHeight) - Math.max(rect.top, 0);\n  const visibleWidth = Math.min(rect.right, windowWidth) - Math.max(rect.left, 0);\n  \n  const elementHeight = rect.height;\n  const elementWidth = rect.width;\n  \n  return (\n    visibleHeight / elementHeight >= threshold &&\n    visibleWidth / elementWidth >= threshold\n  );\n}\n\n/**\n * 获取元素滚动位置\n * @param element - DOM元素\n * @returns 滚动位置对象\n */\nexport function getElementScrollPosition(element: HTMLElement): { top: number; left: number } {\n  return {\n    top: element.scrollTop,\n    left: element.scrollLeft\n  };\n}\n\n/**\n * 设置元素滚动位置\n * @param element - DOM元素\n * @param position - 滚动位置对象\n */\nexport function setElementScrollPosition(\n  element: HTMLElement,\n  position: { top?: number; left?: number }\n): void {\n  if (position.top !== undefined) {\n    element.scrollTop = position.top;\n  }\n  if (position.left !== undefined) {\n    element.scrollLeft = position.left;\n  }\n}\n\n/**\n * 获取元素内容尺寸\n * @param element - DOM元素\n * @returns 内容尺寸对象\n */\nexport function getElementContentSize(element: HTMLElement): { width: number; height: number } {\n  return {\n    width: element.scrollWidth,\n    height: element.scrollHeight\n  };\n}\n\n/**\n * 获取元素内边距尺寸\n * @param element - DOM元素\n * @returns 内边距尺寸对象\n */\nexport function getElementPaddingSize(element: HTMLElement): { width: number; height: number } {\n  const style = window.getComputedStyle(element);\n  return {\n    width: parseFloat(style.paddingLeft) + parseFloat(style.paddingRight),\n    height: parseFloat(style.paddingTop) + parseFloat(style.paddingBottom)\n  };\n}\n\n/**\n * 获取元素边框尺寸\n * @param element - DOM元素\n * @returns 边框尺寸对象\n */\nexport function getElementBorderSize(element: HTMLElement): { width: number; height: number } {\n  const style = window.getComputedStyle(element);\n  return {\n    width: parseFloat(style.borderLeftWidth) + parseFloat(style.borderRightWidth),\n    height: parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth)\n  };\n} ","/**\n * 将Base64编码字符串转换为文件对象\n * \n * @param base64 - Base64编码的字符串，可以是纯Base64或Data URL格式\n * @param filename - 生成的文件名\n * @param options - 转换选项\n * @param options.type - 文件MIME类型，默认根据Data URL或文件扩展名推断\n * @returns 转换后的File对象\n * \n * @example\n * ```ts\n * // 从纯Base64创建文件\n * const pdfBase64 = 'JVBERi0xLjcKJeLjz9MKNSAwIG...'; // PDF文件的Base64编码\n * const pdfFile = base64ToFile(pdfBase64, 'document.pdf');\n * console.log(pdfFile.size, pdfFile.type); // File对象的大小和类型\n * \n * // 从Data URL创建文件\n * const imgDataUrl = 'data:image/png;base64,iVBORw0KGgoAAAA...';\n * const imgFile = base64ToFile(imgDataUrl, 'image.png');\n * \n * // 指定文件类型\n * const textBase64 = btoa('Hello, World!');\n * const textFile = base64ToFile(textBase64, 'hello.txt', { type: 'text/plain' });\n * ```\n */\nexport function base64ToFile(\n  base64: string,\n  filename: string,\n  options: {\n    type?: string;\n  } = {}\n): File {\n  let type = options.type;\n  let binaryString: string;\n  \n  // 检查是否是Data URL格式\n  if (base64.startsWith('data:')) {\n    // 从Data URL中提取MIME类型和Base64数据\n    const matches = base64.match(/^data:([^;]+);base64,(.+)$/);\n    if (matches && matches.length === 3) {\n      // 如果未指定类型，使用Data URL中的类型\n      if (!type) {\n        type = matches[1];\n      }\n      // 获取实际的Base64数据\n      base64 = matches[2];\n    }\n  }\n  \n  // 如果仍未确定类型，尝试从文件名推断\n  if (!type) {\n    const extension = filename.split('.').pop()?.toLowerCase();\n    switch (extension) {\n      case 'txt':\n        type = 'text/plain';\n        break;\n      case 'html':\n      case 'htm':\n        type = 'text/html';\n        break;\n      case 'json':\n        type = 'application/json';\n        break;\n      case 'csv':\n        type = 'text/csv';\n        break;\n      case 'js':\n        type = 'application/javascript';\n        break;\n      case 'css':\n        type = 'text/css';\n        break;\n      case 'png':\n        type = 'image/png';\n        break;\n      case 'jpg':\n      case 'jpeg':\n        type = 'image/jpeg';\n        break;\n      case 'gif':\n        type = 'image/gif';\n        break;\n      case 'pdf':\n        type = 'application/pdf';\n        break;\n      case 'xml':\n        type = 'application/xml';\n        break;\n      default:\n        type = 'application/octet-stream'; // 默认二进制类型\n    }\n  }\n  \n  // 将Base64解码为二进制字符串\n  try {\n    binaryString = atob(base64);\n  } catch (e) {\n    throw new Error('无效的Base64编码');\n  }\n  \n  // 将二进制字符串转换为Uint8Array\n  const bytes = new Uint8Array(binaryString.length);\n  for (let i = 0; i < binaryString.length; i++) {\n    bytes[i] = binaryString.charCodeAt(i);\n  }\n  \n  // 创建Blob对象\n  const blob = new Blob([bytes], { type });\n  \n  // 创建File对象\n  return new File([blob], filename, { type, lastModified: new Date().getTime() });\n} ","/**\n * 将文件对象转换为Base64编码的字符串\n * \n * @param file - 要转换的文件对象\n * @param options - 转换选项\n * @param options.includePrefix - 是否包含Data URL前缀(如\"data:image/jpeg;base64,\")，默认为false\n * @returns 返回Promise，resolve为转换后的Base64字符串\n * \n * @example\n * ```ts\n * // 基本用法\n * const fileInput = document.getElementById('fileInput') as HTMLInputElement;\n * fileInput.addEventListener('change', async () => {\n *   const file = fileInput.files?.[0];\n *   if (file) {\n *     try {\n *       const base64 = await fileToBase64(file);\n *       console.log('Base64:', base64);\n *     } catch (error) {\n *       console.error('转换失败:', error);\n *     }\n *   }\n * });\n * \n * // 包含Data URL前缀\n * const imageFile = fileInput.files?.[0];\n * if (imageFile) {\n *   const dataUrl = await fileToBase64(imageFile, { includePrefix: true });\n *   const img = document.createElement('img');\n *   img.src = dataUrl;\n *   document.body.appendChild(img);\n * }\n * ```\n */\nexport function fileToBase64(\n  file: File,\n  options: {\n    includePrefix?: boolean;\n  } = {}\n): Promise<string> {\n  const { includePrefix = false } = options;\n  \n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    \n    reader.onload = () => {\n      // reader.result为Data URL格式：data:[<mediatype>][;base64],<data>\n      const dataUrl = reader.result as string;\n      \n      if (includePrefix) {\n        // 如果需要包含前缀，直接返回完整的Data URL\n        resolve(dataUrl);\n      } else {\n        // 如果不需要前缀，移除Data URL前缀部分\n        const base64 = dataUrl.split(',')[1];\n        resolve(base64);\n      }\n    };\n    \n    reader.onerror = () => {\n      reject(new Error(`文件转Base64失败: ${reader.error?.message || '未知错误'}`));\n    };\n    \n    // 读取文件为Data URL\n    reader.readAsDataURL(file);\n  });\n} ","/**\n * 获取文件的扩展名\n * \n * @param filename - 文件名或文件路径\n * @param options - 选项\n * @param options.toLowerCase - 是否将扩展名转为小写，默认为true\n * @param options.includeDot - 是否包含点号，默认为false\n * @returns 文件的扩展名，如果没有扩展名则返回空字符串\n * \n * @example\n * ```ts\n * // 基本用法\n * getFileExtension('document.pdf'); // 'pdf'\n * getFileExtension('image.JPG'); // 'jpg' (默认转为小写)\n * \n * // 包含点号\n * getFileExtension('script.js', { includeDot: true }); // '.js'\n * \n * // 保留原始大小写\n * getFileExtension('LICENSE.TXT', { toLowerCase: false }); // 'TXT'\n * \n * // 处理路径\n * getFileExtension('/path/to/file.tar.gz'); // 'gz'\n * \n * // 处理URL\n * getFileExtension('https://example.com/downloads/report.xlsx'); // 'xlsx'\n * \n * // 处理没有扩展名的文件\n * getFileExtension('README'); // ''\n * ```\n */\nexport function getFileExtension(\n  filename: string,\n  options: {\n    toLowerCase?: boolean;\n    includeDot?: boolean;\n  } = {}\n): string {\n  // 设置默认选项\n  const { toLowerCase = true, includeDot = false } = options;\n  \n  // 提取文件名部分（去除路径和查询参数）\n  let basename = filename;\n  \n  // 处理URL或路径\n  // 先去除查询参数和哈希\n  basename = basename.split(/[?#]/)[0];\n  \n  // 提取文件名（去除路径）\n  const lastSlashIndex = basename.lastIndexOf('/');\n  if (lastSlashIndex !== -1) {\n    basename = basename.slice(lastSlashIndex + 1);\n  }\n  \n  // 获取最后一个点号的位置\n  const lastDotIndex = basename.lastIndexOf('.');\n  \n  // 如果没有点号或点号在开头（如.gitignore），则返回空字符串\n  if (lastDotIndex === -1 || lastDotIndex === 0) {\n    return '';\n  }\n  \n  // 提取扩展名\n  let extension = basename.slice(lastDotIndex + (includeDot ? 0 : 1));\n  \n  // 转换为小写（如果需要）\n  if (toLowerCase) {\n    extension = extension.toLowerCase();\n  }\n  \n  return extension;\n} ","/**\n * 获取文件大小，并可选择格式化为人类可读的形式\n * \n * @param file - 文件对象\n * @param options - 选项\n * @param options.formatted - 是否格式化为人类可读的形式，默认为true\n * @param options.precision - 保留的小数位数，默认为2\n * @param options.locale - 使用的语言环境，默认为undefined（使用浏览器默认语言）\n * @returns 如果formatted为true，返回格式化后的字符串（如\"1.25 MB\"）；否则返回字节数\n * \n * @example\n * ```ts\n * // 基本用法\n * const fileInput = document.getElementById('fileInput') as HTMLInputElement;\n * fileInput.addEventListener('change', () => {\n *   const file = fileInput.files?.[0];\n *   if (file) {\n *     const size = getFileSize(file);\n *     console.log(`文件大小: ${size}`); // 如 \"文件大小: 1.25 MB\"\n *   }\n * });\n * \n * // 获取原始字节数\n * const rawSize = getFileSize(file, { formatted: false });\n * console.log(`文件大小: ${rawSize} 字节`);\n * \n * // 自定义格式化\n * const customSize = getFileSize(file, { precision: 1 });\n * console.log(`文件大小: ${customSize}`); // 如 \"文件大小: 1.3 MB\"\n * \n * // 特定语言环境\n * const frSize = getFileSize(file, { locale: 'fr-FR' });\n * console.log(`Taille du fichier: ${frSize}`); // 使用法语数字格式\n * ```\n */\nexport function getFileSize(\n  file: File,\n  options: {\n    formatted?: boolean;\n    precision?: number;\n    locale?: string | string[];\n  } = {}\n): string | number {\n  // 获取文件大小（字节）\n  const bytes = file.size;\n  \n  // 设置默认选项\n  const { \n    formatted = true, \n    precision = 2,\n    locale = undefined\n  } = options;\n  \n  // 如果不需要格式化，直接返回字节数\n  if (!formatted) {\n    return bytes;\n  }\n  \n  // 定义单位和对应的字节数\n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  \n  // 如果文件大小为0，直接返回\n  if (bytes === 0) {\n    return '0 B';\n  }\n  \n  // 计算单位的索引\n  // Math.floor(Math.log(bytes) / Math.log(1024)) 决定使用哪个单位\n  const unitIndex = Math.floor(Math.log(bytes) / Math.log(1024));\n  \n  // 确保索引不超出单位数组范围\n  const safeUnitIndex = Math.min(unitIndex, units.length - 1);\n  \n  // 计算格式化后的数值\n  // 1024^unitIndex 将字节转换为对应单位的值\n  const size = bytes / Math.pow(1024, safeUnitIndex);\n  \n  // 格式化数字，添加千分位分隔符\n  const formattedSize = size.toLocaleString(locale, {\n    minimumFractionDigits: precision,\n    maximumFractionDigits: precision\n  });\n  \n  // 返回格式化后的字符串：数值 + 空格 + 单位\n  return `${formattedSize} ${units[safeUnitIndex]}`;\n} ","/**\n * 检查文件类型是否符合指定的允许类型\n * \n * @param file - 要检查的文件对象或文件名\n * @param allowedTypes - 允许的MIME类型或文件扩展名数组\n * @returns 如果文件类型符合允许列表则返回true，否则返回false\n * \n * @example\n * ```ts\n * // 检查文件对象\n * const fileInput = document.getElementById('fileInput') as HTMLInputElement;\n * fileInput.addEventListener('change', () => {\n *   const file = fileInput.files?.[0];\n *   if (file) {\n *     // 检查是否为图片\n *     const isImage = isValidFileType(file, ['image/jpeg', 'image/png', 'image/gif']);\n *     console.log('是否为允许的图片格式:', isImage);\n *   }\n * });\n * \n * // 根据文件名检查\n * const isValidDocument = isValidFileType('report.pdf', ['.pdf', '.doc', '.docx']);\n * console.log('是否为有效文档:', isValidDocument); // true\n * \n * // 混合类型和扩展名检查\n * const isValid = isValidFileType('data.xlsx', ['application/pdf', '.xlsx', '.csv']);\n * console.log('是否为有效文件类型:', isValid); // true\n * ```\n */\nexport function isValidFileType(\n  file: File | string,\n  allowedTypes: string[]\n): boolean {\n  // 如果文件是字符串（文件名），处理方式不同\n  if (typeof file === 'string') {\n    const filename = file.toLowerCase();\n    \n    // 检查文件名是否匹配允许的扩展名\n    return allowedTypes.some(type => {\n      // 如果类型以点号开头，则将其视为文件扩展名（如 .pdf）\n      if (type.startsWith('.')) {\n        return filename.endsWith(type.toLowerCase());\n      }\n      \n      // 如果类型包含斜杠，则将其视为MIME类型\n      if (type.includes('/')) {\n        // 尝试根据文件扩展名推断MIME类型\n        const extension = filename.split('.').pop() || '';\n        const mimeType = getMimeTypeFromExtension(extension);\n        return mimeType === type.toLowerCase();\n      }\n      \n      // 否则，将其视为不带点号的扩展名\n      return filename.endsWith(`.${type.toLowerCase()}`);\n    });\n  }\n  \n  // 处理File对象\n  return allowedTypes.some(type => {\n    // 如果类型以点号开头，则将其视为文件扩展名（如 .pdf）\n    if (type.startsWith('.')) {\n      return file.name.toLowerCase().endsWith(type.toLowerCase());\n    }\n    \n    // 如果类型包含斜杠，则将其视为MIME类型（如 image/jpeg）\n    if (type.includes('/')) {\n      return file.type.toLowerCase() === type.toLowerCase();\n    }\n    \n    // 否则，将其视为不带点号的扩展名\n    return file.name.toLowerCase().endsWith(`.${type.toLowerCase()}`);\n  });\n}\n\n/**\n * 根据文件扩展名获取MIME类型\n * \n * @param extension - 文件扩展名（不含点号）\n * @returns 对应的MIME类型，如果未知则返回''\n */\nfunction getMimeTypeFromExtension(extension: string): string {\n  const mimeTypes: Record<string, string> = {\n    // 文本文件\n    'txt': 'text/plain',\n    'html': 'text/html',\n    'htm': 'text/html',\n    'css': 'text/css',\n    'csv': 'text/csv',\n    \n    // 应用程序文件\n    'pdf': 'application/pdf',\n    'json': 'application/json',\n    'js': 'application/javascript',\n    'xml': 'application/xml',\n    'zip': 'application/zip',\n    'doc': 'application/msword',\n    'docx': 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',\n    'xls': 'application/vnd.ms-excel',\n    'xlsx': 'application/vnd.openxmlformats-officedocument.spreadsheetml.sheet',\n    'ppt': 'application/vnd.ms-powerpoint',\n    'pptx': 'application/vnd.openxmlformats-officedocument.presentationml.presentation',\n    \n    // 图像文件\n    'png': 'image/png',\n    'jpg': 'image/jpeg',\n    'jpeg': 'image/jpeg',\n    'gif': 'image/gif',\n    'svg': 'image/svg+xml',\n    'webp': 'image/webp',\n    'bmp': 'image/bmp',\n    'ico': 'image/x-icon',\n    \n    // 音频文件\n    'mp3': 'audio/mpeg',\n    'wav': 'audio/wav',\n    'ogg': 'audio/ogg',\n    'flac': 'audio/flac',\n    'm4a': 'audio/m4a',\n    \n    // 视频文件\n    'mp4': 'video/mp4',\n    'webm': 'video/webm',\n    'avi': 'video/x-msvideo',\n    'mov': 'video/quicktime',\n    'wmv': 'video/x-ms-wmv',\n    'flv': 'video/x-flv',\n    \n    // 字体文件\n    'ttf': 'font/ttf',\n    'otf': 'font/otf',\n    'woff': 'font/woff',\n    'woff2': 'font/woff2'\n  };\n  \n  return mimeTypes[extension.toLowerCase()] || '';\n} ","/**\n * 以异步方式读取文件内容\n * \n * @param file - 要读取的File对象\n * @param readAs - 读取方式，可以是'text'、'dataURL'、'arrayBuffer'或'binaryString'，默认为'text'\n * @returns 返回Promise，resolve为读取到的内容，reject为错误信息\n * \n * @example\n * ```ts\n * // 从input元素获取文件并读取文本内容\n * const fileInput = document.getElementById('fileInput') as HTMLInputElement;\n * fileInput.addEventListener('change', async (event) => {\n *   const file = fileInput.files?.[0];\n *   if (file) {\n *     try {\n *       const content = await readFile(file, 'text');\n *       console.log('文件内容:', content);\n *     } catch (error) {\n *       console.error('读取文件出错:', error);\n *     }\n *   }\n * });\n * \n * // 读取为Data URL (Base64)\n * const imageFile = fileInput.files?.[0];\n * if (imageFile) {\n *   const dataUrl = await readFile(imageFile, 'dataURL');\n *   const img = document.createElement('img');\n *   img.src = dataUrl as string;\n *   document.body.appendChild(img);\n * }\n * \n * // 读取为ArrayBuffer\n * const binFile = fileInput.files?.[0];\n * if (binFile) {\n *   const buffer = await readFile(binFile, 'arrayBuffer');\n *   // 处理二进制数据...\n * }\n * ```\n */\nexport function readFile(\n  file: File,\n  readAs: 'text' | 'dataURL' | 'arrayBuffer' | 'binaryString' = 'text'\n): Promise<string | ArrayBuffer> {\n  return new Promise((resolve, reject) => {\n    // 创建文件读取器\n    const reader = new FileReader();\n    \n    // 设置读取完成回调\n    reader.onload = () => {\n      // 读取结果在reader.result中\n      resolve(reader.result as string | ArrayBuffer);\n    };\n    \n    // 设置错误处理\n    reader.onerror = () => {\n      reject(new Error(`读取文件失败: ${reader.error?.message || '未知错误'}`));\n    };\n    \n    // 根据readAs参数选择相应的读取方法\n    switch (readAs) {\n      case 'text':\n        reader.readAsText(file);\n        break;\n      case 'dataURL':\n        reader.readAsDataURL(file);\n        break;\n      case 'arrayBuffer':\n        reader.readAsArrayBuffer(file);\n        break;\n      case 'binaryString':\n        reader.readAsBinaryString(file);\n        break;\n      default:\n        // 如果readAs参数无效，拒绝Promise\n        reject(new Error(`无效的读取方式: ${readAs}`));\n    }\n  });\n} ","/**\n * 将内容保存为文件并下载到本地\n * \n * @param content - 要保存的内容，可以是字符串、Blob、ArrayBuffer等\n * @param filename - 保存的文件名\n * @param options - 保存选项\n * @param options.type - 文件MIME类型，默认根据扩展名推断\n * @param options.encoding - 当content为字符串时的编码，默认为'utf-8'\n * @returns 无返回值\n * \n * @example\n * ```ts\n * // 保存文本内容为文件\n * saveFile('Hello, World!', 'hello.txt');\n * \n * // 保存JSON数据\n * const data = { name: 'John', age: 30 };\n * saveFile(JSON.stringify(data, null, 2), 'data.json');\n * \n * // 保存CSV数据\n * const csvContent = 'Name,Age\\nJohn,30\\nJane,25';\n * saveFile(csvContent, 'users.csv', { type: 'text/csv' });\n * \n * // 保存ArrayBuffer为二进制文件\n * const buffer = new ArrayBuffer(8);\n * const view = new Uint8Array(buffer);\n * view.set([0x48, 0x65, 0x6c, 0x6c, 0x6f, 0x21, 0x0d, 0x0a]); // \"Hello!\\r\\n\"\n * saveFile(buffer, 'binary.bin', { type: 'application/octet-stream' });\n * ```\n */\nexport function saveFile(\n  content: string | Blob | ArrayBuffer | ArrayBufferView,\n  filename: string,\n  options: {\n    type?: string;\n    encoding?: string;\n  } = {}\n): void {\n  let blob: Blob;\n  \n  // 获取文件MIME类型\n  let type = options.type;\n  if (!type) {\n    // 如果未提供type，尝试根据文件扩展名推断\n    const extension = filename.split('.').pop()?.toLowerCase();\n    switch (extension) {\n      case 'txt':\n        type = 'text/plain';\n        break;\n      case 'html':\n      case 'htm':\n        type = 'text/html';\n        break;\n      case 'json':\n        type = 'application/json';\n        break;\n      case 'csv':\n        type = 'text/csv';\n        break;\n      case 'js':\n        type = 'application/javascript';\n        break;\n      case 'css':\n        type = 'text/css';\n        break;\n      case 'png':\n        type = 'image/png';\n        break;\n      case 'jpg':\n      case 'jpeg':\n        type = 'image/jpeg';\n        break;\n      case 'gif':\n        type = 'image/gif';\n        break;\n      case 'pdf':\n        type = 'application/pdf';\n        break;\n      case 'xml':\n        type = 'application/xml';\n        break;\n      default:\n        type = 'application/octet-stream'; // 默认二进制类型\n    }\n  }\n  \n  // 根据content类型创建Blob\n  if (content instanceof Blob) {\n    // 如果content已经是Blob，但类型不匹配，则创建新的Blob\n    if (content.type !== type) {\n      blob = new Blob([content], { type });\n    } else {\n      blob = content;\n    }\n  } else if (typeof content === 'string') {\n    // 字符串内容\n    blob = new Blob([content], { type, endings: 'native' });\n  } else if (content instanceof ArrayBuffer || ArrayBuffer.isView(content)) {\n    // ArrayBuffer或TypedArray\n    blob = new Blob([content], { type });\n  } else {\n    throw new Error('不支持的内容类型');\n  }\n  \n  // 创建下载链接并触发下载\n  const blobUrl = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = blobUrl;\n  link.download = filename;\n  link.style.display = 'none';\n  document.body.appendChild(link);\n  link.click();\n  \n  // 清理\n  setTimeout(() => {\n    document.body.removeChild(link);\n    URL.revokeObjectURL(blobUrl);\n  }, 100);\n} ","/**\n * 创建一个防抖函数，该函数延迟调用原函数，直到上一次被调用后经过指定的时间\n * 常用于处理连续触发的事件，如输入框输入、窗口调整大小等\n * @param func - 要防抖的函数\n * @param wait - 延迟时间（毫秒）\n * @param immediate - 是否在延迟开始前调用函数，默认为false\n * @returns 防抖处理后的函数\n * @example\n * ```ts\n * // 基本用法，延迟300ms执行\n * const debouncedFn = debounce(() => {\n *   console.log('处理搜索请求');\n * }, 300);\n * \n * // 在输入事件中使用\n * inputElement.addEventListener('input', debouncedFn);\n * \n * // 立即执行，然后等待300ms才能再次执行\n * const immediateFunc = debounce(() => {\n *   console.log('立即执行');\n * }, 300, true);\n * ```\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number = 300,\n  immediate: boolean = false\n): T & { cancel: () => void } {\n  let timeoutId: ReturnType<typeof setTimeout> | undefined;\n  \n  function debounced(this: ThisParameterType<T>, ...args: Parameters<T>): void {\n    const context = this;\n    const later = function() {\n      timeoutId = undefined;\n      if (!immediate) {\n        func.apply(context, args);\n      }\n    };\n    \n    const callNow = immediate && !timeoutId;\n    \n    if (timeoutId) {\n      clearTimeout(timeoutId);\n    }\n    \n    timeoutId = setTimeout(later, wait);\n    \n    if (callNow) {\n      func.apply(context, args);\n    }\n  }\n\n  debounced.cancel = () => {\n    if (timeoutId) {\n      clearTimeout(timeoutId);\n      timeoutId = undefined;\n    }\n  };\n\n  return debounced as T & { cancel: () => void };\n}\n\n/**\n * 取消防抖函数的执行\n * @param debouncedFn - 通过debounce创建的防抖函数\n * @example\n * ```ts\n * const debouncedFn = debounce(() => console.log('Debounced'), 300);\n * \n * // 取消定时器，阻止函数执行\n * cancelDebounce(debouncedFn);\n * ```\n */\nexport function cancelDebounce(debouncedFn: Function): void {\n  // @ts-ignore - 访问防抖函数内部的timeout属性\n  const timeout = debouncedFn.timeout;\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n} ","/**\n * 创建一个节流函数，限制函数在指定的时间内只能被调用一次\n * 常用于处理频繁触发的事件，如滚动事件、鼠标移动等\n * @param func - 要节流的函数\n * @param wait - 等待时间（毫秒）\n * @param options - 配置选项\n * @param options.leading - 是否在开始时立即执行一次，默认为true\n * @param options.trailing - 是否在结束时再执行一次，默认为true\n * @returns 节流处理后的函数\n * @example\n * ```ts\n * // 基本用法，每200ms最多执行一次\n * const throttledScroll = throttle(() => {\n *   console.log('处理滚动事件');\n * }, 200);\n * \n * // 在滚动事件中使用\n * window.addEventListener('scroll', throttledScroll);\n * \n * // 自定义选项：开始时不执行，结束时执行一次\n * const customThrottle = throttle(() => {\n *   console.log('自定义节流');\n * }, 300, { leading: false, trailing: true });\n * ```\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  func: T,\n  wait: number = 300,\n  options: { leading?: boolean; trailing?: boolean } = {}\n): (this: ThisParameterType<T>, ...args: Parameters<T>) => ReturnType<T> | undefined {\n  let context: any;\n  let args: Parameters<T> | null = null;\n  let result: ReturnType<T> | undefined;\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  let previous = 0;\n  \n  // 设置默认选项\n  const { leading = true, trailing = true } = options;\n  \n  const later = function() {\n    previous = leading === false ? 0 : Date.now();\n    timeout = null;\n    result = func.apply(context, args as Parameters<T>);\n    if (!timeout) {\n      context = args = null;\n    }\n  };\n  \n  return function(this: ThisParameterType<T>, ...funcArgs: Parameters<T>): ReturnType<T> | undefined {\n    const now = Date.now();\n    if (!previous && leading === false) {\n      previous = now;\n    }\n    \n    const remaining = wait - (now - previous);\n    context = this;\n    args = funcArgs;\n    \n    if (remaining <= 0 || remaining > wait) {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      previous = now;\n      result = func.apply(context, args);\n      if (!timeout) {\n        context = args = null;\n      }\n    } else if (!timeout && trailing !== false) {\n      timeout = setTimeout(later, remaining);\n    }\n    \n    return result;\n  };\n}\n\n/**\n * 取消节流函数的执行\n * @param throttledFn - 通过throttle创建的节流函数\n * @example\n * ```ts\n * const throttledFn = throttle(() => console.log('Throttled'), 300);\n * \n * // 取消定时器，阻止尾部函数执行\n * cancelThrottle(throttledFn);\n * ```\n */\nexport function cancelThrottle(throttledFn: Function): void {\n  // @ts-ignore - 访问节流函数内部的timeout属性\n  const timeout = throttledFn.timeout;\n  if (timeout) {\n    clearTimeout(timeout);\n  }\n} ","/**\n * 函数组合，从右到左组合多个函数\n * 组合函数方向为：compose(f, g, h)(x) 等同于 f(g(h(x)))\n * \n * @param funcs - 要组合的函数列表，从右到左执行\n * @returns 组合后的函数\n * @example\n * ```ts\n * // 基本用法\n * const add10 = (x: number) => x + 10;\n * const multiply2 = (x: number) => x * 2;\n * const toString = (x: number) => `结果是: ${x}`;\n * \n * // 组合函数：toString(multiply2(add10(5)))\n * const calculate = compose(toString, multiply2, add10);\n * \n * calculate(5); // 返回 \"结果是: 30\"\n * \n * // 数据流向：5 -> add10 -> 15 -> multiply2 -> 30 -> toString -> \"结果是: 30\"\n * ```\n */\nexport function compose<R>(\n  ...funcs: Array<(arg: any) => any>\n): (arg: any) => R {\n  if (funcs.length === 0) {\n    return (arg: any) => arg as unknown as R;\n  }\n  \n  if (funcs.length === 1) {\n    return funcs[0] as (arg: any) => R;\n  }\n  \n  return function(arg: any): R {\n    return funcs.reduceRight((composed, func) => func(composed), arg) as R;\n  };\n} ","/**\n * 函数柯里化，将接受多个参数的函数转换为接受单个参数的函数序列\n * \n * @param func - 要柯里化的函数\n * @param arity - 可选的参数数量，默认为函数的参数长度\n * @returns 柯里化后的函数\n * @example\n * ```ts\n * // 基本用法\n * const add = (a: number, b: number, c: number) => a + b + c;\n * const curriedAdd = curry(add);\n * \n * curriedAdd(1)(2)(3); // 返回 6\n * curriedAdd(1, 2)(3); // 也返回 6\n * curriedAdd(1)(2, 3); // 也返回 6\n * curriedAdd(1, 2, 3); // 也返回 6\n * \n * // 指定参数数量\n * const multiply = (...args: number[]) => args.reduce((a, b) => a * b, 1);\n * const curriedMultiply = curry(multiply, 3);\n * \n * curriedMultiply(2)(3)(4); // 返回 24\n * ```\n */\nexport function curry<T extends (...args: any[]) => any>(\n  func: T, \n  arity: number = func.length\n): (...args: any[]) => any {\n  return function curried(...args: any[]): any {\n    // 如果提供的参数足够，则直接调用原函数\n    if (args.length >= arity) {\n      return func(...args);\n    }\n    \n    // 否则返回一个新函数等待更多参数\n    return function(...moreArgs: any[]): any {\n      return curried(...args, ...moreArgs);\n    };\n  };\n} ","/**\n * 创建一个会缓存结果的函数\n * 对于相同的参数，函数只会计算一次，后续调用直接从缓存返回结果\n * \n * @param func - 要缓存结果的函数\n * @param resolver - 可选的函数，用于计算缓存的键。默认使用第一个参数作为键\n * @returns 缓存化后的函数\n * @example\n * ```ts\n * // 基本用法 - 缓存耗时计算\n * const fibonacci = memoize((n: number): number => {\n *   if (n <= 1) return n;\n *   return fibonacci(n - 1) + fibonacci(n - 2);\n * });\n * \n * console.time('first');\n * fibonacci(40); // 首次计算耗时较长\n * console.timeEnd('first');\n * \n * console.time('second');\n * fibonacci(40); // 从缓存返回结果，几乎立即完成\n * console.timeEnd('second');\n * \n * // 使用自定义键生成函数\n * const calculateArea = memoize(\n *   (width: number, height: number) => width * height,\n *   (width, height) => `${width}x${height}` // 自定义键\n * );\n * ```\n */\nexport function memoize<T extends (...args: any[]) => any>(\n  func: T,\n  resolver?: (...args: Parameters<T>) => string | number\n): (...args: Parameters<T>) => ReturnType<T> {\n  const cache = new Map<string | number, ReturnType<T>>();\n  \n  return function(this: ThisParameterType<T>, ...args: Parameters<T>): ReturnType<T> {\n    // 计算缓存键\n    const key = resolver \n      ? resolver.apply(this, args) \n      : args[0] as string | number;\n    \n    // 检查缓存\n    if (cache.has(key)) {\n      return cache.get(key)!;\n    }\n    \n    // 计算并缓存结果\n    const result = func.apply(this, args);\n    cache.set(key, result);\n    return result;\n  };\n} ","/**\n * 创建一个只执行一次的函数\n * 确保函数无论被调用多少次，只会执行一次，并返回第一次执行的结果\n * \n * @param func - 要执行一次的函数\n * @returns 包装后的函数，只会执行一次\n * @example\n * ```ts\n * // 基本用法\n * const initialize = once(() => {\n *   console.log('初始化操作，只会执行一次');\n *   return { initialized: true };\n * });\n * \n * const result1 = initialize(); // 输出: '初始化操作，只会执行一次'\n * const result2 = initialize(); // 不会再次输出\n * \n * console.log(result1 === result2); // true, 返回相同的结果\n * ```\n */\nexport function once<T extends (...args: any[]) => any>(func: T): (...args: Parameters<T>) => ReturnType<T> {\n  let called = false;\n  let result: ReturnType<T>;\n  \n  return function(this: ThisParameterType<T>, ...args: Parameters<T>): ReturnType<T> {\n    if (!called) {\n      called = true;\n      result = func.apply(this, args);\n    }\n    return result;\n  };\n} ","/**\n * 函数管道，从左到右组合多个函数\n * 管道函数方向为：pipe(f, g, h)(x) 等同于 h(g(f(x)))\n * 与compose相反，pipe是从左到右执行函数\n * \n * @param funcs - 要组合的函数列表，从左到右执行\n * @returns 组合后的函数\n * @example\n * ```ts\n * // 基本用法\n * const add10 = (x: number) => x + 10;\n * const multiply2 = (x: number) => x * 2;\n * const toString = (x: number) => `结果是: ${x}`;\n * \n * // 组合函数：toString(multiply2(add10(5)))\n * const calculate = pipe(add10, multiply2, toString);\n * \n * calculate(5); // 返回 \"结果是: 30\"\n * \n * // 数据流向：5 -> add10 -> 15 -> multiply2 -> 30 -> toString -> \"结果是: 30\"\n * ```\n */\nexport function pipe<R>(\n  ...funcs: Array<(arg: any) => any>\n): (arg: any) => R {\n  if (funcs.length === 0) {\n    return (arg: any) => arg as unknown as R;\n  }\n  \n  if (funcs.length === 1) {\n    return funcs[0] as (arg: any) => R;\n  }\n  \n  return function(arg: any): R {\n    return funcs.reduce((composed, func) => func(composed), arg) as R;\n  };\n} ","/**\n * 延迟指定时间\n * 提供一个Promise，在指定的毫秒数后解析\n * \n * @param ms - 延迟的毫秒数\n * @returns 返回一个Promise，在指定时间后解析\n * @example\n * ```ts\n * // 基本用法\n * async function demo() {\n *   console.log('开始');\n *   await sleep(2000); // 暂停2秒\n *   console.log('2秒后继续执行');\n * }\n * \n * // 在循环中使用\n * async function processItems(items: any[]) {\n *   for (const item of items) {\n *     processItem(item);\n *     await sleep(300); // 每次处理后暂停300毫秒\n *   }\n * }\n * ```\n */\nexport function sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n} ","/**\n * URL 操作相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 解析 URL 参数为对象\n * \n * @param url - 要解析的 URL，默认为当前页面的 URL\n * @returns 包含 URL 参数的对象\n * @example\n * ```ts\n * // 假设 URL 是 https://example.com?name=张三&age=25\n * const params = parseURLParams();\n * console.log(params.name); // '张三'\n * console.log(params.age);  // '25'\n * \n * // 解析指定 URL\n * const params2 = parseURLParams('https://example.com?id=123&type=product');\n * console.log(params2.id);   // '123'\n * console.log(params2.type); // 'product'\n * ```\n */\nexport function parseURLParams(url?: string): Record<string, string> {\n  const urlToParse = url ? url : window.location.href;\n  const params: Record<string, string> = {};\n  \n  // 查找 URL 中的查询字符串部分\n  const queryIndex = urlToParse.indexOf('?');\n  if (queryIndex === -1) {\n    return params;\n  }\n  \n  // 提取查询字符串并处理 hash 部分\n  let queryString = urlToParse.slice(queryIndex + 1);\n  const hashIndex = queryString.indexOf('#');\n  if (hashIndex !== -1) {\n    queryString = queryString.slice(0, hashIndex);\n  }\n  \n  // 分割并解析每个参数\n  const pairs = queryString.split('&');\n  for (const pair of pairs) {\n    if (!pair) continue;\n    \n    const [key, value] = pair.split('=');\n    if (key) {\n      params[decodeURIComponent(key)] = value ? decodeURIComponent(value) : '';\n    }\n  }\n  \n  return params;\n}\n\n/**\n * 构建 URL，将参数对象添加到基础 URL\n * \n * @param baseUrl - 基础 URL\n * @param params - 参数对象\n * @returns 组合后的 URL\n * @example\n * ```ts\n * // 基本用法\n * const url = buildURL('https://example.com', { \n *   name: '张三', \n *   age: '25' \n * });\n * console.log(url); // 'https://example.com?name=%E5%BC%A0%E4%B8%89&age=25'\n * \n * // 带有已有参数的 URL\n * const url2 = buildURL('https://example.com?sort=desc', { \n *   page: '1',\n *   limit: '10'\n * });\n * console.log(url2); // 'https://example.com?sort=desc&page=1&limit=10'\n * \n * // 相对路径 URL\n * const url3 = buildURL('/api/users', { id: '123' });\n * console.log(url3); // '/api/users?id=123'\n * ```\n */\nexport function buildURL(baseUrl: string, params: Record<string, string>): string {\n  try {\n    // 尝试创建 URL 对象\n    const url = new URL(baseUrl);\n    \n    // 添加新参数\n    Object.entries(params).forEach(([key, value]) => {\n      url.searchParams.append(key, value);\n    });\n    \n    return url.toString();\n  } catch (e) {\n    // 处理相对路径或无效 URL\n    let result = baseUrl;\n    \n    // 检查 URL 是否已包含查询参数\n    const hasParams = baseUrl.includes('?');\n    \n    // 添加参数\n    const paramEntries = Object.entries(params);\n    if (paramEntries.length > 0) {\n      for (let i = 0; i < paramEntries.length; i++) {\n        const [key, value] = paramEntries[i];\n        const prefix = i === 0 && !hasParams ? '?' : '&';\n        result += `${prefix}${encodeURIComponent(key)}=${encodeURIComponent(value)}`;\n      }\n    }\n    \n    return result;\n  }\n}\n\n/**\n * 获取 URL 的相对路径\n * \n * @param url - 要处理的 URL，默认为当前页面的 URL\n * @returns URL 的相对路径\n * @example\n * ```ts\n * // 假设当前页面为 https://example.com/products/123?sort=desc\n * console.log(getURLPath()); // '/products/123'\n * \n * // 处理指定 URL\n * console.log(getURLPath('https://example.com/about/team?id=5')); // '/about/team'\n * ```\n */\nexport function getURLPath(url?: string): string {\n  const urlObj = url ? new URL(url) : new URL(window.location.href);\n  return urlObj.pathname;\n}\n\n/**\n * 获取 URL 的域名部分\n * \n * @param url - 要处理的 URL，默认为当前页面的 URL\n * @returns URL 的域名\n * @example\n * ```ts\n * // 假设当前页面为 https://sub.example.com/products\n * console.log(getURLDomain()); // 'sub.example.com'\n * \n * // 处理指定 URL\n * console.log(getURLDomain('https://api.example.org/v1/data')); // 'api.example.org'\n * ```\n */\nexport function getURLDomain(url?: string): string {\n  const urlObj = url ? new URL(url) : new URL(window.location.href);\n  return urlObj.hostname;\n}\n\n/**\n * 判断当前页面是否使用 HTTPS 协议\n * \n * @param url - 要检查的 URL，默认为当前页面的 URL\n * @returns 如果是 HTTPS 则返回 true，否则返回 false\n * @example\n * ```ts\n * if (isHTTPS()) {\n *   console.log('当前页面是安全连接');\n * } else {\n *   console.log('当前页面是非安全连接');\n * }\n * \n * // 检查指定 URL\n * console.log(isHTTPS('https://example.com')); // true\n * console.log(isHTTPS('http://example.com'));  // false\n * ```\n */\nexport function isHTTPS(url?: string): boolean {\n  const urlObj = url ? new URL(url) : new URL(window.location.href);\n  return urlObj.protocol === 'https:';\n}\n\n/**\n * 从 URL 中提取文件名\n * \n * @param url - 要处理的 URL\n * @returns URL 中的文件名\n * @example\n * ```ts\n * console.log(getFileNameFromURL('https://example.com/documents/report.pdf')); \n * // 'report.pdf'\n * \n * console.log(getFileNameFromURL('https://example.com/images/photo.jpg?size=large')); \n * // 'photo.jpg'\n * ```\n */\nexport function getFileNameFromURL(url: string): string {\n  try {\n    // 创建 URL 对象\n    const urlObj = new URL(url);\n    \n    // 获取路径部分\n    const pathname = urlObj.pathname;\n    \n    // 从路径中提取文件名\n    const segments = pathname.split('/');\n    return segments.pop() || '';\n  } catch (e) {\n    // 如果 URL 解析失败，使用正则表达式作为后备\n    const match = url.match(/\\/([^\\/?#]+)[^\\/]*$/);\n    return match ? match[1] : '';\n  }\n}\n\n/**\n * 检查 URL 是否为绝对 URL\n * \n * @param url - 要检查的 URL\n * @returns 如果是绝对 URL 则返回 true，否则返回 false\n * @example\n * ```ts\n * console.log(isAbsoluteURL('https://example.com/page')); // true\n * console.log(isAbsoluteURL('//example.com/page'));       // true\n * console.log(isAbsoluteURL('/page'));                    // false\n * console.log(isAbsoluteURL('page'));                     // false\n * ```\n */\nexport function isAbsoluteURL(url: string): boolean {\n  // 检查是否以协议开头（如 http:, https:, ftp: 等）\n  if (/^[a-z][a-z\\d+\\-.]*:/.test(url)) {\n    return true;\n  }\n  \n  // 检查是否以 // 开头（协议相对 URL）\n  if (url.substring(0, 2) === '//') {\n    return true;\n  }\n  \n  return false;\n}\n\n/**\n * 合并相对 URL 和基础 URL\n * \n * @param baseURL - 基础 URL\n * @param relativeURL - 相对 URL\n * @returns 合并后的绝对 URL\n * @example\n * ```ts\n * console.log(joinURL('https://example.com', '/api/users')); \n * // 'https://example.com/api/users'\n * \n * console.log(joinURL('https://example.com/api', 'users'));\n * // 'https://example.com/api/users'\n * \n * console.log(joinURL('https://example.com/api/', '/users'));\n * // 'https://example.com/api/users'\n * ```\n */\nexport function joinURL(baseURL: string, relativeURL: string): string {\n  try {\n    // 使用 URL 构造函数自动处理路径合并\n    return new URL(relativeURL, baseURL).toString();\n  } catch (e) {\n    // 作为后备，手动合并\n    // 确保基础 URL 结尾没有斜杠（除非是根路径）\n    if (baseURL.endsWith('/') && baseURL !== '/') {\n      baseURL = baseURL.slice(0, -1);\n    }\n    \n    // 确保相对 URL 开头有斜杠\n    if (!relativeURL.startsWith('/') && relativeURL !== '') {\n      relativeURL = '/' + relativeURL;\n    }\n    \n    return baseURL + relativeURL;\n  }\n} ","/**\n * 从URL下载文件并保存到本地\n * \n * @param url - 文件URL\n * @param options - 下载选项\n * @param options.filename - 下载后的文件名，默认从URL中提取\n * @param options.forceDownload - 是否强制下载而不是在浏览器中打开，默认为true\n * @param options.headers - 请求头\n * @returns 返回Promise，成功时resolve，失败时reject\n * \n * @example\n * ```ts\n * // 基本用法\n * downloadFile('https://example.com/document.pdf')\n *   .then(() => console.log('下载成功'))\n *   .catch(error => console.error('下载失败:', error));\n * \n * // 指定文件名\n * downloadFile('https://example.com/document.pdf', { \n *   filename: '我的文档.pdf' \n * });\n * \n * // 添加请求头\n * downloadFile('https://api.example.com/files/123', {\n *   headers: { 'Authorization': 'Bearer token123' },\n *   filename: '报告.xlsx'\n * });\n * ```\n */\nexport async function downloadFile(\n  url: string,\n  options: {\n    filename?: string;\n    forceDownload?: boolean;\n    headers?: Record<string, string>;\n  } = {}\n): Promise<void> {\n  try {\n    // 设置默认选项\n    const { \n      forceDownload = true,\n      headers = {} \n    } = options;\n    \n    // 发送请求获取文件\n    const response = await fetch(url, {\n      method: 'GET',\n      headers: {\n        ...headers\n      }\n    });\n    \n    // 检查响应状态\n    if (!response.ok) {\n      throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n    \n    // 将响应转换为blob\n    const blob = await response.blob();\n    \n    // 获取文件名\n    let filename = options.filename;\n    if (!filename) {\n      // 尝试从Content-Disposition获取文件名\n      const contentDisposition = response.headers.get('Content-Disposition');\n      if (contentDisposition) {\n        const filenameMatch = /filename[^;=\\n]*=((['\"]).*?\\2|[^;\\n]*)/.exec(contentDisposition);\n        if (filenameMatch && filenameMatch[1]) {\n          filename = filenameMatch[1].replace(/['\"]/g, '');\n        }\n      }\n      \n      // 如果未能从响应头中获取文件名，则从URL中提取\n      if (!filename) {\n        // 从URL中提取文件名\n        const urlParts = url.split('/');\n        filename = urlParts[urlParts.length - 1];\n        \n        // 移除URL参数\n        filename = filename.split('?')[0];\n        \n        // 如果还是没有文件名，使用默认值\n        if (!filename) {\n          filename = 'download';\n        }\n      }\n    }\n    \n    // 创建一个blob URL\n    const blobUrl = window.URL.createObjectURL(blob);\n    \n    // 创建一个a标签用于下载\n    const link = document.createElement('a');\n    link.href = blobUrl;\n    link.download = filename;\n    \n    // 如果强制下载，隐藏链接并添加到DOM\n    if (forceDownload) {\n      link.style.display = 'none';\n      document.body.appendChild(link);\n    }\n    \n    // 触发点击事件\n    link.click();\n    \n    // 删除链接和blob URL\n    if (forceDownload) {\n      // 给浏览器一些时间来启动下载\n      setTimeout(() => {\n        if (link.parentNode) {\n          link.parentNode.removeChild(link);\n        }\n        window.URL.revokeObjectURL(blobUrl);\n      }, 100);\n    } else {\n      // 如果不是强制下载，立即释放blob URL\n      window.URL.revokeObjectURL(blobUrl);\n    }\n  } catch (error) {\n    throw new Error(`文件下载失败: ${(error as Error).message}`);\n  }\n} ","/**\n * 带超时功能的fetch函数\n * \n * @param url - 请求的URL\n * @param options - fetch选项\n * @param timeout - 超时时间（毫秒），默认为10000ms\n * @returns 返回Promise，resolve为Response对象，超时则reject\n * \n * @example\n * ```ts\n * // 基本用法\n * fetchWithTimeout('https://api.example.com/data')\n *   .then(response => response.json())\n *   .then(data => console.log(data))\n *   .catch(error => console.error(error));\n * \n * // 自定义超时时间\n * fetchWithTimeout('https://api.example.com/data', {}, 5000)\n *   .then(response => response.json())\n *   .then(data => console.log(data))\n *   .catch(error => console.error(error));\n * \n * // 发送POST请求\n * fetchWithTimeout('https://api.example.com/users', {\n *   method: 'POST',\n *   headers: { 'Content-Type': 'application/json' },\n *   body: JSON.stringify({ name: 'John', age: 30 })\n * })\n *   .then(response => response.json())\n *   .then(data => console.log(data))\n *   .catch(error => console.error(error));\n * ```\n */\nexport function fetchWithTimeout(\n  url: string,\n  options: RequestInit = {},\n  timeout = 10000\n): Promise<Response> {\n  // 创建 AbortController 以便可以取消请求\n  const controller = new AbortController();\n  const { signal } = controller;\n\n  // 创建超时计时器\n  const timeoutId = setTimeout(() => {\n    controller.abort(); // 超时后取消请求\n  }, timeout);\n\n  // 将信号添加到 fetch 选项中\n  const fetchOptions: RequestInit = {\n    ...options,\n    signal\n  };\n\n  // 发送请求并处理超时\n  return fetch(url, fetchOptions)\n    .then(response => {\n      // 请求成功，清除超时定时器\n      clearTimeout(timeoutId);\n      return response;\n    })\n    .catch(error => {\n      // 清除超时定时器\n      clearTimeout(timeoutId);\n      \n      // 如果是超时错误，提供更友好的错误消息\n      if (error.name === 'AbortError') {\n        throw new Error(`Request timeout after ${timeout}ms`);\n      }\n      \n      // 其他错误直接抛出\n      throw error;\n    });\n} ","/**\n * 发送JSONP请求，用于跨域获取数据\n * \n * @param url - 请求URL\n * @param options - 配置选项\n * @param options.callbackParam - 回调参数名，默认为'callback'\n * @param options.callbackName - 自定义回调函数名，默认为自动生成\n * @param options.timeout - 超时时间（毫秒），默认为10000ms\n * @returns 返回Promise，resolve为响应数据，超时或错误则reject\n * \n * @example\n * ```ts\n * // 基本用法\n * jsonp('https://api.example.com/data')\n *   .then(data => console.log(data))\n *   .catch(error => console.error(error));\n * \n * // 自定义参数\n * jsonp('https://api.example.com/data', {\n *   callbackParam: 'jsonpCallback',\n *   timeout: 5000\n * })\n *   .then(data => console.log(data))\n *   .catch(error => console.error(error));\n * ```\n */\nexport function jsonp<T = any>(\n  url: string,\n  options: {\n    callbackParam?: string;\n    callbackName?: string;\n    timeout?: number;\n  } = {}\n): Promise<T> {\n  // 设置默认选项\n  const { \n    callbackParam = 'callback', \n    callbackName = `jsonpCallback_${Date.now()}_${Math.floor(Math.random() * 1000)}`,\n    timeout = 10000 \n  } = options;\n\n  return new Promise<T>((resolve, reject) => {\n    // 创建script元素\n    const script = document.createElement('script');\n    \n    // 存储原始的window对象，以便后续清理\n    const originalWindow = window as any;\n    \n    // 超时计时器\n    let timeoutId: number | null = null;\n    \n    // 清理函数\n    const cleanup = () => {\n      if (timeoutId !== null) {\n        clearTimeout(timeoutId);\n      }\n      \n      // 删除全局回调函数\n      delete originalWindow[callbackName];\n      \n      // 从DOM中移除script标签\n      if (script.parentNode) {\n        script.parentNode.removeChild(script);\n      }\n    };\n    \n    // 设置超时处理\n    timeoutId = window.setTimeout(() => {\n      cleanup();\n      reject(new Error(`JSONP request to ${url} timed out after ${timeout}ms`));\n    }, timeout);\n    \n    // 设置全局回调函数\n    originalWindow[callbackName] = (data: T) => {\n      cleanup();\n      resolve(data);\n    };\n    \n    // 构建包含回调参数的URL\n    const separator = url.includes('?') ? '&' : '?';\n    const jsonpUrl = `${url}${separator}${callbackParam}=${callbackName}`;\n    \n    // 设置script标签错误处理\n    script.onerror = () => {\n      cleanup();\n      reject(new Error(`JSONP request to ${url} failed`));\n    };\n    \n    // 设置script标签的src并添加到DOM\n    script.src = jsonpUrl;\n    document.head.appendChild(script);\n  });\n} ","/**\n * 检测URL的可用性和响应时间\n * \n * @param url - 要检测的URL\n * @param options - 配置选项\n * @param options.timeout - 超时时间（毫秒），默认为5000ms\n * @param options.method - 使用的HTTP方法，默认为'HEAD'\n * @returns 返回Promise，resolve为响应时间（毫秒），失败则reject\n * \n * @example\n * ```ts\n * // 基本用法\n * ping('https://example.com')\n *   .then(time => console.log(`响应时间: ${time}ms`))\n *   .catch(error => console.error('Ping失败:', error));\n * \n * // 设置更短的超时\n * ping('https://example.com', { timeout: 2000 })\n *   .then(time => console.log(`响应时间: ${time}ms`))\n *   .catch(error => console.error('Ping失败:', error));\n * \n * // 使用GET方法代替HEAD\n * ping('https://example.com', { method: 'GET' })\n *   .then(time => console.log(`响应时间: ${time}ms`))\n *   .catch(error => console.error('Ping失败:', error));\n * ```\n */\nexport function ping(\n  url: string,\n  options: {\n    timeout?: number;\n    method?: 'HEAD' | 'GET';\n  } = {}\n): Promise<number> {\n  // 设置默认选项\n  const { \n    timeout = 5000,\n    method = 'HEAD'\n  } = options;\n\n  return new Promise<number>((resolve, reject) => {\n    // 记录开始时间\n    const startTime = Date.now();\n    \n    // 创建 AbortController 用于超时处理\n    const controller = new AbortController();\n    const { signal } = controller;\n    \n    // 设置超时\n    const timeoutId = setTimeout(() => {\n      controller.abort();\n    }, timeout);\n\n    // 发送请求\n    fetch(url, {\n      method,\n      mode: 'no-cors', // 允许ping不同源的URL\n      cache: 'no-cache',\n      credentials: 'omit',\n      redirect: 'follow',\n      referrerPolicy: 'no-referrer',\n      signal\n    })\n      .then(() => {\n        // 计算响应时间\n        const endTime = Date.now();\n        const responseTime = endTime - startTime;\n        \n        // 清除超时\n        clearTimeout(timeoutId);\n        \n        // 返回响应时间\n        resolve(responseTime);\n      })\n      .catch(error => {\n        // 清除超时\n        clearTimeout(timeoutId);\n        \n        // 处理超时错误\n        if (error.name === 'AbortError') {\n          reject(new Error(`Ping to ${url} timed out after ${timeout}ms`));\n        } else {\n          reject(error);\n        }\n      });\n  });\n} ","/**\n * 通用请求函数，支持GET和POST等常见请求方法\n * \n * @param url - 请求URL\n * @param options - 请求配置选项\n * @param options.method - 请求方法，默认为'GET'\n * @param options.headers - 请求头\n * @param options.data - 请求数据，用于POST、PUT等方法\n * @param options.timeout - 超时时间（毫秒）\n * @param options.credentials - 是否携带凭证，默认为'same-origin'\n * @returns 返回Promise，resolve为响应数据，reject为错误信息\n * \n * @example\n * ```ts\n * // 基本GET请求\n * request('https://api.example.com/users')\n *   .then(data => console.log(data))\n *   .catch(error => console.error(error));\n * \n * // POST请求发送JSON数据\n * request('https://api.example.com/users', {\n *   method: 'POST',\n *   headers: { 'Content-Type': 'application/json' },\n *   data: { name: 'John', age: 30 }\n * }).then(response => console.log(response));\n * \n * // 设置超时\n * request('https://api.example.com/users', { timeout: 5000 })\n *   .then(data => console.log(data))\n *   .catch(error => console.error(error));\n * ```\n */\nexport async function request<T = any>(\n  url: string,\n  options: {\n    method?: string;\n    headers?: Record<string, string>;\n    data?: any;\n    timeout?: number;\n    credentials?: RequestCredentials;\n  } = {}\n): Promise<T> {\n  const {\n    method = 'GET',\n    headers = {},\n    data = null,\n    timeout = 30000,\n    credentials = 'same-origin'\n  } = options;\n\n  // 创建 AbortController 用于超时处理\n  const controller = new AbortController();\n  const { signal } = controller;\n\n  // 设置超时\n  const timeoutId = setTimeout(() => {\n    controller.abort();\n  }, timeout);\n\n  try {\n    // 构建请求配置\n    const config: RequestInit = {\n      method,\n      headers: {\n        ...headers\n      },\n      credentials,\n      signal\n    };\n\n    // 处理请求体\n    if (data !== null) {\n      if (method !== 'GET' && method !== 'HEAD') {\n        if (headers['Content-Type'] === 'application/json' || !headers['Content-Type']) {\n          config.body = typeof data === 'string' ? data : JSON.stringify(data);\n          // 如果没有设置Content-Type，默认设置为application/json\n          if (!headers['Content-Type']) {\n            (config.headers as Record<string, string>)['Content-Type'] = 'application/json';\n          }\n        } else if (headers['Content-Type'] === 'application/x-www-form-urlencoded') {\n          // 处理表单数据\n          const formData = new URLSearchParams();\n          for (const key in data) {\n            formData.append(key, data[key]);\n          }\n          config.body = formData.toString();\n        } else if (data instanceof FormData) {\n          // 如果是FormData对象直接使用\n          config.body = data;\n        }\n      } else if (method === 'GET' && data) {\n        // 对于GET请求，将data转换为URL参数\n        const queryParams = new URLSearchParams();\n        for (const key in data) {\n          queryParams.append(key, String(data[key]));\n        }\n        const queryString = queryParams.toString();\n        url = url + (url.includes('?') ? '&' : '?') + queryString;\n      }\n    }\n\n    // 发送请求\n    const response = await fetch(url, config);\n\n    // 清除超时\n    clearTimeout(timeoutId);\n\n    // 处理响应状态\n    if (!response.ok) {\n      throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n\n    // 获取响应内容类型\n    const contentType = response.headers.get('content-type');\n\n    // 根据内容类型解析响应\n    if (contentType && contentType.includes('application/json')) {\n      return await response.json() as T;\n    } else if (contentType && contentType.includes('text/')) {\n      return await response.text() as unknown as T;\n    } else {\n      // 对于其他类型，可以根据需要处理\n      // 例如：blob, arrayBuffer 等\n      return await response.blob() as unknown as T;\n    }\n  } catch (error) {\n    // 清除超时\n    clearTimeout(timeoutId);\n\n    if ((error as Error).name === 'AbortError') {\n      throw new Error(`Request timeout after ${timeout}ms`);\n    }\n    \n    throw error;\n  }\n} ","/**\n * 基础数字操作工具函数\n * @packageDocumentation\n */\n\n/**\n * 检查是否为数字\n * @param value - 要检查的值\n * @returns 是否为数字\n * @example\n * isNumber(123) // true\n * isNumber('123') // false\n */\nexport const isNumber = (value: unknown): value is number => \n  typeof value === 'number';\n\n/**\n * 检查是否为整数\n * @param value - 要检查的值\n * @returns 是否为整数\n * @example\n * isInteger(123) // true\n * isInteger(123.45) // false\n */\nexport const isInteger = (value: number): boolean => \n  Number.isInteger(value);\n\n/**\n * 检查是否为有限数\n * @param value - 要检查的值\n * @returns 是否为有限数\n * @example\n * isFiniteNumber(123) // true\n * isFiniteNumber(Infinity) // false\n */\nexport const isFiniteNumber = (value: number): boolean => \n  Number.isFinite(value);\n\n/**\n * 检查是否为 NaN\n * @param value - 要检查的值\n * @returns 是否为 NaN\n * @example\n * isNaN(NaN) // true\n * isNaN(123) // false\n */\nexport const isNaN = (value: number): boolean => \n  Number.isNaN(value);\n\n/**\n * 检查是否为偶数\n * @param value - 要检查的值\n * @returns 是否为偶数\n * @example\n * isEven(123) // false\n * isEven(124) // true\n */\nexport const isEven = (value: number): boolean => \n  value % 2 === 0;\n\n/**\n * 判断数字是否为奇数\n * @param num 要判断的数字\n * @returns 是否为奇数\n */\nexport function isOdd(num: number): boolean {\n  return Math.abs(num) % 2 === 1;\n}\n\n/**\n * 检查是否为质数\n * @param value - 要检查的值\n * @returns 是否为质数\n * @example\n * isPrime(17) // true\n * isPrime(18) // false\n */\nexport const isPrime = (value: number): boolean => {\n  if (value <= 1) return false;\n  if (value <= 3) return true;\n  if (isEven(value)) return false;\n\n  const sqrt = Math.sqrt(value);\n  for (let i = 3; i <= sqrt; i += 2) {\n    if (value % i === 0) return false;\n  }\n  return true;\n}; ","/**\n * 数学运算工具函数\n * @packageDocumentation\n */\n\n/**\n * 获取数字的绝对值\n * @param value - 数字\n * @returns 绝对值\n * @example\n * abs(-123) // 123\n */\nexport const abs = (value: number | null | undefined): number => \n  Math.abs(value ?? 0);\n\n/**\n * 获取数字的符号\n * @param value - 数字\n * @returns 符号（1、0 或 -1）\n * @example\n * sign(123) // 1\n * sign(0) // 0\n * sign(-123) // -1\n */\nexport const sign = (value: number | null | undefined): number => \n  Math.sign(value ?? 0);\n\n/**\n * 获取数字的平方根\n * @param value - 数字\n * @returns 平方根\n * @example\n * sqrt(16) // 4\n * sqrt(17) // 4.123105625617661\n */\nexport const sqrt = (value: number | null | undefined): number => \n  Math.sqrt(value ?? 0);\n\n/**\n * 获取数字的幂\n * @param base - 底数\n * @param exponent - 指数\n * @returns 幂\n * @example\n * pow(2, 3) // 8\n */\nexport const pow = (base: number | null | undefined, exponent: number | null | undefined): number => \n  Math.pow(base ?? 0, exponent ?? 0);\n\n/**\n * 计算两个数的最大公约数\n * @param a - 第一个数\n * @param b - 第二个数\n * @returns 最大公约数\n * @example\n * gcd(12, 18) // 6\n */\nexport function gcd(a: number | null | undefined, b: number | null | undefined): number {\n  a = a ?? 0;\n  b = b ?? 0;\n  \n  if (a === 0 || b === 0) {\n    return Math.max(Math.abs(a), Math.abs(b)) || 0;\n  }\n\n  a = Math.abs(a);\n  b = Math.abs(b);\n\n  while (b !== 0) {\n    const temp: number = b;\n    b = a % b;\n    a = temp;\n  }\n\n  return a || 0;\n}\n\n/**\n * 计算两个数的最小公倍数\n * @param a 第一个数\n * @param b 第二个数\n * @returns 最小公倍数\n */\nexport function lcm(a: number | null | undefined, b: number | null | undefined): number {\n  if (a === 0 || b === 0) {\n    return 0;\n  }\n  return Math.abs((a ?? 0) * (b ?? 0)) / gcd(a, b);\n}\n\n/**\n * 获取数字的位数\n * @param value - 数字\n * @returns 位数\n * @example\n * length(123) // 3\n */\nexport const length = (value: number | null | undefined): number => \n  Math.abs(value ?? 0).toString().length;\n\n/**\n * 获取数字的阶乘\n * @param value - 数字\n * @returns 阶乘\n * @example\n * factorial(5) // 120\n */\nexport const factorial = (value: number | null | undefined): number => {\n  if (value === null || value === undefined) return 1;\n  if (value < 0) throw new Error('Factorial is not defined for negative numbers');\n  if (!Number.isInteger(value)) throw new Error('Factorial is only defined for integers');\n  if (value === 0 || value === 1) return 1;\n  return value * factorial(value - 1);\n}; ","/**\n * 随机数生成工具函数\n */\n\n/**\n * 生成指定范围内的随机数\n * @param min - 最小值\n * @param max - 最大值\n * @param inclusive - 是否包含边界值，默认为 true\n * @returns 随机数\n * @example\n * random(1, 10) // 1-10 之间的随机数\n * random(1, 10, false) // 2-9 之间的随机数\n */\nexport function random(min: number, max: number, inclusive: boolean = true): number {\n  if (isNaN(min) || isNaN(max)) {\n    return NaN;\n  }\n  if (min > max) {\n    [min, max] = [max, min];\n  }\n  const range = max - min + (inclusive ? 0 : 0);\n  return min + Math.random() * range;\n}\n\n/**\n * 生成指定范围内的随机整数\n * @param min - 最小值\n * @param max - 最大值\n * @param inclusive - 是否包含边界值，默认为 true\n * @returns 随机整数\n * @example\n * randomInt(1, 10) // 1-10 之间的随机整数\n * randomInt(1, 10, false) // 2-9 之间的随机整数\n */\nexport function randomInt(min: number, max: number, inclusive: boolean = true): number {\n  if (isNaN(min) || isNaN(max)) {\n    return NaN;\n  }\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  if (min > max) {\n    [min, max] = [max, min];\n  }\n  return Math.floor(Math.random() * (max - min + (inclusive ? 1 : -1))) + min;\n}\n\n/**\n * 生成指定长度的随机数字字符串\n * @param length - 字符串长度\n * @returns 随机数字字符串\n * @example\n * randomDigits(4) // 例如 \"3751\"\n * randomDigits(6) // 例如 \"159374\"\n */\nexport function randomDigits(length: number): string {\n  if (length <= 0) return '';\n  \n  let result = '';\n  for (let i = 0; i < length; i++) {\n    result += randomInt(0, 9).toString();\n  }\n  \n  return result;\n}\n\n/**\n * 生成UUID v4（随机UUID）\n * @returns UUID字符串\n * @example\n * randomUUID() // 例如 \"f47ac10b-58cc-4372-a567-0e02b2c3d479\"\n */\nexport function randomUUID(): string {\n  // 检查是否原生支持crypto.randomUUID\n  if (typeof crypto !== 'undefined' && typeof crypto.randomUUID === 'function') {\n    return crypto.randomUUID();\n  }\n  \n  // 自行实现UUID v4的逻辑\n  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, (c) => {\n    const r = (Math.random() * 16) | 0;\n    const v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\n/**\n * 随机打乱数组\n * @param array - 要打乱的数组\n * @returns 打乱后的数组\n * @example\n * shuffle([1, 2, 3, 4, 5]) // [3, 1, 4, 2, 5]\n */\nexport function shuffle<T>(array: T[]): T[] {\n  const result = [...array];\n  for (let i = result.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [result[i], result[j]] = [result[j], result[i]];\n  }\n  return result;\n} ","/**\n * 数据分析相关函数\n */\n\n/**\n * 计算增长率\n * @param initialValue - 初始值\n * @param finalValue - 最终值\n * @returns 增长率\n * @example\n * growthRate(100, 150) // 0.5\n */\nexport const growthRate = (\n  initialValue: number | null | undefined,\n  finalValue: number | null | undefined\n): number => {\n  const init = initialValue ?? 0;\n  const final = finalValue ?? 0;\n  return init === 0 ? (final === 0 ? 0 : Infinity) : (final - init) / init;\n};\n\n/**\n * 计算复合增长率\n * @param initialValue - 初始值\n * @param finalValue - 最终值\n * @param periods - 期数\n * @returns 复合增长率\n * @example\n * compoundGrowthRate(100, 150, 2) // 0.2247\n */\nexport const compoundGrowthRate = (\n  initialValue: number | null | undefined,\n  finalValue: number | null | undefined,\n  periods: number | null | undefined\n): number => {\n  const init = initialValue ?? 0;\n  const final = finalValue ?? 0;\n  const p = periods ?? 1;\n  return init === 0 ? (final === 0 ? 0 : Infinity) : Math.pow(final / init, 1 / p) - 1;\n};\n\n/**\n * 计算移动平均\n * @param values - 数值数组\n * @param windowSize - 窗口大小\n * @returns 移动平均数组\n * @example\n * movingAverage([1, 2, 3, 4, 5], 3) // [2, 3, 4]\n */\nexport const movingAverage = (\n  values: number[] | null | undefined,\n  windowSize: number | null | undefined\n): number[] => {\n  if (!values?.length || !windowSize || windowSize <= 0) return [];\n  \n  const result: number[] = [];\n  \n  for (let i = 0; i <= values.length - windowSize; i++) {\n    const window = values.slice(i, i + windowSize);\n    const average = window.reduce((sum, value) => sum + (value ?? 0), 0) / windowSize;\n    result.push(average);\n  }\n  \n  return result;\n};\n\n/**\n * 计算指数移动平均\n * @param values - 数值数组\n * @param alpha - 平滑因子\n * @returns 指数移动平均数组\n * @example\n * exponentialMovingAverage([1, 2, 3, 4, 5], 0.2) // [1, 1.2, 1.56, 2.048, 2.6384]\n */\nexport const exponentialMovingAverage = (\n  values: number[] | null | undefined,\n  alpha: number | null | undefined\n): number[] => {\n  if (!values?.length || alpha === null || alpha === undefined) return [];\n  \n  const result: number[] = [values[0] ?? 0];\n  \n  for (let i = 1; i < values.length; i++) {\n    const ema = alpha * (values[i] ?? 0) + (1 - alpha) * result[i - 1];\n    result.push(ema);\n  }\n  \n  return result;\n};\n\n/**\n * 计算趋势\n * @param values - 数值数组\n * @returns 趋势（1: 上升, -1: 下降, 0: 平稳）\n * @example\n * trend([1, 2, 3, 4, 5]) // 1\n * trend([5, 4, 3, 2, 1]) // -1\n */\nexport const trend = (values: number[] | null | undefined): number => {\n  if (!values?.length || values.length < 2) return 0;\n  \n  const firstHalf = values.slice(0, Math.floor(values.length / 2));\n  const secondHalf = values.slice(-Math.floor(values.length / 2));\n  \n  const firstAvg =\n    firstHalf.reduce((sum, value) => sum + (value ?? 0), 0) / firstHalf.length;\n  const secondAvg =\n    secondHalf.reduce((sum, value) => sum + (value ?? 0), 0) / secondHalf.length;\n  \n  if (Math.abs(secondAvg - firstAvg) < 0.0001) return 0;\n  return secondAvg > firstAvg ? 1 : -1;\n};\n\n/**\n * 计算分布\n * @param values - 数值数组\n * @param bins - 区间数\n * @returns 分布对象\n * @example\n * distribution([1, 2, 2, 3, 3, 3, 4, 4, 5], 3) // { \"1-2\": 3, \"2-3\": 3, \"3-4\": 3 }\n */\nexport const distribution = (\n  values: number[] | null | undefined,\n  bins: number | null | undefined\n): Record<string, number> => {\n  if (!values?.length || !bins || bins <= 0) return {};\n  \n  const validValues = values.filter((v): v is number => v !== null && v !== undefined);\n  if (!validValues.length) return {};\n  \n  const min = Math.min(...validValues);\n  const max = Math.max(...validValues);\n  const binSize = (max - min) / bins;\n  \n  const result: Record<string, number> = {};\n  \n  for (let i = 0; i < bins; i++) {\n    const binStart = min + i * binSize;\n    const binEnd = binStart + binSize;\n    const binKey = `${binStart.toFixed(2)}-${binEnd.toFixed(2)}`;\n    \n    result[binKey] = validValues.filter(\n      (value) => value >= binStart && value < binEnd\n    ).length;\n  }\n  \n  // 处理最后一个区间\n  const lastBinKey = `${(min + (bins - 1) * binSize).toFixed(2)}-${max.toFixed(2)}`;\n  result[lastBinKey] = validValues.filter(\n    (value) => value >= min + (bins - 1) * binSize && value <= max\n  ).length;\n  \n  return result;\n};\n\n/**\n * 计算相关性\n * @param x - X数组\n * @param y - Y数组\n * @returns 相关系数\n * @example\n * correlation([1, 2, 3], [2, 4, 6]) // 1\n */\nexport const correlation = (x: number[] | null | undefined, y: number[] | null | undefined): number => {\n  if (!x?.length || !y?.length || x.length !== y.length) {\n    throw new Error('Arrays must have the same length');\n  }\n  \n  const validPairs = x.map((xi, i) => ({ x: xi, y: y[i] }))\n    .filter(({ x, y }) => x !== null && x !== undefined && y !== null && y !== undefined);\n  \n  if (validPairs.length < 2) {\n    throw new Error('Need at least 2 valid pairs for correlation');\n  }\n  \n  const n = validPairs.length;\n  const sumX = validPairs.reduce((sum, { x }) => sum + x, 0);\n  const sumY = validPairs.reduce((sum, { y }) => sum + y, 0);\n  const sumXY = validPairs.reduce((sum, { x, y }) => sum + x * y, 0);\n  const sumX2 = validPairs.reduce((sum, { x }) => sum + x * x, 0);\n  const sumY2 = validPairs.reduce((sum, { y }) => sum + y * y, 0);\n  \n  const numerator = n * sumXY - sumX * sumY;\n  const denominator = Math.sqrt(\n    (n * sumX2 - sumX * sumX) * (n * sumY2 - sumY * sumY)\n  );\n  \n  return denominator === 0 ? 0 : numerator / denominator;\n};\n\n/**\n * 计算预测值\n * @param values - 数值数组\n * @param periods - 预测期数\n * @returns 预测值数组\n * @example\n * forecast([1, 2, 3, 4, 5], 2) // [6, 7]\n */\nexport const forecast = (\n  values: number[] | null | undefined,\n  periods: number | null | undefined\n): number[] => {\n  if (!values?.length || values.length < 2 || !periods || periods <= 0) {\n    throw new Error('Need at least 2 values for forecasting');\n  }\n  \n  const validValues = values.filter((v): v is number => v !== null && v !== undefined);\n  if (validValues.length < 2) {\n    throw new Error('Need at least 2 valid values for forecasting');\n  }\n  \n  const n = validValues.length;\n  const x = Array.from({ length: n }, (_, i) => i + 1);\n  const y = validValues;\n  \n  const sumX = x.reduce((sum, value) => sum + value, 0);\n  const sumY = y.reduce((sum, value) => sum + value, 0);\n  const sumXY = x.reduce((sum, value, i) => sum + value * y[i], 0);\n  const sumX2 = x.reduce((sum, value) => sum + value * value, 0);\n  \n  const slope = (n * sumXY - sumX * sumY) / (n * sumX2 - sumX * sumX);\n  const intercept = (sumY - slope * sumX) / n;\n  \n  const result: number[] = [];\n  for (let i = 0; i < periods; i++) {\n    result.push(slope * (n + i + 1) + intercept);\n  }\n  \n  return result;\n};\n\n/**\n * 计算季节性\n * @param values - 数值数组\n * @param period - 周期\n * @returns 季节性因子数组\n * @example\n * seasonality([1, 2, 1, 2, 1, 2], 2) // [0.5, 1.5]\n */\nexport const seasonality = (\n  values: number[] | null | undefined,\n  period: number | null | undefined\n): number[] => {\n  if (!values?.length || !period || period <= 0) return Array(period ?? 0).fill(0);\n  \n  const validValues = values.filter((v): v is number => v !== null && v !== undefined);\n  if (!validValues.length) return Array(period).fill(0);\n  \n  const result: number[] = Array(period).fill(0);\n  const counts: number[] = Array(period).fill(0);\n  \n  validValues.forEach((value, index) => {\n    const position = index % period;\n    result[position] += value;\n    counts[position]++;\n  });\n  \n  const totalCount = counts.reduce((sum, count) => sum + count, 0);\n  return result.map((sum, index) => (sum / counts[index]) * (period / totalCount));\n};\n\n/**\n * 计算异常值\n * @param values - 数值数组\n * @param threshold - 阈值（标准差的倍数）\n * @returns 异常值数组\n * @example\n * outliers([1, 2, 3, 100, 4, 5], 2) // [100]\n */\nexport const outliers = (\n  values: number[] | null | undefined,\n  threshold: number | null | undefined = 2\n): number[] => {\n  if (!values?.length || values.length <= 1) {\n    return [];\n  }\n\n  const validValues = values.filter((v): v is number => v !== null && v !== undefined);\n  if (validValues.length <= 1) {\n    return [];\n  }\n\n  const mean = validValues.reduce((sum, value) => sum + value, 0) / validValues.length;\n  const stdDev = Math.sqrt(\n    validValues.reduce((sum, value) => sum + Math.pow(value - mean, 2), 0) /\n      validValues.length\n  );\n  const t = threshold ?? 2;\n  \n  return validValues.filter(\n    (value) => Math.abs(value - mean) > t * stdDev\n  );\n}; ","/**\n * 统计计算相关函数\n */\n\n/**\n * 计算平均值\n * @param numbers - 数字数组\n * @returns 平均值\n * @example\n * mean([1, 2, 3, 4, 5]) // 3\n */\nexport const mean = (numbers: number[]): number => {\n  if (numbers.length === 0) return 0;\n  return numbers.reduce((sum, num) => sum + num, 0) / numbers.length;\n};\n\n/**\n * 计算中位数\n * @param numbers - 数字数组\n * @returns 中位数\n * @example\n * median([1, 2, 3, 4, 5]) // 3\n * median([1, 2, 3, 4]) // 2.5\n */\nexport const median = (numbers: number[]): number => {\n  if (numbers.length === 0) return 0;\n  const sorted = [...numbers].sort((a, b) => a - b);\n  const middle = Math.floor(sorted.length / 2);\n  if (sorted.length % 2 === 0) {\n    return (sorted[middle - 1] + sorted[middle]) / 2;\n  }\n  return sorted[middle];\n};\n\n/**\n * 计算众数\n * @param numbers - 数字数组\n * @returns 众数数组\n * @example\n * mode([1, 2, 2, 3, 3, 3]) // [3]\n * mode([1, 2, 2, 3, 3]) // [2, 3]\n */\nexport const mode = (numbers: number[]): number[] => {\n  if (numbers.length === 0) return [];\n  const frequency: Record<number, number> = {};\n  numbers.forEach(num => {\n    frequency[num] = (frequency[num] || 0) + 1;\n  });\n  const maxFreq = Math.max(...Object.values(frequency));\n  return Object.entries(frequency)\n    .filter(([_, freq]) => freq === maxFreq)\n    .map(([num]) => Number(num));\n};\n\n/**\n * 计算方差\n * @param numbers - 数字数组\n * @returns 方差\n * @example\n * variance([1, 2, 3, 4, 5]) // 2\n */\nexport const variance = (numbers: number[]): number => {\n  if (numbers.length === 0) return 0;\n  const avg = mean(numbers);\n  return numbers.reduce((sum, num) => sum + Math.pow(num - avg, 2), 0) / numbers.length;\n};\n\n/**\n * 计算标准差\n * @param numbers - 数字数组\n * @returns 标准差\n * @example\n * standardDeviation([1, 2, 3, 4, 5]) // 1.4142135623730951\n */\nexport const standardDeviation = (numbers: number[]): number => {\n  return Math.sqrt(variance(numbers));\n};\n\n/**\n * 计算百分位数\n * @param numbers - 数字数组\n * @param percentile - 百分位数 (0-100)\n * @returns 百分位数对应的值\n * @example\n * percentile([1, 2, 3, 4, 5], 50) // 3\n */\nexport const percentile = (numbers: number[], percentile: number): number => {\n  if (numbers.length === 0) return 0;\n  const sorted = [...numbers].sort((a, b) => a - b);\n  const index = (percentile / 100) * (sorted.length - 1);\n  const lower = Math.floor(index);\n  const upper = Math.ceil(index);\n  if (lower === upper) return sorted[lower];\n  return sorted[lower] + (index - lower) * (sorted[upper] - sorted[lower]);\n};\n\n/**\n * 计算四分位数\n * @param numbers - 数字数组\n * @returns 四分位数对象\n * @example\n * quartiles([1, 2, 3, 4, 5]) // { q1: 2, q2: 3, q3: 4 }\n */\nexport const quartiles = (numbers: number[]): { q1: number; q2: number; q3: number } => {\n  return {\n    q1: percentile(numbers, 25),\n    q2: percentile(numbers, 50),\n    q3: percentile(numbers, 75)\n  };\n};\n\n/**\n * 计算偏度\n * @param numbers - 数字数组\n * @returns 偏度\n * @example\n * skewness([1, 2, 3, 4, 5]) // 0\n */\nexport const skewness = (numbers: number[]): number => {\n  if (numbers.length === 0) return 0;\n  const avg = mean(numbers);\n  const stdDev = standardDeviation(numbers);\n  if (stdDev === 0) return 0;\n  return numbers.reduce((sum, num) => sum + Math.pow((num - avg) / stdDev, 3), 0) / numbers.length;\n};\n\n/**\n * 计算峰度\n * @param numbers - 数字数组\n * @returns 峰度\n * @example\n * kurtosis([1, 2, 3, 4, 5]) // -1.2\n */\nexport const kurtosis = (numbers: number[]): number => {\n  if (numbers.length === 0) return 0;\n  const avg = mean(numbers);\n  const stdDev = standardDeviation(numbers);\n  if (stdDev === 0) return 0;\n  return numbers.reduce((sum, num) => sum + Math.pow((num - avg) / stdDev, 4), 0) / numbers.length - 3;\n}; ","/**\n * 金融计算工具函数\n * @packageDocumentation\n */\n\n/**\n * 计算复利\n * @param principal - 本金\n * @param rate - 年利率\n * @param time - 时间（年）\n * @param frequency - 复利频率（每年复利次数），默认为1\n * @returns 最终金额\n * @example\n * compound(1000, 0.05, 1) // 1050\n * compound(1000, 0.05, 1, 12) // 1051.16\n */\nexport function compound(\n  principal: number,\n  rate: number,\n  time: number,\n  frequency: number = 1\n): number {\n  return principal * Math.pow(1 + rate / frequency, frequency * time);\n}\n\n/**\n * 计算复利利息\n * @param principal - 本金\n * @param rate - 年利率\n * @param time - 时间（年）\n * @param frequency - 复利频率（每年复利次数）\n * @returns 利息\n * @example\n * compoundInterest(1000, 0.05, 1) // 50\n * compoundInterest(1000, 0.05, 1, 12) // 51.16\n */\nexport const compoundInterest = (\n  principal: number,\n  rate: number,\n  time: number,\n  frequency: number = 1\n): number => {\n  return compound(principal, rate, time, frequency) - principal;\n};\n\n/**\n * 计算现值\n * @param futureValue - 未来值\n * @param rate - 年利率\n * @param time - 时间（年）\n * @returns 现值\n * @example\n * presentValue(1050, 0.05, 1) // 1000\n */\nexport const presentValue = (\n  futureValue: number,\n  rate: number,\n  time: number\n): number => {\n  return futureValue / Math.pow(1 + rate, time);\n};\n\n/**\n * 计算未来值\n * @param presentValue - 现值\n * @param rate - 年利率\n * @param time - 时间（年）\n * @returns 未来值\n * @example\n * futureValue(1000, 0.05, 1) // 1050\n */\nexport const futureValue = (\n  presentValue: number,\n  rate: number,\n  time: number\n): number => {\n  return presentValue * Math.pow(1 + rate, time);\n};\n\n/**\n * 计算年化收益率\n * @param initialValue - 初始值\n * @param finalValue - 最终值\n * @param time - 时间（年）\n * @returns 年化收益率\n * @example\n * annualReturnRate(1000, 1050, 1) // 0.05\n */\nexport const annualReturnRate = (\n  initialValue: number,\n  finalValue: number,\n  time: number\n): number => {\n  return Math.pow(finalValue / initialValue, 1 / time) - 1;\n};\n\n/**\n * 计算折扣\n * @param originalPrice - 原价\n * @param discountRate - 折扣率（0-1）\n * @returns 折扣后的价格\n * @example\n * discount(100, 0.2) // 80\n * discount(100, 0.5) // 50\n */\nexport function discount(originalPrice: number, discountRate: number): number {\n  return originalPrice * (1 - discountRate);\n}\n\n/**\n * 计算折扣率\n * @param originalPrice - 原价\n * @param discountedPrice - 折扣后价格\n * @returns 折扣率\n * @example\n * discountRate(100, 80) // 0.2\n */\nexport const discountRate = (\n  originalPrice: number,\n  discountedPrice: number\n): number => {\n  return (originalPrice - discountedPrice) / originalPrice;\n};\n\n/**\n * 计算税额\n * @param amount - 金额\n * @param taxRate - 税率（0-1）\n * @returns 税额\n * @example\n * tax(1000, 0.1) // 100\n * tax(1000, 0.2) // 200\n */\nexport function tax(amount: number, taxRate: number): number {\n  return amount * taxRate;\n}\n\n/**\n * 计算税后收入\n * @param income - 收入\n * @param taxRate - 税率\n * @returns 税后收入\n * @example\n * afterTax(10000, 0.1) // 9000\n */\nexport const afterTax = (income: number, taxRate: number): number => {\n  return income * (1 - taxRate);\n};\n\n/**\n * 计算贷款月供\n * @param principal - 贷款金额\n * @param annualRate - 年利率\n * @param months - 贷款期限（月）\n * @returns 月供金额\n * @example\n * loan(100000, 0.05, 12) // 8560.75\n */\nexport function loan(principal: number, annualRate: number, months: number): number {\n  const monthlyRate = annualRate / 12;\n  const monthlyPayment =\n    (principal * monthlyRate * Math.pow(1 + monthlyRate, months)) /\n    (Math.pow(1 + monthlyRate, months) - 1);\n  return monthlyPayment;\n}\n\n/**\n * 计算贷款总利息\n * @param principal - 贷款金额\n * @param rate - 年利率\n * @param months - 贷款期限（月）\n * @returns 总利息\n * @example\n * loanInterest(100000, 0.05, 12) // 2729\n */\nexport const loanInterest = (\n  principal: number,\n  rate: number,\n  months: number\n): number => {\n  return loan(principal, rate, months) * months - principal;\n};\n\n/**\n * 计算折旧\n * @param cost - 资产原值\n * @param salvage - 残值\n * @param life - 使用年限\n * @param period - 计算期数\n * @param method - 折旧方法，默认为'straight'\n * @returns 折旧金额\n * @example\n * depreciation(10000, 1000, 5, 1) // 1800\n * depreciation(10000, 1000, 5, 1, 'declining') // 2000\n */\nexport function depreciation(\n  cost: number,\n  salvage: number,\n  life: number,\n  period: number,\n  method: 'straight' | 'declining' = 'straight'\n): number {\n  if (period < 1 || period > life) {\n    return 0;\n  }\n\n  if (method === 'straight') {\n    return (cost - salvage) / life;\n  }\n\n  if (method === 'declining') {\n    const rate = 2 / life;\n    let bookValue = cost;\n    let depreciation = 0;\n\n    for (let i = 1; i <= period; i++) {\n      depreciation = bookValue * rate;\n      bookValue -= depreciation;\n    }\n\n    return depreciation;\n  }\n\n  throw new Error('Invalid depreciation method');\n}\n\n/**\n * 计算投资回报率\n * @param initialInvestment - 初始投资\n * @param finalValue - 最终价值\n * @returns 投资回报率\n * @example\n * roi(1000, 1500) // 0.5\n */\nexport const roi = (\n  initialInvestment: number,\n  finalValue: number\n): number => {\n  return (finalValue - initialInvestment) / initialInvestment;\n};\n\n/**\n * 计算内部收益率\n * @param cashFlows - 现金流数组\n * @returns 内部收益率\n * @example\n * irr([-1000, 100, 200, 300, 400]) // 0.1\n */\nexport const irr = (cashFlows: number[]): number => {\n  // 使用牛顿法计算内部收益率\n  let rate = 0.1; // 初始猜测值\n  const tolerance = 0.0001;\n  const maxIterations = 100;\n  let iteration = 0;\n  \n  while (iteration < maxIterations) {\n    const npv = cashFlows.reduce(\n      (sum, flow, i) => sum + flow / Math.pow(1 + rate, i),\n      0\n    );\n    const derivative = cashFlows.reduce(\n      (sum, flow, i) =>\n        sum - (i * flow) / Math.pow(1 + rate, i + 1),\n      0\n    );\n    \n    const newRate = rate - npv / derivative;\n    \n    if (Math.abs(newRate - rate) < tolerance) {\n      return newRate;\n    }\n    \n    rate = newRate;\n    iteration++;\n  }\n  \n  throw new Error('IRR calculation did not converge');\n}; ","/**\n * 特殊数字相关函数\n * @packageDocumentation\n */\n\nimport { isPrime  } from './basic';\n\n\n/**\n * 生成斐波那契数列\n * @param n - 数列长度\n * @returns 斐波那契数列\n * @example\n * ```typescript\n * fibonacci(5) // [0, 1, 1, 2, 3]\n * ```\n */\nexport function fibonacci(n: number | null | undefined): number[] {\n  if (!n || n <= 0) return [];\n  if (n === 1) return [0];\n  if (n === 2) return [0, 1];\n\n  const result = [0, 1];\n  for (let i = 2; i < n; i++) {\n    result[i] = result[i - 1] + result[i - 2];\n  }\n  return result;\n}\n\n/**\n * 计算阶乘（使用 math.ts 中的实现）\n * @param n - 要计算阶乘的数\n * @returns 阶乘结果\n * @example\n * ```typescript\n * factorial(5) // 120\n * ```\n */\n\n/**\n * 判断是否为质数（使用 basic.ts 中的实现）\n * @param num - 要判断的数字\n * @returns 是否为质数\n * @example\n * ```typescript\n * isPrime(17) // true\n * isPrime(4) // false\n * ```\n */\n\n/**\n * 生成质数序列\n * @param start - 起始值\n * @param end - 结束值\n * @returns 质数序列\n * @example\n * ```typescript\n * primes(1, 10) // [2, 3, 5, 7]\n * ```\n */\nexport function primes(start: number | null | undefined, end: number | null | undefined): number[] {\n  if (start === null || start === undefined || end === null || end === undefined) return [];\n  if (start > end) return [];\n  \n  const result: number[] = [];\n  for (let i = start; i <= end; i++) {\n    if (isPrime(i)) {\n      result.push(i);\n    }\n  }\n  return result;\n}\n\n/**\n * 数学常数\n */\nexport const constants = {\n  /**\n   * 圆周率\n   */\n  PI: Math.PI,\n  /**\n   * 自然对数的底数\n   */\n  E: Math.E,\n  /**\n   * 黄金比例\n   */\n  PHI: (1 + Math.sqrt(5)) / 2,\n  /**\n   * 欧拉-马歇罗尼常数\n   */\n  GAMMA: 0.57721566490153286060651209008240243104215933593992,\n  /**\n   * 卡塔兰常数\n   */\n  CATALAN: 0.91596559417721901505460351493238411077414937428167,\n  /**\n   * 阿佩里常数\n   */\n  APERY: 1.20205690315959428539973816151144999076498629234049,\n  /**\n   * 孪生素数常数\n   */\n  TWIN_PRIME: 0.6601618158468695739278121100145557784326233602847334133194484233354056423,\n  /**\n   * 拉马努金-索尔德纳常数\n   */\n  RAMANUJAN_SOLDNER: 1.451369234883381050283968485892027449493032283648015322693192337,\n  /**\n   * 格罗斯曼常数\n   */\n  GROSCHMANN: 0.280169499023869133036436491230798000607242203228322835059757351,\n  /**\n   * 波特常数\n   */\n  PORTER: 1.46707807943397547289779848470722995344990327547776,\n  /**\n   * 自然对数的底数\n   */\n  LN2: Math.LN2,\n  /**\n   * 自然对数的底数\n   */\n  LN10: Math.LN10,\n  /**\n   * 以e为底的2的对数\n   */\n  LOG2E: Math.LOG2E,\n  /**\n   * 以e为底的10的对数\n   */\n  LOG10E: Math.LOG10E,\n  /**\n   * 1/2的平方根\n   */\n  SQRT1_2: Math.SQRT1_2,\n  /**\n   * 2的平方根\n   */\n  SQRT2: Math.SQRT2\n}; ","/**\n * 动画计算相关函数\n * @packageDocumentation\n */\n\n\n/**\n * 线性插值计算（使用 range.ts 中的实现）\n */\n\n/**\n * 缓动函数\n * @param t - 时间（0-1）\n * @param type - 缓动类型\n * @returns 缓动后的值\n * @example\n * ease(0.5, 'linear') // 0.5\n * ease(0.5, 'easeIn') // 0.25\n */\nexport function ease(t: number, type: 'linear' | 'easeIn' | 'easeOut' | 'easeInOut' = 'linear'): number {\n  switch (type) {\n    case 'linear':\n      return t;\n    case 'easeIn':\n      return t * t;\n    case 'easeOut':\n      return t * (2 - t);\n    case 'easeInOut':\n      return t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n    default:\n      return t;\n  }\n}\n\n/**\n * 弹簧动画\n * @param t - 时间（0-1）\n * @param options - 弹簧选项\n * @param options.tension - 张力，默认为170\n * @param options.friction - 摩擦力，默认为26\n * @returns 弹簧动画值\n * @example\n * spring(0.5) // 0.5\n * spring(0.5, { tension: 200, friction: 20 }) // 0.5\n */\nexport function spring(t: number, options: {\n  tension?: number;\n  friction?: number;\n} = {}): number {\n  const {\n    tension = 170,\n    friction = 26\n  } = options;\n\n  const damping = Math.sqrt(4 * tension * friction);\n  const frequency = Math.sqrt(tension) / (2 * Math.PI);\n  const decay = Math.exp(-damping * t / (2 * friction));\n\n  return 1 - decay * Math.cos(2 * Math.PI * frequency * t);\n}\n\n/**\n * 贝塞尔曲线\n * @param t - 时间（0-1）\n * @param p0 - 起点\n * @param p1 - 控制点1\n * @param p2 - 控制点2\n * @param p3 - 终点\n * @returns 贝塞尔曲线上的点\n * @example\n * bezier(0.5, 0, 0.5, 0.5, 1) // 0.5\n */\nexport function bezier(t: number, p0: number, p1: number, p2: number, p3: number): number {\n  const oneMinusT = 1 - t;\n  const oneMinusTSquared = oneMinusT * oneMinusT;\n  const oneMinusTCubed = oneMinusTSquared * oneMinusT;\n  const tSquared = t * t;\n  const tCubed = tSquared * t;\n\n  return (\n    oneMinusTCubed * p0 +\n    3 * oneMinusTSquared * t * p1 +\n    3 * oneMinusT * tSquared * p2 +\n    tCubed * p3\n  );\n}\n\n/**\n * 映射范围（使用 range.ts 中的实现）\n */","/**\n * 单位转换相关函数\n * @packageDocumentation\n */\n\n/**\n * 像素转rem\n * @param px - 像素值\n * @param baseFontSize - 基准字体大小\n * @returns rem值\n * @example\n * px2rem(16) // 1\n */\nexport const px2rem = (px: number | null | undefined, baseFontSize: number | null | undefined = 16): number => \n  (px ?? 0) / (baseFontSize ?? 16);\n\n/**\n * rem转像素\n * @param rem - rem值\n * @param baseFontSize - 基准字体大小\n * @returns 像素值\n * @example\n * rem2px(1) // 16\n */\nexport const rem2px = (rem: number | null | undefined, baseFontSize: number | null | undefined = 16): number => \n  (rem ?? 0) * (baseFontSize ?? 16);\n\n/**\n * 像素转vw\n * @param px - 像素值\n * @param viewportWidth - 视口宽度\n * @returns vw值\n * @example\n * px2vw(100) // 10\n */\nexport const px2vw = (px: number | null | undefined, viewportWidth: number | null | undefined = 1000): number => \n  ((px ?? 0) / (viewportWidth ?? 1000)) * 100;\n\n/**\n * vw转像素\n * @param vw - vw值\n * @param viewportWidth - 视口宽度\n * @returns 像素值\n * @example\n * vw2px(10) // 100\n */\nexport const vw2px = (vw: number | null | undefined, viewportWidth: number | null | undefined = 1000): number => \n  ((vw ?? 0) / 100) * (viewportWidth ?? 1000);\n\n/**\n * 像素转em\n * @param px - 像素值\n * @param baseFontSize - 基准字体大小\n * @returns em值\n * @example\n * px2em(16) // 1\n */\nexport const px2em = (px: number | null | undefined, baseFontSize: number | null | undefined = 16): number => \n  (px ?? 0) / (baseFontSize ?? 16);\n\n/**\n * em转像素\n * @param em - em值\n * @param baseFontSize - 基准字体大小\n * @returns 像素值\n * @example\n * em2px(1) // 16\n */\nexport const em2px = (em: number | null | undefined, baseFontSize: number | null | undefined = 16): number => \n  (em ?? 0) * (baseFontSize ?? 16);\n\n/**\n * 角度转弧度\n * @param degree - 角度\n * @returns 弧度\n * @example\n * degree2radian(180) // Math.PI\n */\nexport const degree2radian = (degree: number | null | undefined): number => \n  ((degree ?? 0) * Math.PI) / 180;\n\n/**\n * 弧度转角度\n * @param radian - 弧度\n * @returns 角度\n * @example\n * radian2degree(Math.PI) // 180\n */\nexport const radian2degree = (radian: number | null | undefined): number => \n  ((radian ?? 0) * 180) / Math.PI;\n\n/**\n * 字节转可读大小\n * @param bytes - 字节数\n * @param precision - 精度\n * @returns 可读大小\n * @example\n * byte2size(1024) // \"1.00 KB\"\n */\nexport const byte2size = (bytes: number | null | undefined, precision: number | null | undefined = 2): string => {\n  if (bytes === null || bytes === undefined) return '0.00 B';\n  \n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  const p = precision ?? 2;\n  \n  if (bytes === 0) return `0.${'0'.repeat(p)} B`;\n  \n  const i = Math.floor(Math.log(Math.abs(bytes)) / Math.log(1024));\n  const size = Math.abs(bytes) / Math.pow(1024, i);\n  \n  return `${size.toFixed(p)} ${units[i]}`;\n};\n\n/**\n * 可读大小转字节\n * @param size - 可读大小\n * @returns 字节数\n * @example\n * size2byte(\"1 KB\") // 1024\n */\nexport const size2byte = (size: string | null | undefined): number => {\n  if (!size) return 0;\n  \n  const units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];\n  const match = size.match(/^([\\d.]+)\\s*([A-Za-z]+)$/);\n  \n  if (!match) {\n    throw new Error('Invalid size format');\n  }\n  \n  const [, value, unit] = match;\n  const unitIndex = units.findIndex(u => u.toUpperCase() === unit.toUpperCase());\n  \n  if (unitIndex === -1) {\n    throw new Error('Invalid unit');\n  }\n  \n  return parseFloat(value) * Math.pow(1024, unitIndex);\n};\n\n/**\n * 摄氏度转华氏度\n * @param celsius - 摄氏度\n * @returns 华氏度\n * @example\n * celsius2fahrenheit(0) // 32\n */\nexport const celsius2fahrenheit = (celsius: number | null | undefined): number => \n  ((celsius ?? 0) * 9/5) + 32;\n\n/**\n * 华氏度转摄氏度\n * @param fahrenheit - 华氏度\n * @returns 摄氏度\n * @example\n * fahrenheit2celsius(32) // 0\n */\nexport const fahrenheit2celsius = (fahrenheit: number | null | undefined): number => \n  ((fahrenheit ?? 0) - 32) * 5/9;\n\n/**\n * 千克转磅\n * @param kg - 千克\n * @returns 磅\n * @example\n * kg2lb(1) // 2.20462\n */\nexport const kg2lb = (kg: number | null | undefined): number => \n  (kg ?? 0) * 2.20462;\n\n/**\n * 磅转千克\n * @param lb - 磅\n * @returns 千克\n * @example\n * lb2kg(1) // 0.453592\n */\nexport const lb2kg = (lb: number | null | undefined): number => \n  (lb ?? 0) * 0.453592;\n\n/**\n * 公里转英里\n * @param km - 公里\n * @returns 英里\n * @example\n * km2mile(1) // 0.621371\n */\nexport const km2mile = (km: number | null | undefined): number => \n  (km ?? 0) * 0.621371;\n\n/**\n * 英里转公里\n * @param mile - 英里\n * @returns 公里\n * @example\n * mile2km(1) // 1.60934\n */\nexport const mile2km = (mile: number | null | undefined): number => \n  (mile ?? 0) * 1.60934; ","/**\n * 性能优化相关函数\n * @packageDocumentation\n */\n\n/**\n * 优化数字精度\n * @param value - 要优化的数字\n * @param precision - 精度\n * @returns 优化后的数字\n * @example\n * optimizePrecision(1.23456789, 2) // 1.23\n */\nexport function optimizePrecision(value: number, precision: number): number {\n  return Number(value.toFixed(precision));\n}\n\n/**\n * 缓存计算结果\n * @param fn - 要缓存的函数\n * @returns 缓存后的函数\n * @example\n * const cachedFn = cache((x) => x * x);\n * cachedFn(2) // 4\n * cachedFn(2) // 4 (从缓存返回)\n */\nexport function cache<T extends (...args: any[]) => any>(fn: T): T {\n  const cache = new Map<string, ReturnType<T>>();\n  return ((...args: Parameters<T>) => {\n    const key = JSON.stringify(args);\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    const result = fn(...args);\n    cache.set(key, result);\n    return result;\n  }) as T;\n}\n\n/**\n * 节流函数\n * @param fn - 要节流的函数\n * @param wait - 等待时间（毫秒）\n * @returns 节流后的函数\n * @example\n * const throttledFn = throttle((x) => console.log(x), 1000);\n * throttledFn(1); // 立即执行\n * throttledFn(2); // 被节流\n */\nexport function throttle<T extends (...args: any[]) => any>(\n  fn: T,\n  wait: number\n): T {\n  let lastTime = 0;\n  return ((...args: Parameters<T>) => {\n    const now = Date.now();\n    if (now - lastTime >= wait) {\n      fn(...args);\n      lastTime = now;\n    }\n  }) as T;\n}\n\n/**\n * 优化四舍五入\n * @param value - 要优化的数字\n * @param decimals - 小数位数\n * @returns 优化后的数字\n * @example\n * optimizeRound(1.23456789, 2) // 1.23\n */\nexport function optimizeRound(value: number, decimals: number): number {\n  return Number(value.toFixed(decimals));\n}\n\n/**\n * 防抖函数\n * @param fn - 要防抖的函数\n * @param wait - 等待时间（毫秒）\n * @returns 防抖后的函数\n * @example\n * const debouncedFn = debounce((x) => console.log(x), 1000);\n * debouncedFn(1); // 延迟执行\n * debouncedFn(2); // 取消之前的执行\n */\nexport function debounce<T extends (...args: any[]) => any>(\n  fn: T,\n  wait: number\n): T {\n  let timeout: NodeJS.Timeout;\n  return ((...args: Parameters<T>) => {\n    clearTimeout(timeout);\n    timeout = setTimeout(() => fn(...args), wait);\n  }) as T;\n} ","/**\n * 数字范围工具函数\n * @packageDocumentation\n */\n\n/**\n * 将数字限制在指定范围内\n * @param value - 要限制的数字\n * @param min - 最小值\n * @param max - 最大值\n * @returns 限制后的数字\n * @example\n * clamp(5, 0, 10) // 5\n * clamp(-1, 0, 10) // 0\n * clamp(11, 0, 10) // 10\n */\nexport const clamp = (value: number, min: number, max: number): number => {\n  return Math.min(Math.max(value, min), max);\n};\n\n/**\n * 将数字四舍五入到指定小数位数\n * @param value - 要四舍五入的数字\n * @param decimals - 小数位数\n * @returns 四舍五入后的数字\n * @example\n * round(3.14159, 2) // 3.14\n */\nexport const round = (value: number, decimals: number = 0): number => {\n  const multiplier = Math.pow(10, decimals);\n  return Math.round(value * multiplier) / multiplier;\n};\n\n/**\n * 检查数字是否在指定范围内\n * @param value - 要检查的数字\n * @param min - 最小值\n * @param max - 最大值\n * @param inclusive - 是否包含边界值，默认为 true\n * @returns 是否在范围内\n * @example\n * inRange(5, 1, 10) // true\n * inRange(5, 1, 5, false) // false\n * inRange(5, 1, 5, true) // true\n */\nexport function inRange(value: number, min: number, max: number, inclusive: boolean = true): boolean {\n  if (isNaN(value) || isNaN(min) || isNaN(max)) {\n    return false;\n  }\n  return inclusive\n    ? value >= min && value <= max\n    : value > min && value < max;\n}\n\n/**\n * 线性插值计算\n * @param start - 起始值\n * @param end - 结束值\n * @param t - 插值因子（0-1）\n * @returns 插值结果\n * @example\n * lerp(0, 100, 0.5) // 50\n * lerp(0, 100, 0) // 0\n * lerp(0, 100, 1) // 100\n */\nexport function lerp(start: number, end: number, t: number): number {\n  if (isNaN(start) || isNaN(end) || isNaN(t)) {\n    return NaN;\n  }\n  t = Math.max(0, Math.min(1, t));\n  return start + t * (end - start);\n}\n\n/**\n * 将数字归一化到指定范围\n * @param value - 要归一化的数字\n * @param min - 最小值\n * @param max - 最大值\n * @param targetMin - 目标最小值，默认为0\n * @param targetMax - 目标最大值，默认为1\n * @returns 归一化后的数字\n * @example\n * normalize(5, 0, 10) // 0.5\n * normalize(5, 0, 10, 0, 100) // 50\n */\nexport function normalize(\n  value: number,\n  min: number,\n  max: number,\n  targetMin: number = 0,\n  targetMax: number = 1\n): number {\n  if (min === max) {\n    return targetMin;\n  }\n  return ((value - min) * (targetMax - targetMin)) / (max - min) + targetMin;\n} ","/**\n * 数字格式化工具函数\n * @packageDocumentation\n */\n\n/**\n * 将数字转换为货币格式\n * @param value - 要格式化的数字\n * @param locale - 地区设置\n * @param options - 格式化选项\n * @returns 格式化后的货币字符串\n * @example\n * toCurrency(1234.56) // '¥1,234.56'\n */\nexport const toCurrency = (\n  value: number,\n  locale: string = 'zh-CN',\n  options: Intl.NumberFormatOptions = {\n    style: 'currency',\n    currency: 'CNY'\n  }\n): string => {\n  return new Intl.NumberFormat(locale, options).format(value);\n};\n\n/**\n * 格式化数字\n * @param value - 要格式化的数字\n * @param locale - 地区设置\n * @param options - 格式化选项\n * @returns 格式化后的数字字符串\n * @example\n * formatNumber(1234.56) // '1,234.56'\n */\nexport const formatNumber = (\n  value: number,\n  locale: string = 'zh-CN',\n  options: Intl.NumberFormatOptions = {}\n): string => {\n  return new Intl.NumberFormat(locale, options).format(value);\n};\n\n/**\n * 将数字转换为固定小数位数\n * @param value - 要格式化的数字\n * @param digits - 小数位数\n * @returns 格式化后的数字字符串\n * @example\n * toFixed(1234.5678, 2) // '1234.57'\n */\nexport const toFixed = (value: number, digits: number): string => {\n  return value.toFixed(digits);\n};\n\n/**\n * 计算数字的精度\n * @param value - 要计算的数字\n * @returns 精度值\n * @example\n * precision(1234.5678) // 4\n */\nexport const precision = (value: number): number => {\n  return value.toString().split('.')[1]?.length || 0;\n};\n\n/**\n * 解析数字字符串为数字\n * @param value - 要解析的字符串\n * @param options - 解析选项\n * @param options.radix - 进制，默认为10\n * @param options.allowNaN - 是否允许NaN，默认为false\n * @param options.allowInfinity - 是否允许无穷大，默认为false\n * @returns 解析后的数字\n * @example\n * parse('123.45') // 123.45\n * parse('1,234.56') // 1234.56\n * parse('abc') // 0\n * parse('abc', { allowNaN: true }) // NaN\n */\nexport function parse(value: string, options: {\n  radix?: number;\n  allowNaN?: boolean;\n  allowInfinity?: boolean;\n} = {}): number {\n  const {\n    radix = 10,\n    allowNaN = false,\n    allowInfinity = false\n  } = options;\n\n  if (typeof value !== 'string') {\n    return allowNaN ? NaN : 0;\n  }\n\n  value = value.trim();\n  if (!value) {\n    return allowNaN ? NaN : 0;\n  }\n\n  // 移除千分位分隔符\n  value = value.replace(/,/g, '');\n\n  // 尝试解析数字\n  let result = Number(value);\n  if (isNaN(result)) {\n    result = parseInt(value, radix);\n  }\n\n  if (isNaN(result)) {\n    return allowNaN ? NaN : 0;\n  }\n\n  if (!isFinite(result) && !allowInfinity) {\n    return allowNaN ? NaN : 0;\n  }\n\n  return result;\n}\n\n/**\n * 将数字转换为百分比\n * @param value - 要转换的数字\n * @param options - 转换选项\n * @param options.precision - 保留的小数位数，默认为0\n * @param options.withSymbol - 是否包含百分号，默认为true\n * @returns 百分比字符串\n * @example\n * percentage(0.1234) // '12%'\n * percentage(0.1234, { precision: 2 }) // '12.34%'\n * percentage(0.1234, { withSymbol: false }) // '12'\n */\nexport function percentage(value: number, options: {\n  precision?: number;\n  withSymbol?: boolean;\n} = {}): string {\n  const {\n    precision = 0,\n    withSymbol = true\n  } = options;\n\n  if (isNaN(value) || !isFinite(value)) {\n    return withSymbol ? 'NaN%' : 'NaN';\n  }\n\n  const result = (value * 100).toFixed(precision);\n  return withSymbol ? `${result}%` : result;\n}\n\n/**\n * 将数字转换为科学计数法\n * @param value - 要转换的数字\n * @param options - 转换选项\n * @param options.precision - 保留的小数位数，默认为10\n * @param options.notation - 表示法类型，默认为'standard'\n * @returns 科学计数法字符串\n * @example\n * toScientific(1234567) // '1.234567e+6'\n * toScientific(1234567, { precision: 2 }) // '1.23e+6'\n */\nexport function toScientific(value: number, options: {\n  precision?: number;\n  notation?: 'standard' | 'engineering' | 'compact';\n} = {}): string {\n  const {\n    precision = 10,\n    notation = 'standard'\n  } = options;\n\n  if (isNaN(value) || !isFinite(value)) {\n    return value.toString();\n  }\n\n  const exp = Math.floor(Math.log10(Math.abs(value)));\n  const coefficient = value / Math.pow(10, exp);\n\n  if (notation === 'engineering') {\n    const engineeringExp = Math.floor(exp / 3) * 3;\n    const engineeringCoeff = value / Math.pow(10, engineeringExp);\n    return `${engineeringCoeff.toFixed(precision)}e${engineeringExp}`;\n  }\n\n  if (notation === 'compact') {\n    const compactExp = Math.floor(exp / 3) * 3;\n    const compactCoeff = value / Math.pow(10, compactExp);\n    const suffix = ['', 'K', 'M', 'B', 'T', 'Qa', 'Qi', 'Sx', 'Sp', 'Oc'][Math.floor(compactExp / 3)] || `e${compactExp}`;\n    return `${compactCoeff.toFixed(precision)}${suffix}`;\n  }\n\n  return `${coefficient.toFixed(precision)}e${exp}`;\n}\n\n/**\n * 将数字转换为中文数字\n * @param value - 要转换的数字\n * @param options - 转换选项\n * @param options.useTraditional - 是否使用繁体字，默认为false\n * @param options.useCapital - 是否使用大写，默认为false\n * @returns 中文数字字符串\n * @example\n * toChineseNumber(1234) // '一千二百三十四'\n * toChineseNumber(1234, { useTraditional: true }) // '一千二百三十四'\n * toChineseNumber(1234, { useCapital: true }) // '壹仟贰佰叁拾肆'\n */\nexport function toChineseNumber(value: number, options: {\n  useTraditional?: boolean;\n  useCapital?: boolean;\n} = {}): string {\n  const {\n    useTraditional = false,\n    useCapital = false\n  } = options;\n\n  const digits = useTraditional\n    ? ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九']\n    : ['零', '一', '二', '三', '四', '五', '六', '七', '八', '九'];\n\n  const units = useTraditional\n    ? ['', '十', '百', '千', '万', '十万', '百万', '千万', '亿']\n    : ['', '十', '百', '千', '万', '十万', '百万', '千万', '亿'];\n\n  if (useCapital) {\n    for (let i = 0; i < digits.length; i++) {\n      digits[i] = digits[i].replace(/[零一二三四五六七八九]/g, (match) => {\n        const map: Record<string, string> = {\n          '零': '零',\n          '一': '壹',\n          '二': '贰',\n          '三': '叁',\n          '四': '肆',\n          '五': '伍',\n          '六': '陆',\n          '七': '柒',\n          '八': '捌',\n          '九': '玖'\n        };\n        return map[match];\n      });\n    }\n    for (let i = 0; i < units.length; i++) {\n      units[i] = units[i].replace(/[十百千万亿]/g, (match) => {\n        const map: Record<string, string> = {\n          '十': '拾',\n          '百': '佰',\n          '千': '仟',\n          '万': '万',\n          '亿': '亿'\n        };\n        return map[match];\n      });\n    }\n  }\n\n  if (value === 0) return digits[0];\n\n  const parts: string[] = [];\n  let num = Math.abs(value);\n  let unitIndex = 0;\n\n  while (num > 0) {\n    const digit = num % 10;\n    const unit = units[unitIndex];\n    let part = '';\n\n    if (digit !== 0) {\n      part = digits[digit] + unit;\n    } else if (unitIndex > 0 && parts[0] && parts[0][0] !== digits[0]) {\n      part = digits[0];\n    }\n\n    parts.unshift(part);\n    num = Math.floor(num / 10);\n    unitIndex++;\n  }\n\n  return parts.join('').replace(/(零+)/g, '零').replace(/零$/, '');\n} ","/**\n * 进制转换工具函数\n * @packageDocumentation\n */\n\n/**\n * 获取数字的二进制表示\n * @param value - 数字\n * @returns 二进制表示\n * @example\n * toBinary(123) // '1111011'\n */\nexport const toBinary = (value: number): string => \n  value.toString(2);\n\n/**\n * 获取数字的八进制表示\n * @param value - 数字\n * @returns 八进制表示\n * @example\n * toOctal(123) // '173'\n */\nexport const toOctal = (value: number): string => \n  value.toString(8);\n\n/**\n * 获取数字的十六进制表示\n * @param value - 数字\n * @returns 十六进制表示\n * @example\n * toHex(123) // '7b'\n */\nexport const toHex = (value: number): string => \n  value.toString(16);\n\n/**\n * 将二进制字符串转换为数字\n * @param value - 二进制字符串\n * @returns 数字\n * @example\n * fromBinary('1111011') // 123\n */\nexport const fromBinary = (value: string): number => \n  parseInt(value, 2);\n\n/**\n * 将八进制字符串转换为数字\n * @param value - 八进制字符串\n * @returns 数字\n * @example\n * fromOctal('173') // 123\n */\nexport const fromOctal = (value: string): number => \n  parseInt(value, 8);\n\n/**\n * 将十六进制字符串转换为数字\n * @param value - 十六进制字符串\n * @returns 数字\n * @example\n * fromHex('7b') // 123\n */\nexport const fromHex = (value: string): number => \n  parseInt(value, 16); ","/**\n * 深度合并对象的选项接口\n */\nexport interface DeepMergeOptions {\n  /**\n   * 数组合并模式\n   * - 'replace': 替换模式（默认）\n   * - 'concat': 连接模式\n   * - 'merge': 合并模式\n   */\n  arrayMode?: 'replace' | 'concat' | 'merge';\n  /**\n   * 是否克隆源对象\n   */\n  clone?: boolean;\n  /**\n   * 自定义合并函数\n   */\n  customMerge?: (key: string, target: any, source: any) => any;\n}\n\n/**\n * 判断是否为对象\n * @param value - 要检查的值\n * @returns 如果是对象则返回 true，否则返回 false\n */\nfunction isObject(value: unknown): value is Record<string, any> {\n  return value !== null && typeof value === 'object' && !Array.isArray(value);\n}\n\n/**\n * 深度克隆对象\n * @param obj - 要克隆的对象\n * @returns 克隆后的对象\n */\nfunction deepClone<T>(obj: T): T {\n  if (!obj || typeof obj !== 'object') {\n    return obj;\n  }\n  return JSON.parse(JSON.stringify(obj));\n}\n\n/**\n * 深度合并两个对象\n * @param target - 目标对象\n * @param source - 源对象\n * @param options - 合并选项\n * @returns 合并后的对象\n */\nfunction deepMergeTwo<T extends Record<string, any>>(\n  target: T | Record<string, any>,\n  source: Partial<T> | Record<string, any>,\n  options: DeepMergeOptions = {}\n): T {\n  if (!isObject(source)) {\n    return target as T;\n  }\n\n  const result = options.clone ? deepClone(target) : { ...target };\n\n  for (const key in source) {\n    if (Object.prototype.hasOwnProperty.call(source, key)) {\n      const targetValue = result[key];\n      const sourceValue = source[key];\n\n      if (options.customMerge) {\n        const customValue = options.customMerge(key, targetValue, sourceValue);\n        if (customValue !== undefined) {\n          result[key] = customValue;\n          continue;\n        }\n      }\n\n      if (Array.isArray(targetValue) && Array.isArray(sourceValue)) {\n        switch (options.arrayMode) {\n          case 'concat':\n            result[key] = [...targetValue, ...sourceValue];\n            break;\n          case 'merge':\n            result[key] = targetValue.map((item: any, index: number) => {\n              if (index < sourceValue.length) {\n                return deepMergeTwo(item, sourceValue[index], options);\n              }\n              return item;\n            });\n            break;\n          default:\n            result[key] = deepClone(sourceValue);\n        }\n      } else if (isObject(targetValue) && isObject(sourceValue)) {\n        result[key] = deepMergeTwo(targetValue, sourceValue, options);\n      } else {\n        result[key] = deepClone(sourceValue);\n      }\n    }\n  }\n\n  return result as T;\n}\n\n/**\n * 深度合并对象\n * @param target - 目标对象\n * @param source - 源对象\n * @param rest - 其他对象和选项\n * @returns 合并后的对象\n */\nexport function deepMerge<T extends Record<string, any>>(\n  target?: T | Record<string, any>,\n  source?: Partial<T> | Record<string, any>,\n  ...rest: Array<Partial<T> | Record<string, any> | DeepMergeOptions>\n): T {\n  if (!target) {\n    return {} as T;\n  }\n\n  if (!source) {\n    return deepClone(target) as T;\n  }\n\n  if (!isObject(target)) {\n    return target as T;\n  }\n\n  const options: DeepMergeOptions = rest.length > 0 && isObject(rest[rest.length - 1]) && !Array.isArray(rest[rest.length - 1])\n    ? rest.pop() as DeepMergeOptions\n    : {};\n\n  let result = deepMergeTwo(target, source, options);\n\n  const remainingObjects = rest.filter(obj => isObject(obj)) as Array<Partial<T>>;\n  for (const obj of remainingObjects) {\n    result = deepMergeTwo(result, obj, options);\n  }\n\n  return result;\n}","/**\n * 深拷贝对象或数组，创建一个完全独立的副本\n * \n * @param obj - 要深拷贝的对象或数组\n * @returns 深拷贝后的对象或数组\n * @example\n * ```ts\n * // 基本用法\n * const original = { \n *   name: '张三', \n *   age: 30,\n *   address: { city: '北京', district: '海淀' },\n *   hobbies: ['阅读', '旅行'] \n * };\n * \n * const copy = deepClone(original);\n * copy.address.city = '上海';\n * copy.hobbies.push('游泳');\n * \n * console.log(original.address.city); // 输出: '北京'\n * console.log(original.hobbies); // 输出: ['阅读', '旅行']\n * \n * // 处理循环引用\n * const obj: any = { name: '张三' };\n * obj.self = obj;\n * const cloned = deepClone(obj);\n * console.log(cloned.self === cloned); // 输出: true\n * ```\n */\nexport function deepClone<T>(obj: T): T {\n  // 处理基本类型或null、undefined\n  if (obj === null || typeof obj !== 'object') {\n    return obj;\n  }\n  \n  // 处理日期对象\n  if (obj instanceof Date) {\n    return new Date(obj.getTime()) as unknown as T;\n  }\n  \n  // 处理正则表达式\n  if (obj instanceof RegExp) {\n    return new RegExp(obj.source, obj.flags) as unknown as T;\n  }\n  \n  // 处理Map\n  if (obj instanceof Map) {\n    const copy = new Map();\n    const weakMap = new WeakMap(); // 用于处理循环引用\n    weakMap.set(obj as object, copy as object);\n    \n    obj.forEach((value, key) => {\n      // 如果值是对象，需要递归深拷贝\n      if (typeof value === 'object' && value !== null) {\n        if (weakMap.has(value as object)) {\n          copy.set(key, weakMap.get(value as object));\n        } else {\n          const valueCopy = deepClone(value);\n          weakMap.set(value as object, valueCopy as object);\n          copy.set(key, valueCopy);\n        }\n      } else {\n        copy.set(key, value);\n      }\n    });\n    \n    return copy as unknown as T;\n  }\n  \n  // 处理Set\n  if (obj instanceof Set) {\n    const copy = new Set();\n    const weakMap = new WeakMap(); // 用于处理循环引用\n    weakMap.set(obj as object, copy as object);\n    \n    obj.forEach(value => {\n      // 如果值是对象，需要递归深拷贝\n      if (typeof value === 'object' && value !== null) {\n        if (weakMap.has(value as object)) {\n          copy.add(weakMap.get(value as object));\n        } else {\n          const valueCopy = deepClone(value);\n          weakMap.set(value as object, valueCopy as object);\n          copy.add(valueCopy);\n        }\n      } else {\n        copy.add(value);\n      }\n    });\n    \n    return copy as unknown as T;\n  }\n  \n  // 创建一个新的对象或数组\n  const result: any = Array.isArray(obj) ? [] : {};\n  \n  // 使用WeakMap来处理循环引用\n  const weakMap = new WeakMap();\n  weakMap.set(obj as object, result);\n  \n  // 递归拷贝所有属性\n  for (const key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) {\n      const value = obj[key];\n      \n      // 如果是对象且不为null，则递归深拷贝\n      if (typeof value === 'object' && value !== null) {\n        // 检查是否已经拷贝过该对象（处理循环引用）\n        if (weakMap.has(value)) {\n          result[key] = weakMap.get(value);\n        } else {\n          result[key] = deepClone(value);\n          weakMap.set(value, result[key]);\n        }\n      } else {\n        // 基本类型直接赋值\n        result[key] = value;\n      }\n    }\n  }\n  \n  return result as T;\n} ","/**\n * 根据路径获取对象中的值，支持点表示法和数组路径\n * \n * @param obj - 要获取值的对象\n * @param path - 路径字符串或路径数组\n * @param defaultValue - 当路径不存在时返回的默认值\n * @returns 路径对应的值或默认值\n * @example\n * ```ts\n * // 基本用法 - 点表示法\n * const obj = { a: { b: { c: 42 } } };\n * get(obj, 'a.b.c');          // 返回: 42\n * get(obj, 'a.b');            // 返回: { c: 42 }\n * get(obj, 'a.x.y', 'none');  // 返回: 'none'\n * \n * // 使用数组路径\n * get(obj, ['a', 'b', 'c']);  // 返回: 42\n * \n * // 数组索引\n * const arr = { users: [{ name: '张三' }, { name: '李四' }] };\n * get(arr, 'users[1].name');  // 返回: '李四'\n * get(arr, ['users', 1, 'name']); // 返回: '李四'\n * ```\n */\nexport function get<T = any>(\n  obj: any,\n  path: string | (string | number)[],\n  defaultValue?: T\n): T {\n  // 如果对象为null或undefined，直接返回默认值\n  if (obj == null) {\n    return defaultValue as T;\n  }\n  \n  let result = obj;\n  const keys = Array.isArray(path) ? path : parsePath(path);\n  \n  for (let i = 0; i < keys.length; i++) {\n    if (result == null) {\n      return defaultValue as T;\n    }\n    \n    result = result[keys[i]];\n  }\n  \n  return result === undefined ? defaultValue as T : result;\n}\n\n/**\n * 解析路径字符串为路径数组\n * \n * @param path - 路径字符串\n * @returns 路径数组\n */\nfunction parsePath(path: string): (string | number)[] {\n  // 处理空路径\n  if (!path) {\n    return [];\n  }\n  \n  // 匹配点表示法和数组表示法 \n  // 例如: \"a.b[0].c\" => [\"a\", \"b\", 0, \"c\"]\n  const result: (string | number)[] = [];\n  const segments = path.replace(/\\[(\\w+)\\]/g, '.$1').split('.');\n  \n  for (const segment of segments) {\n    if (segment) {\n      // 如果是数字，转换为数字类型\n      const parsed = parseInt(segment, 10);\n      if (!isNaN(parsed) && parsed.toString() === segment) {\n        result.push(parsed);\n      } else {\n        result.push(segment);\n      }\n    }\n  }\n  \n  return result;\n}\n\n/**\n * 根据路径获取对象中的值\n * @param obj - 源对象\n * @param path - 路径，可以是字符串（用点号分隔）或字符串数组\n * @returns 路径对应的值，如果路径不存在则返回 undefined\n * @example\n * ```ts\n * const obj = { a: { b: { c: 1 } } };\n * getValueByPath(obj, 'a.b.c'); // 1\n * getValueByPath(obj, ['a', 'b', 'c']); // 1\n * getValueByPath(obj, 'a.d.e'); // undefined\n * ```\n */\nexport const getValueByPath = <T = any>(\n  obj: Record<string, any>,\n  path: string | string[]\n): T | undefined => {\n  if (!obj || !path) {\n    return undefined;\n  }\n\n  const segments = Array.isArray(path) ? path : path.split('.');\n  let current = obj;\n\n  for (const segment of segments) {\n    if (current === null || current === undefined || typeof current !== 'object') {\n      return undefined;\n    }\n    current = current[segment];\n  }\n\n  return current as T;\n}; ","/**\n * 深度比较两个值是否相等\n * \n * @param value - 第一个要比较的值\n * @param other - 第二个要比较的值\n * @returns 如果两个值深度相等则返回true，否则返回false\n * @example\n * ```ts\n * // 基本类型比较\n * isEqual(1, 1);                      // 返回: true\n * isEqual('a', 'a');                  // 返回: true\n * isEqual(null, null);                // 返回: true\n * isEqual(undefined, undefined);      // 返回: true\n * isEqual(NaN, NaN);                  // 返回: true\n * \n * // 对象比较\n * isEqual({a: 1, b: 2}, {a: 1, b: 2}); // 返回: true\n * isEqual({a: 1, b: 2}, {b: 2, a: 1}); // 返回: true (属性顺序不影响结果)\n * isEqual({a: 1}, {a: '1'});           // 返回: false\n * \n * // 数组比较\n * isEqual([1, 2, 3], [1, 2, 3]);      // 返回: true\n * isEqual([1, 2, 3], [3, 2, 1]);      // 返回: false\n * \n * // 嵌套对象比较\n * isEqual(\n *   {a: 1, b: {c: 3}}, \n *   {a: 1, b: {c: 3}}\n * );  // 返回: true\n * \n * // Set比较\n * isEqual(new Set([1, 2, 3]), new Set([1, 2, 3])); // 返回: true\n * isEqual(new Set([1, 2, 3]), new Set([3, 2, 1])); // 返回: true (Set元素顺序不影响结果)\n * \n * // Map比较\n * isEqual(\n *   new Map([['a', 1], ['b', 2]]), \n *   new Map([['a', 1], ['b', 2]])\n * ); // 返回: true\n * \n * // 混合类型比较\n * isEqual(\n *   { a: 1, b: [1, 2, { c: new Set([1, 2]) }] },\n *   { a: 1, b: [1, 2, { c: new Set([1, 2]) }] }\n * ); // 返回: true\n * ```\n */\nexport function isEqual(value: any, other: any): boolean {\n  // 如果引用相同，直接返回true\n  if (value === other) {\n    return true;\n  }\n  \n  // 处理null或undefined的情况\n  if (value == null || other == null) {\n    return value === other;\n  }\n  \n  // 处理NaN的情况\n  if (Number.isNaN(value) && Number.isNaN(other)) {\n    return true;\n  }\n  \n  // 如果类型不同，直接返回false\n  if (typeof value !== typeof other) {\n    return false;\n  }\n  \n  // 处理日期对象\n  if (value instanceof Date && other instanceof Date) {\n    return value.getTime() === other.getTime();\n  }\n  \n  // 处理正则表达式\n  if (value instanceof RegExp && other instanceof RegExp) {\n    return value.toString() === other.toString();\n  }\n  \n  // 处理函数\n  if (typeof value === 'function' && typeof other === 'function') {\n    return value.toString() === other.toString();\n  }\n  \n  // 处理Set\n  if (value instanceof Set && other instanceof Set) {\n    if (value.size !== other.size) {\n      return false;\n    }\n    \n    // 将Set转为数组以便比较\n    const valueArray = Array.from(value);\n    const otherArray = Array.from(other);\n    \n    // 检查每个元素是否在另一个Set中存在且相等\n    return valueArray.every(item => \n      otherArray.some(otherItem => isEqual(item, otherItem))\n    );\n  }\n  \n  // 处理Map\n  if (value instanceof Map && other instanceof Map) {\n    if (value.size !== other.size) {\n      return false;\n    }\n    \n    // 检查所有键值对\n    for (const [key, val] of value.entries()) {\n      // 检查键是否存在\n      if (!other.has(key)) {\n        return false;\n      }\n      \n      // 递归比较值\n      if (!isEqual(val, other.get(key))) {\n        return false;\n      }\n    }\n    \n    return true;\n  }\n  \n  // 处理数组\n  if (Array.isArray(value) && Array.isArray(other)) {\n    if (value.length !== other.length) {\n      return false;\n    }\n    \n    for (let i = 0; i < value.length; i++) {\n      if (!isEqual(value[i], other[i])) {\n        return false;\n      }\n    }\n    \n    return true;\n  }\n  \n  // 处理普通对象\n  if (typeof value === 'object' && typeof other === 'object') {\n    const valueKeys = Object.keys(value);\n    const otherKeys = Object.keys(other);\n    \n    if (valueKeys.length !== otherKeys.length) {\n      return false;\n    }\n    \n    // 检查所有属性名是否存在\n    for (const key of valueKeys) {\n      if (!Object.prototype.hasOwnProperty.call(other, key)) {\n        return false;\n      }\n    }\n    \n    // 递归比较所有属性值\n    for (const key of valueKeys) {\n      if (!isEqual(value[key], other[key])) {\n        return false;\n      }\n    }\n    \n    return true;\n  }\n  \n  // 其他情况\n  return value === other;\n} ","/**\n * 从对象中排除指定的属性，返回新对象\n * @param obj 源对象\n * @param keys 要排除的属性名数组，支持点号路径\n * @returns 新对象\n * @example\n * ```ts\n * const obj = { a: 1, b: { c: 2, d: 3 }, e: 4 };\n * omit(obj, ['a', 'b.c']); // { b: { d: 3 }, e: 4 }\n * ```\n */\nexport function omit<T extends Record<string, any>, K extends (keyof T | string)[]>(\n  obj: T,\n  keys: K\n): Partial<T> {\n  if (!obj || typeof obj !== 'object') {\n    return {} as Partial<T>;\n  }\n  \n  const result = { ...obj };\n  \n  for (const key of keys) {\n    if (key in result) {\n      delete result[key];\n    }\n  }\n  \n  return result as Partial<T>;\n} ","/**\n * 从对象中选取指定的属性，创建一个新对象\n * \n * @param obj - 源对象，可以为 null 或 undefined\n * @param keys - 要选取的属性名数组\n * @returns 包含选定属性的新对象，如果源对象为 null 或 undefined，则返回空对象\n * @example\n * ```ts\n * // 基本用法\n * const user = { id: 1, name: '张三', age: 30, email: 'zhangsan@example.com' };\n * \n * const userBasic = pick(user, ['id', 'name']);\n * console.log(userBasic); // 输出: { id: 1, name: '张三' }\n * \n * // 处理不存在的属性\n * const result = pick(user, ['id', 'role']);\n * console.log(result); // 输出: { id: 1 }\n * \n * // 处理 null 或 undefined\n * const nullResult = pick(null, ['id']);\n * console.log(nullResult); // 输出: {}\n * ```\n */\nexport function pick<T extends object | null | undefined, K extends keyof NonNullable<T>>(\n  obj: T,\n  keys: K[]\n): T extends object ? Pick<T, K> : Record<string, never> {\n  if (!obj || typeof obj !== 'object') {\n    return {} as T extends object ? Pick<T, K> : Record<string, never>;\n  }\n  \n  return keys.reduce((result, key) => {\n    if (key in obj) {\n      (result as any)[key] = (obj as any)[key];\n    }\n    return result;\n  }, {} as T extends object ? Pick<T, K> : Record<string, never>);\n} ","/**\n * 根据路径设置对象中的值，支持点表示法和数组路径\n * \n * @param obj - 要设置值的对象\n * @param path - 路径字符串或路径数组\n * @param value - 要设置的值\n * @returns 修改后的原始对象\n * @example\n * ```ts\n * // 基本用法 - 点表示法\n * const obj = { a: { b: { c: 42 } } };\n * set(obj, 'a.b.c', 100);           // obj.a.b.c 变为 100\n * set(obj, 'a.x.y', 'hello');       // 创建不存在的路径，obj.a.x.y 变为 'hello'\n * \n * // 使用数组路径\n * set(obj, ['a', 'b', 'd'], true);  // obj.a.b.d 变为 true\n * \n * // 数组索引\n * const arr = { users: [{ name: '张三' }, { name: '李四' }] };\n * set(arr, 'users[1].name', '王五'); // arr.users[1].name 变为 '王五'\n * set(arr, ['users', 1, 'name'], '王五'); // 同上\n * \n * // 创建数组\n * const data = {};\n * set(data, 'items[0]', 'first');    // data 变为 { items: ['first'] }\n * ```\n */\nexport function set<T extends object>(\n  obj: T,\n  path: string | (string | number)[],\n  value: any\n): T {\n  if (!obj || typeof obj !== 'object') {\n    return obj;\n  }\n  \n  const keys = Array.isArray(path) ? path : parsePath(path);\n  \n  if (keys.length === 0) {\n    return obj;\n  }\n  \n  let current: any = obj;\n  const lastIndex = keys.length - 1;\n  \n  // 遍历路径，直到倒数第二个键\n  for (let i = 0; i < lastIndex; i++) {\n    const key = keys[i];\n    \n    // 如果当前节点不存在，根据下一个键的类型创建对象或数组\n    if (current[key] == null) {\n      // 如果下一个键是数字，创建数组，否则创建对象\n      current[key] = typeof keys[i + 1] === 'number' ? [] : {};\n    }\n    \n    current = current[key];\n  }\n  \n  // 设置最后一个键的值\n  current[keys[lastIndex]] = value;\n  \n  return obj;\n}\n\n/**\n * 解析路径字符串为路径数组\n * \n * @param path - 路径字符串\n * @returns 路径数组\n */\nfunction parsePath(path: string): (string | number)[] {\n  // 处理空路径\n  if (!path) {\n    return [];\n  }\n  \n  // 匹配点表示法和数组表示法 \n  // 例如: \"a.b[0].c\" => [\"a\", \"b\", 0, \"c\"]\n  const result: (string | number)[] = [];\n  const segments = path.replace(/\\[(\\w+)\\]/g, '.$1').split('.');\n  \n  for (const segment of segments) {\n    if (segment) {\n      // 如果是数字，转换为数字类型\n      const parsed = parseInt(segment, 10);\n      if (!isNaN(parsed) && parsed.toString() === segment) {\n        result.push(parsed);\n      } else {\n        result.push(segment);\n      }\n    }\n  }\n  \n  return result;\n} ","/**\n * localStorage 操作工具函数\n * 包含设置、获取、删除 localStorage 数据的功能\n * @packageDocumentation\n */\n\n/**\n * 检查浏览器是否支持 localStorage\n * \n * @returns 如果支持返回 true，否则返回 false\n */ \nexport function isLocalStorageSupported(): boolean {\n    try {\n        const testKey = '__test_support__';\n        localStorage.setItem(testKey, testKey);\n        const result = localStorage.getItem(testKey) === testKey;\n        localStorage.removeItem(testKey);\n        return result;\n    } catch (error) {\n        return false;\n    }\n}\n\n/**\n * 获取 localStorage 数据\n * \n * @param key - 要获取数据的键名\n * @returns 获取到的数据\n */ \nexport function getLocalStorage<T>(key: string, defaultValue: T): T {\n    if (!isLocalStorageSupported()) {\n        return defaultValue;\n    }\n    const value = localStorage.getItem(key);\n    return value ? JSON.parse(value) : defaultValue;\n}   \n\n/**\n * 设置 localStorage 数据\n * \n * @param key - 要设置数据的键名\n * @param value - 要设置的数据\n */ \nexport function setLocalStorage<T>(key: string, value: T): void {           \n    if (!isLocalStorageSupported()) {\n        return;\n    }\n    localStorage.setItem(key, JSON.stringify(value));\n}\n\n/**\n * 删除 localStorage 数据\n * \n * @param key - 要删除数据的键名\n */ \nexport function removeLocalStorage(key: string): void { \n    if (!isLocalStorageSupported()) {\n        return;\n    }\n    localStorage.removeItem(key);\n}           \n\n/**\n * 清除 localStorage 所有数据\n */ \nexport function clearLocalStorage(): void {\n    if (!isLocalStorageSupported()) {\n        return;\n    }\n    localStorage.clear();\n}\n\n/**\n * 获取 localStorage 所有数据\n * \n * @returns 获取到的所有数据，键值对对象\n */ \nexport function getAllLocalStorage(): Record<string, any> {\n    if (!isLocalStorageSupported()) {\n        return {};\n    }\n    return Object.fromEntries(Object.entries(localStorage));\n}\n\n/**\n * 获取 localStorage 数据数量\n * \n * @returns 获取到的数据数量\n */ \nexport function getLocalStorageLength(): number {\n    if (!isLocalStorageSupported()) {\n        return 0;\n    }\n    return localStorage.length;\n}\n\n/**\n * 获取 localStorage 所有键名\n * \n * @returns 获取到的所有键名\n */ \nexport function getAllLocalStorageKeys(): string[] {\n    if (!isLocalStorageSupported()) {\n        return [];\n    }\n    return Object.keys(localStorage);\n}\n\n/**\n * 获取 localStorage 所有值\n * \n * @returns 获取到的所有值数组\n * @example\n * ```ts\n * const allValues = getAllLocalStorageValues();\n * console.log('所有存储的值:', allValues);\n * ```\n */ \nexport function getAllLocalStorageValues(): any[] {\n    if (!isLocalStorageSupported()) {\n        return [];\n    }\n    return Object.values(localStorage);\n} ","/**\n * 会话存储(sessionStorage)相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 检查浏览器是否支持 sessionStorage\n * \n * @returns 如果支持返回 true，否则返回 false\n * @example\n * ```ts\n * if (isSessionStorageSupported()) {\n *   // 使用 sessionStorage\n * } else {\n *   // 使用备选方案\n * }\n * ```\n */\nexport function isSessionStorageSupported(): boolean {\n  try {\n    const testKey = '__test_support__';\n    sessionStorage.setItem(testKey, testKey);\n    const result = sessionStorage.getItem(testKey) === testKey;\n    sessionStorage.removeItem(testKey);\n    return result;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * 从 sessionStorage 获取数据\n * \n * @param key - 存储的键名\n * @param defaultValue - 当键不存在时返回的默认值\n * @returns 存储的值或默认值\n * @example\n * ```ts\n * // 获取一个简单值\n * const tabId = getSessionStorage('currentTabId', '1');\n * \n * // 获取一个对象\n * const pageState = getSessionStorage('pageState', { scrollPos: 0 });\n * ```\n */\nexport function getSessionStorage<T>(key: string, defaultValue: T): T {\n  if (!isSessionStorageSupported()) {\n    return defaultValue;\n  }\n\n  try {\n    const item = sessionStorage.getItem(key);\n    if (item === null) {\n      return defaultValue;\n    }\n\n    return JSON.parse(item) as T;\n  } catch (e) {\n    console.error('从 sessionStorage 获取数据失败', e);\n    return defaultValue;\n  }\n}\n\n/**\n * 将数据存储到 sessionStorage\n * \n * @param key - 存储的键名\n * @param value - 要存储的值\n * @returns 存储是否成功\n * @example\n * ```ts\n * // 存储一个简单值\n * setSessionStorage('currentTabId', '2');\n * \n * // 存储一个对象\n * setSessionStorage('pageState', { scrollPos: 250, activeSection: 'comments' });\n * ```\n */\nexport function setSessionStorage<T>(key: string, value: T): boolean {\n  if (!isSessionStorageSupported()) {\n    return false;\n  }\n\n  try {\n    sessionStorage.setItem(key, JSON.stringify(value));\n    return true;\n  } catch (e) {\n    console.error('存储数据到 sessionStorage 失败', e);\n    return false;\n  }\n}\n\n/**\n * 从 sessionStorage 中移除数据\n * \n * @param key - 要移除的键名\n * @returns 移除是否成功\n * @example\n * ```ts\n * // 移除一个存储项\n * removeSessionStorage('pageState');\n * ```\n */\nexport function removeSessionStorage(key: string): boolean {\n  if (!isSessionStorageSupported()) {\n    return false;\n  }\n\n  try {\n    sessionStorage.removeItem(key);\n    return true;\n  } catch (e) {\n    console.error('从 sessionStorage 移除数据失败', e);\n    return false;\n  }\n}\n\n/**\n * 清空所有 sessionStorage 数据\n * \n * @returns 清空是否成功\n * @example\n * ```ts\n * // 清空所有会话存储\n * clearSessionStorage();\n * ```\n */\nexport function clearSessionStorage(): boolean {\n  if (!isSessionStorageSupported()) {\n    return false;\n  }\n\n  try {\n    sessionStorage.clear();\n    return true;\n  } catch (e) {\n    console.error('清空 sessionStorage 失败', e);\n    return false;\n  }\n} ","/**\n * Cookie 操作相关工具函数\n * @packageDocumentation\n */\n\n/**\n * Cookie 选项配置\n */\nexport interface CookieOptions {\n  /** Cookie 过期时间（天） */\n  expires?: number;\n  /** Cookie 路径 */\n  path?: string;\n  /** Cookie 域名 */\n  domain?: string;\n  /** 是否仅通过 HTTPS 传输 */\n  secure?: boolean;\n  /** 控制 Cookie 可通过哪些方式访问 */\n  sameSite?: 'strict' | 'lax' | 'none';\n}\n\n/**\n * 设置 Cookie\n * \n * @param name - Cookie 名称\n * @param value - Cookie 值\n * @param options - Cookie 选项\n * @example\n * ```ts\n * // 简单设置\n * setCookie('username', 'zhangsan');\n * \n * // 设置带有过期时间的 Cookie（7天后过期）\n * setCookie('rememberMe', 'true', { expires: 7 });\n * \n * // 设置安全的 Cookie\n * setCookie('authToken', 'xyz123', {\n *   expires: 1,\n *   path: '/',\n *   domain: 'example.com',\n *   secure: true,\n *   sameSite: 'strict'\n * });\n * ```\n */\nexport function setCookie(name: string, value: string, options: CookieOptions = {}): void {\n  // 基本 cookie 字符串\n  let cookieStr = `${encodeURIComponent(name)}=${encodeURIComponent(value)}`;\n  \n  // 添加过期时间\n  if (options.expires !== undefined) {\n    const expiresDate = new Date();\n    expiresDate.setDate(expiresDate.getDate() + options.expires);\n    cookieStr += `; expires=${expiresDate.toUTCString()}`;\n  }\n  \n  // 添加路径\n  if (options.path) {\n    cookieStr += `; path=${options.path}`;\n  }\n  \n  // 添加域名\n  if (options.domain) {\n    cookieStr += `; domain=${options.domain}`;\n  }\n  \n  // 添加安全标志\n  if (options.secure) {\n    cookieStr += '; secure';\n  }\n  \n  // 添加 SameSite\n  if (options.sameSite) {\n    cookieStr += `; samesite=${options.sameSite}`;\n  }\n  \n  // 设置 Cookie\n  document.cookie = cookieStr;\n}\n\n/**\n * 获取指定名称的 Cookie 值\n * \n * @param name - Cookie 名称\n * @returns Cookie 值，如果不存在则返回空字符串\n * @example\n * ```ts\n * // 获取用户名\n * const username = getCookie('username');\n * if (username) {\n *   console.log(`欢迎回来，${username}`);\n * }\n * ```\n */\nexport function getCookie(name: string): string {\n  const decodedCookie = decodeURIComponent(document.cookie);\n  const cookies = decodedCookie.split(';');\n  \n  const nameEQ = `${name}=`;\n  \n  for (let i = 0; i < cookies.length; i++) {\n    let cookie = cookies[i].trim();\n    if (cookie.indexOf(nameEQ) === 0) {\n      return cookie.substring(nameEQ.length, cookie.length);\n    }\n  }\n  \n  return '';\n}\n\n/**\n * 删除指定的 Cookie\n * \n * @param name - Cookie 名称\n * @param options - Cookie 选项（主要用于指定路径和域名）\n * @example\n * ```ts\n * // 简单删除\n * deleteCookie('username');\n * \n * // 删除带有特定路径和域名的 Cookie\n * deleteCookie('authToken', { path: '/', domain: 'example.com' });\n * ```\n */\nexport function deleteCookie(name: string, options: Pick<CookieOptions, 'path' | 'domain'> = {}): void {\n  // 设置过期时间为过去时间，以删除 Cookie\n  setCookie(name, '', {\n    ...options,\n    expires: -1\n  });\n}\n\n/**\n * 检查 Cookie 是否存在\n * \n * @param name - Cookie 名称\n * @returns 如果 Cookie 存在则返回 true，否则返回 false\n * @example\n * ```ts\n * if (hasCookie('authToken')) {\n *   // 用户已登录\n * } else {\n *   // 重定向到登录页\n * }\n * ```\n */\nexport function hasCookie(name: string): boolean {\n  return getCookie(name) !== '';\n}\n\n/**\n * 获取所有 Cookie，以对象形式返回\n * \n * @returns 包含所有 Cookie 的对象\n * @example\n * ```ts\n * const allCookies = getAllCookies();\n * console.log('当前站点的所有 Cookie:', allCookies);\n * ```\n */\nexport function getAllCookies(): Record<string, string> {\n  const result: Record<string, string> = {};\n  const decodedCookie = decodeURIComponent(document.cookie);\n  \n  if (!decodedCookie) {\n    return result;\n  }\n  \n  const cookies = decodedCookie.split(';');\n  \n  for (let i = 0; i < cookies.length; i++) {\n    const cookie = cookies[i].trim();\n    const separatorIndex = cookie.indexOf('=');\n    \n    if (separatorIndex > 0) {\n      const name = cookie.substring(0, separatorIndex);\n      const value = cookie.substring(separatorIndex + 1);\n      result[name] = value;\n    }\n  }\n  \n  return result;\n} ","/**\n * 基础字符串操作工具函数\n * @packageDocumentation\n */\n\n/**\n * 判断字符串是否为空\n * @param str - 要检查的字符串\n * @returns 是否为空\n * @example\n * ```ts\n * isEmpty(''); // true\n * isEmpty(' '); // false\n * isEmpty(null); // true\n * isEmpty(undefined); // true\n * ```\n */\nexport function isEmpty(str: string | null | undefined): boolean {\n  return str === null || str === undefined || str.trim().length === 0;\n}\n\n/**\n * 判断字符串是否非空\n * @param str - 要检查的字符串\n * @returns 是否非空\n * @example\n * ```ts\n * isNotEmpty(''); // false\n * isNotEmpty(' '); // true\n * isNotEmpty('hello'); // true\n * ```\n */\nexport function isNotEmpty(str: string | null | undefined): boolean {\n  return !isEmpty(str);\n}\n\n/**\n * 获取字符串长度\n * @param str - 要获取长度的字符串\n * @returns 字符串长度\n * @example\n * ```ts\n * length('hello'); // 5\n * length('你好'); // 2\n * length(''); // 0\n * ```\n */\nexport function length(str: string | null | undefined): number {\n  if (!str || typeof str !== 'string') return 0;\n  return str.length;\n}\n\n/**\n * 反转字符串\n * @param str - 要反转的字符串\n * @returns 反转后的字符串\n * @example\n * ```ts\n * reverse('hello'); // 'olleh'\n * reverse('你好'); // '好你'\n * ```\n */\nexport function reverse(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.split('').reverse().join('');\n}\n\n/**\n * 重复字符串\n * @param str - 要重复的字符串\n * @param count - 重复次数\n * @returns 重复后的字符串\n * @example\n * ```ts\n * repeat('hello', 2); // 'hellohello'\n * repeat('a', 3); // 'aaa'\n * ```\n */\nexport function repeat(str: string | null | undefined, count: number): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.repeat(count);\n} ","/**\n * 字符串转换工具函数\n * @packageDocumentation\n */\n\n/**\n * 首字母大写\n * @param str - 要处理的字符串\n * @returns 首字母大写的字符串\n * @example\n * ```ts\n * capitalize('hello'); // 'Hello'\n * capitalize('hello world'); // 'Hello world'\n * ```\n */\nexport function capitalize(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n/**\n * 每个单词首字母大写\n * @param str - 要处理的字符串\n * @param delimiter - 单词分隔符，默认为空格\n * @returns 每个单词首字母大写的字符串\n * @example\n * ```ts\n * capitalizeWords('hello world'); // 'Hello World'\n * capitalizeWords('hello-world', '-'); // 'Hello-World'\n * ```\n */\nexport function capitalizeWords(str: string | null | undefined, delimiter: string = ' '): string {\n  if (!str || typeof str !== 'string') return '';\n  return str\n    .split(delimiter)\n    .map(word => capitalize(word))\n    .join(delimiter);\n}\n\n/**\n * 将连字符分隔的字符串转换为驼峰式\n * @param str - 要转换的字符串\n * @returns 驼峰式字符串\n * @example\n * ```ts\n * camelize('hello-world'); // 'helloWorld'\n * camelize('background-color'); // 'backgroundColor'\n * ```\n */\nexport function camelize(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.replace(/-([a-z])/g, (_, letter) => letter.toUpperCase());\n}\n\n/**\n * 将驼峰命名法转换为横线连接命名法\n * @param str - 要转换的字符串\n * @returns 横线连接命名字符串\n * @example\n * ```ts\n * dasherize('helloWorld'); // 'hello-world'\n * dasherize('backgroundColor'); // 'background-color'\n * ```\n */\nexport function dasherize(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  str = str.charAt(0).toLowerCase() + str.slice(1);\n  return str.replace(/([A-Z])/g, '-$1').toLowerCase();\n}\n\n/**\n * 转换为数字\n * @param str - 要转换的字符串\n * @returns 转换后的数字\n * @example\n * ```ts\n * toNumber('123'); // 123\n * toNumber('12.34'); // 12.34\n * toNumber('abc'); // NaN\n * ```\n */\nexport function toNumber(str: string | null | undefined): number {\n  if (!str || typeof str !== 'string') return 0;\n  return Number(str);\n}\n\n/**\n * 转换为布尔值\n * @param str - 要转换的字符串\n * @returns 转换后的布尔值\n * @example\n * ```ts\n * toBoolean('true'); // true\n * toBoolean('false'); // false\n * toBoolean('1'); // true\n * toBoolean('0'); // false\n * ```\n */\nexport function toBoolean(str: string | null | undefined): boolean {\n  if (!str || typeof str !== 'string') return false;\n  const normalized = str.toLowerCase().trim();\n  return normalized === 'true' || normalized === '1' || normalized === 'yes';\n} ","/**\n * 字符串截取和填充工具函数\n * @packageDocumentation\n */\n\n/**\n * 截断字符串，超出指定长度的部分用省略号替代\n * @param str - 要处理的字符串\n * @param length - 最大长度\n * @param omission - 省略符号，默认为'...'\n * @param countingChineseCharsAsTwo - 是否将中文字符按两个字符计算，默认为false\n * @returns 处理后的字符串\n * @example\n * ```ts\n * truncate('Hello World', 5); // 'Hello...'\n * truncate('Hello World', 8, '…'); // 'Hello Wo…'\n * truncate('你好世界', 4); // '你好世界'\n * truncate('你好世界', 4, '...', true); // '你好...'\n * ```\n */\nexport function truncate(\n  str: string,\n  length: number,\n  omission: string = '...',\n  countingChineseCharsAsTwo: boolean = false\n): string {\n  if (!str || typeof str !== 'string') return '';\n  if (length <= 0) return '';\n  \n  let currentLength = 0;\n  let result = '';\n  \n  for (let i = 0; i < str.length; i++) {\n    const char = str[i];\n    const charLength = countingChineseCharsAsTwo && isChinese(char) ? 2 : 1;\n    \n    if (currentLength + charLength <= length) {\n      result += char;\n      currentLength += charLength;\n    } else {\n      return result + omission;\n    }\n  }\n  \n  return result;\n}\n\n/**\n * 左侧填充\n * @param str - 要填充的字符串\n * @param length - 目标长度\n * @param padStr - 填充字符，默认为空格\n * @returns 填充后的字符串\n * @example\n * ```ts\n * padStart('123', 5); // '  123'\n * padStart('123', 5, '0'); // '00123'\n * ```\n */\nexport function padStart(str: string, length: number, padStr: string = ' '): string {\n  return str.padStart(length, padStr);\n}\n\n/**\n * 右侧填充\n * @param str - 要填充的字符串\n * @param length - 目标长度\n * @param padStr - 填充字符，默认为空格\n * @returns 填充后的字符串\n * @example\n * ```ts\n * padEnd('123', 5); // '123  '\n * padEnd('123', 5, '0'); // '12300'\n * ```\n */\nexport function padEnd(str: string, length: number, padStr: string = ' '): string {\n  return str.padEnd(length, padStr);\n}\n\n/**\n * 从左侧截取\n * @param str - 要截取的字符串\n * @param length - 截取长度\n * @returns 截取后的字符串\n * @example\n * ```ts\n * left('Hello World', 5); // 'Hello'\n * left('你好世界', 2); // '你好'\n * ```\n */\nexport function left(str: string, length: number): string {\n  return str.substring(0, length);\n}\n\n/**\n * 从右侧截取\n * @param str - 要截取的字符串\n * @param length - 截取长度\n * @returns 截取后的字符串\n * @example\n * ```ts\n * right('Hello World', 5); // 'World'\n * right('你好世界', 2); // '世界'\n * ```\n */\nexport function right(str: string, length: number): string {\n  return str.substring(str.length - length);\n}\n\n/**\n * 检查字符是否为中文字符\n * @param char - 要检查的字符\n * @returns 是否为中文字符\n */\nfunction isChinese(char: string): boolean {\n  const charCode = char.charCodeAt(0);\n  return charCode >= 0x4e00 && charCode <= 0x9fa5;\n} ","/**\n * UUID 生成相关工具函数\n * @packageDocumentation\n */\n\n/**\n * 生成 UUID v4 (随机)\n * \n * 生成符合 RFC4122 v4 标准的 UUID\n * \n * @returns 生成的 UUID 字符串\n * @example\n * ```ts\n * // 生成 UUID\n * const id = uuid(); // 例如: '9b1deb4d-3b7d-4bad-9bdd-2b0d7b3dcb6d'\n * ```\n */\nexport function uuid(): string {\n  // 使用加密安全的随机数（如果可用）\n  let getRandomValues: (array: Uint8Array) => Uint8Array;\n  \n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    getRandomValues = (array) => crypto.getRandomValues(array);\n  } else if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {\n    getRandomValues = (array) => window.crypto.getRandomValues(array);\n  } else {\n    // 降级方案，使用Math.random()\n    getRandomValues = (array) => {\n      for (let i = 0; i < array.length; i++) {\n        array[i] = Math.floor(Math.random() * 256);\n      }\n      return array;\n    };\n  }\n  \n  // 创建 16 字节的随机数组\n  const buffer = new Uint8Array(16);\n  getRandomValues(buffer);\n  \n  // 设置 version (版本 4)\n  buffer[6] = (buffer[6] & 0x0f) | 0x40;\n  // 设置 variant (变种 1)\n  buffer[8] = (buffer[8] & 0x3f) | 0x80;\n  \n  // 转换为16进制字符串并添加连字符\n  let i = 0;\n  return (\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    '-' +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    '-' +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    '-' +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    '-' +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]] +\n    byteToHex[buffer[i++]]\n  );\n}\n\n/**\n * 生成指定长度的随机字符串ID\n * \n * @param length - ID的长度，默认为8\n * @param options - 配置选项\n * @param options.prefix - ID的前缀\n * @param options.charset - 使用的字符集，默认为字母和数字\n * @returns 生成的随机ID\n * @example\n * ```ts\n * // 生成默认长度(8)的随机ID\n * randomId(); // 例如: 'a1b2c3d4'\n * \n * // 生成指定长度的随机ID\n * randomId(16); // 例如: 'a1b2c3d4e5f6g7h8'\n * \n * // 带前缀的随机ID\n * randomId(8, { prefix: 'user_' }); // 例如: 'user_a1b2c3d4'\n * \n * // 使用自定义字符集\n * randomId(8, { charset: '0123456789' }); // 例如: '12345678'\n * ```\n */\nexport function randomId(\n  length: number = 8,\n  options: { prefix?: string; charset?: string } = {}\n): string {\n  const {\n    prefix = '',\n    charset = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789'\n  } = options;\n  \n  let result = '';\n  \n  // 获取随机值的函数\n  let getRandomValue: () => number;\n  \n  if (typeof crypto !== 'undefined' && crypto.getRandomValues) {\n    // 使用加密安全的随机数\n    const buffer = new Uint8Array(1);\n    getRandomValue = () => {\n      crypto.getRandomValues(buffer);\n      return buffer[0] / 256;\n    };\n  } else if (typeof window !== 'undefined' && window.crypto && window.crypto.getRandomValues) {\n    // 浏览器环境\n    const buffer = new Uint8Array(1);\n    getRandomValue = () => {\n      window.crypto.getRandomValues(buffer);\n      return buffer[0] / 256;\n    };\n  } else {\n    // 降级方案\n    getRandomValue = () => Math.random();\n  }\n  \n  // 生成随机字符串\n  for (let i = 0; i < length; i++) {\n    result += charset.charAt(Math.floor(getRandomValue() * charset.length));\n  }\n  \n  return prefix + result;\n}\n\n// 字节到十六进制的映射表（优化性能）\nconst byteToHex: string[] = [];\nfor (let i = 0; i < 256; i++) {\n  byteToHex[i] = (i + 0x100).toString(16).slice(1);\n}","/**\n * 字符串比较工具函数\n * @packageDocumentation\n */\n\n/**\n * 比较两个字符串\n * @param str1 - 第一个字符串\n * @param str2 - 第二个字符串\n * @returns 比较结果：-1 表示 str1 < str2，0 表示相等，1 表示 str1 > str2\n * @example\n * ```ts\n * compare('a', 'b'); // -1\n * compare('b', 'a'); // 1\n * compare('a', 'a'); // 0\n * ```\n */\nexport function compare(str1: string | null | undefined, str2: string | null | undefined): number {\n  if (!str1 || typeof str1 !== 'string') return -1;\n  if (!str2 || typeof str2 !== 'string') return 1;\n  return str1.localeCompare(str2);\n}\n\n/**\n * 忽略大小写比较两个字符串\n * @param str1 - 第一个字符串\n * @param str2 - 第二个字符串\n * @returns 比较结果：-1 表示 str1 < str2，0 表示相等，1 表示 str1 > str2\n * @example\n * ```ts\n * compareIgnoreCase('a', 'B'); // -1\n * compareIgnoreCase('B', 'a'); // 1\n * compareIgnoreCase('a', 'A'); // 0\n * ```\n */\nexport function compareIgnoreCase(str1: string | null | undefined, str2: string | null | undefined): number {\n  if (!str1 || typeof str1 !== 'string') return -1;\n  if (!str2 || typeof str2 !== 'string') return 1;\n  return str1.toLowerCase().localeCompare(str2.toLowerCase());\n}\n\n/**\n * 检查两个字符串是否相等\n * @param str1 - 第一个字符串\n * @param str2 - 第二个字符串\n * @returns 是否相等\n * @example\n * ```ts\n * equals('hello', 'hello'); // true\n * equals('hello', 'world'); // false\n * ```\n */\nexport function equals(str1: string | null | undefined, str2: string | null | undefined): boolean {\n  if (!str1 || typeof str1 !== 'string') return false;\n  if (!str2 || typeof str2 !== 'string') return false;\n  return str1 === str2;\n}\n\n/**\n * 忽略大小写检查两个字符串是否相等\n * @param str1 - 第一个字符串\n * @param str2 - 第二个字符串\n * @returns 是否相等\n * @example\n * ```ts\n * equalsIgnoreCase('hello', 'HELLO'); // true\n * equalsIgnoreCase('hello', 'world'); // false\n * ```\n */\nexport function equalsIgnoreCase(str1: string | null | undefined, str2: string | null | undefined): boolean {\n  if (!str1 || typeof str1 !== 'string') return false;\n  if (!str2 || typeof str2 !== 'string') return false;\n  return str1.toLowerCase() === str2.toLowerCase();\n}\n\n/**\n * 计算两个字符串的相似度（Levenshtein距离）\n * @param str1 - 第一个字符串\n * @param str2 - 第二个字符串\n * @returns 相似度（0-1之间的数值）\n * @example\n * ```ts\n * similarity('hello', 'hallo'); // 0.8\n * similarity('world', 'word'); // 0.8\n * ```\n */\nexport function similarity(str1: string | null | undefined, str2: string | null | undefined): number {\n  if (!str1 || typeof str1 !== 'string') return 0;\n  if (!str2 || typeof str2 !== 'string') return 0;\n  \n  const longer = str1.length > str2.length ? str1 : str2;\n  const shorter = str1.length > str2.length ? str2 : str1;\n  \n  if (longer.length === 0) return 1.0;\n  \n  const costs = new Array();\n  for (let i = 0; i <= longer.length; i++) {\n    let lastValue = i;\n    for (let j = 0; j <= shorter.length; j++) {\n      if (i === 0) {\n        costs[j] = j;\n      } else if (j > 0) {\n        let newValue = costs[j - 1];\n        if (longer.charAt(i - 1) !== shorter.charAt(j - 1)) {\n          newValue = Math.min(Math.min(newValue, lastValue), costs[j]) + 1;\n        }\n        costs[j - 1] = lastValue;\n        lastValue = newValue;\n      }\n    }\n    if (i > 0) costs[shorter.length] = lastValue;\n  }\n  \n  return (longer.length - costs[shorter.length]) / longer.length;\n} ","/**\n * 字符串统计工具函数\n * @packageDocumentation\n */\n\n/**\n * 统计子字符串出现次数\n * @param str - 要统计的字符串\n * @param searchStr - 要查找的子字符串\n * @returns 出现次数\n * @example\n * ```ts\n * count('Hello World World', 'World'); // 2\n * count('aaa', 'aa'); // 2\n * ```\n */\nexport function count(str: string, searchStr: string): number {\n  if (!searchStr) return 0;\n  return (str.match(new RegExp(searchStr, 'g')) || []).length;\n}\n\n/**\n * 统计字符出现频率\n * @param str - 要统计的字符串\n * @returns 字符出现频率对象\n * @example\n * ```ts\n * frequency('hello'); // { h: 1, e: 1, l: 2, o: 1 }\n * ```\n */\nexport function frequency(str: string): Record<string, number> {\n  const result: Record<string, number> = {};\n  for (const char of str) {\n    result[char] = (result[char] || 0) + 1;\n  }\n  return result;\n}\n\n/**\n * 获取字符串中的数字\n * @param str - 要处理的字符串\n * @returns 数字数组\n * @example\n * ```ts\n * getNumbers('abc123def456'); // [123, 456]\n * getNumbers('1.23, 4.56'); // [1.23, 4.56]\n * ```\n */\nexport function getNumbers(str: string): number[] {\n  return str.match(/-?\\d*\\.?\\d+/g)?.map(Number) || [];\n}\n\n/**\n * 获取字符串中的字母\n * @param str - 要处理的字符串\n * @returns 字母数组\n * @example\n * ```ts\n * getLetters('abc123def456'); // ['a', 'b', 'c', 'd', 'e', 'f']\n * getLetters('Hello World'); // ['H', 'e', 'l', 'l', 'o', 'W', 'o', 'r', 'l', 'd']\n * ```\n */\nexport function getLetters(str: string): string[] {\n  return str.match(/[a-zA-Z]/g) || [];\n} ","/**\n * 字符串编码和解码工具函数\n * @packageDocumentation\n */\n\n/**\n * URL编码\n * @param str - 要编码的字符串\n * @returns 编码后的字符串\n * @example\n * ```ts\n * encodeUrl('Hello World'); // 'Hello%20World'\n * encodeUrl('你好世界'); // '%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C'\n * ```\n */\nexport function encodeUrl(str: string | null | undefined): string {\n  if (!str) return '';\n  return encodeURIComponent(str);\n}\n\n/**\n * URL解码\n * @param str - 要解码的字符串\n * @returns 解码后的字符串\n * @example\n * ```ts\n * decodeUrl('Hello%20World'); // 'Hello World'\n * decodeUrl('%E4%BD%A0%E5%A5%BD%E4%B8%96%E7%95%8C'); // '你好世界'\n * ```\n */\nexport function decodeUrl(str: string | null | undefined): string {\n  if (!str) return '';\n  return decodeURIComponent(str);\n}\n\n/**\n * Base64编码\n * @param str - 要编码的字符串\n * @returns 编码后的字符串\n * @example\n * ```ts\n * encodeBase64('Hello World'); // 'SGVsbG8gV29ybGQ='\n * ```\n */\nexport function encodeBase64(str: string | null | undefined): string {\n  if (!str) return '';\n  return btoa(unescape(encodeURIComponent(str)));\n}\n\n/**\n * Base64解码\n * @param str - 要解码的字符串\n * @returns 解码后的字符串\n * @example\n * ```ts\n * decodeBase64('SGVsbG8gV29ybGQ='); // 'Hello World'\n * ```\n */\nexport function decodeBase64(str: string | null | undefined): string {\n  if (!str) return '';\n  return decodeURIComponent(escape(atob(str)));\n}\n\n/**\n * HTML编码\n * @param str - 要编码的字符串\n * @returns 编码后的字符串\n * @example\n * ```ts\n * encodeHtml('<div>Hello & World</div>'); // '&lt;div&gt;Hello &amp; World&lt;/div&gt;'\n * ```\n */\nexport function encodeHtml(str: string | null | undefined): string {\n  if (!str) return '';\n  const escapeMap: Record<string, string> = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#x27;',\n    '`': '&#x60;',\n    '\\\\': '&#x5c;'\n  };\n  \n  return str.replace(/[&<>\"'`\\\\]/g, (match) => escapeMap[match]);\n}\n\n/**\n * HTML解码\n * @param str - 要解码的字符串\n * @returns 解码后的字符串\n * @example\n * ```ts\n * decodeHtml('&lt;div&gt;Hello &amp; World&lt;/div&gt;'); // '<div>Hello & World</div>'\n * ```\n */\nexport function decodeHtml(str: string | null | undefined): string {\n  if (!str) return '';\n  const unescapeMap: Record<string, string> = {\n    '&amp;': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&#x27;': \"'\",\n    '&#x60;': '`',\n    '&#x5c;': '\\\\'\n  };\n  \n  return str.replace(/&(?:amp|lt|gt|quot|#x27|#x60|#x5c);/g, (match) => unescapeMap[match]);\n} ","/**\n * 字符串查找和替换工具函数\n * @packageDocumentation\n */\n\n/**\n * 查找子字符串\n * @param str - 要搜索的字符串\n * @param searchStr - 要查找的子字符串\n * @returns 子字符串的位置，如果未找到则返回-1\n * @example\n * ```ts\n * indexOf('Hello World', 'World'); // 6\n * indexOf('Hello World', 'xyz'); // -1\n * ```\n */\nexport function indexOf(str: string, searchStr: string): number {\n  return str.indexOf(searchStr);\n}\n\n/**\n * 替换字符串\n * @param str - 要处理的字符串\n * @param searchStr - 要替换的子字符串\n * @param replaceStr - 替换后的字符串\n * @returns 替换后的字符串\n * @example\n * ```ts\n * replace('Hello World', 'World', 'JavaScript'); // 'Hello JavaScript'\n * ```\n */\nexport function replace(str: string, searchStr: string, replaceStr: string): string {\n  return str.replace(searchStr, replaceStr);\n}\n\n/**\n * 替换所有匹配项\n * @param str - 要处理的字符串\n * @param searchStr - 要替换的子字符串\n * @param replaceStr - 替换后的字符串\n * @returns 替换后的字符串\n * @example\n * ```ts\n * replaceAll('Hello World World', 'World', 'JavaScript'); // 'Hello JavaScript JavaScript'\n * ```\n */\nexport function replaceAll(str: string, searchStr: string, replaceStr: string): string {\n  return str.split(searchStr).join(replaceStr);\n}\n\n/**\n * 是否包含子字符串\n * @param str - 要搜索的字符串\n * @param searchStr - 要查找的子字符串\n * @returns 是否包含\n * @example\n * ```ts\n * includes('Hello World', 'World'); // true\n * includes('Hello World', 'xyz'); // false\n * ```\n */\nexport function includes(str: string, searchStr: string): boolean {\n  return str.includes(searchStr);\n}\n\n/**\n * 是否以某字符串开头\n * @param str - 要检查的字符串\n * @param searchStr - 要查找的子字符串\n * @returns 是否以该字符串开头\n * @example\n * ```ts\n * startsWith('Hello World', 'Hello'); // true\n * startsWith('Hello World', 'World'); // false\n * ```\n */\nexport function startsWith(str: string, searchStr: string): boolean {\n  return str.startsWith(searchStr);\n}\n\n/**\n * 是否以某字符串结尾\n * @param str - 要检查的字符串\n * @param searchStr - 要查找的子字符串\n * @returns 是否以该字符串结尾\n * @example\n * ```ts\n * endsWith('Hello World', 'World'); // true\n * endsWith('Hello World', 'Hello'); // false\n * ```\n */\nexport function endsWith(str: string, searchStr: string): boolean {\n  return str.endsWith(searchStr);\n} ","/**\n * 字符串清理和格式化工具函数\n * @packageDocumentation\n */\n\n/**\n * 去除两端空格\n * @param str - 要处理的字符串\n * @returns 处理后的字符串\n * @example\n * ```ts\n * trim('  Hello World  '); // 'Hello World'\n * ```\n */\nexport function trim(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.trim();\n}\n\n/**\n * 去除左侧空格\n * @param str - 要处理的字符串\n * @returns 处理后的字符串\n * @example\n * ```ts\n * trimLeft('  Hello World'); // 'Hello World'\n * ```\n */\nexport function trimLeft(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.trimStart();\n}\n\n/**\n * 去除右侧空格\n * @param str - 要处理的字符串\n * @returns 处理后的字符串\n * @example\n * ```ts\n * trimRight('Hello World  '); // 'Hello World'\n * ```\n */\nexport function trimRight(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.trimEnd();\n}\n\n/**\n * 去除多余空格\n * @param str - 要处理的字符串\n * @returns 处理后的字符串\n * @example\n * ```ts\n * normalizeSpace('Hello   World'); // 'Hello World'\n * ```\n */\nexport function normalizeSpace(str: string | null | undefined): string {\n  if (!str || typeof str !== 'string') return '';\n  return str.replace(/\\s+/g, ' ').trim();\n}\n\n/**\n * 格式化字符串，支持位置参数和命名参数\n * @param template - 带有格式化标记的字符串模板\n * @param args - 要替换的参数，可以是单个对象（命名参数）或多个值（位置参数）\n * @returns 格式化后的字符串\n * @example\n * ```ts\n * // 使用位置参数 (类似 C 的 printf)\n * format('Hello, %s! You have %d new messages.', 'John', 5);\n * // 'Hello, John! You have 5 new messages.'\n * \n * // 使用索引参数\n * format('The {0} brown {1} jumps over the {2} {1}', 'quick', 'fox', 'lazy');\n * // 'The quick brown fox jumps over the lazy fox'\n * \n * // 使用命名参数\n * format('Hello, {name}! You are {age} years old.', { name: 'John', age: 30 });\n * // 'Hello, John! You are 30 years old.'\n * ```\n */\nexport function format(template: string | null | undefined, ...args: any[]): string {\n  if (!template || typeof template !== 'string') return '';\n  if (args.length === 0) return template;\n  \n  // 如果第一个参数是对象，则使用命名参数模式\n  if (args.length === 1 && typeof args[0] === 'object' && args[0] !== null) {\n    return formatNamed(template, args[0]);\n  }\n  \n  // 尝试使用 printf 风格的格式化 (%s, %d 等)\n  if (/%[sdfo]/.test(template)) {\n    return formatPrintf(template, args);\n  }\n  \n  // 使用索引参数模式\n  return formatIndexed(template, args);\n}\n\n/**\n * 使用命名参数格式化字符串\n * @param template - 带有{name}格式化标记的字符串模板\n * @param params - 命名参数对象\n * @returns 格式化后的字符串\n */\nfunction formatNamed(template: string, params: Record<string, any>): string {\n  return template.replace(/\\{([^{}]+)\\}/g, (match, key) => {\n    const value = params[key];\n    return value !== undefined ? String(value) : match;\n  });\n}\n\n/**\n * 使用索引参数格式化字符串\n * @param template - 带有{0}, {1}等格式化标记的字符串模板\n * @param params - 参数数组\n * @returns 格式化后的字符串\n */\nfunction formatIndexed(template: string, params: any[]): string {\n  return template.replace(/\\{(\\d+)\\}/g, (match, index) => {\n    const idx = parseInt(index, 10);\n    if (idx >= 0 && idx < params.length) {\n      return String(params[idx]);\n    }\n    return match;\n  });\n}\n\n/**\n * 使用printf风格格式化字符串\n * @param template - 带有%s, %d等格式化标记的字符串模板\n * @param params - 参数数组\n * @returns 格式化后的字符串\n */\nfunction formatPrintf(template: string, params: any[]): string {\n  let paramIndex = 0;\n  \n  return template.replace(/%([sdfo])/g, (match, type) => {\n    if (paramIndex >= params.length) {\n      return match;\n    }\n    \n    const value = params[paramIndex++];\n    \n    switch (type) {\n      case 's': // 字符串\n        return String(value);\n      case 'd': // 整数\n        return parseInt(String(value), 10).toString();\n      case 'f': // 浮点数\n        return parseFloat(String(value)).toString();\n      case 'o': // 对象\n        try {\n          return JSON.stringify(value);\n        } catch (e) {\n          return String(value);\n        }\n      default:\n        return match;\n    }\n  });\n} ","/**\n * 字符串验证工具函数\n * @packageDocumentation\n */\n\n/**\n * 是否为数字字符串\n * @param str - 要验证的字符串\n * @returns 是否为数字字符串\n * @example\n * ```ts\n * isNumeric('123'); // true\n * isNumeric('12.34'); // true\n * isNumeric('abc'); // false\n * ```\n */\nexport function isNumeric(str: string | null | undefined): boolean {\n  if (!str || typeof str !== 'string') return false;\n  return !isNaN(Number(str)) && !isNaN(parseFloat(str));\n}\n\n/**\n * 是否为字母字符串\n * @param str - 要验证的字符串\n * @returns 是否为字母字符串\n * @example\n * ```ts\n * isAlpha('abc'); // true\n * isAlpha('123'); // false\n * isAlpha('abc123'); // false\n * ```\n */\nexport function isAlpha(str: string | null | undefined): boolean {\n  if (!str || typeof str !== 'string') return false;\n  return /^[a-zA-Z]+$/.test(str);\n}\n\n/**\n * 是否为字母数字字符串\n * @param str - 要验证的字符串\n * @returns 是否为字母数字字符串\n * @example\n * ```ts\n * isAlphanumeric('abc123'); // true\n * isAlphanumeric('abc'); // true\n * isAlphanumeric('123'); // true\n * isAlphanumeric('abc-123'); // false\n * ```\n */\nexport function isAlphanumeric(str: string | null | undefined): boolean {\n  if (!str || typeof str !== 'string') return false;\n  return /^[a-zA-Z0-9]+$/.test(str);\n}\n\n/**\n * 是否为邮箱\n * @param str - 要验证的字符串\n * @returns 是否为邮箱\n * @example\n * ```ts\n * isEmail('test@example.com'); // true\n * isEmail('invalid-email'); // false\n * ```\n */\nexport function isEmail(str: string | null | undefined): boolean {\n  if (!str || typeof str !== 'string') return false;\n  return /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(str);\n}\n\n/**\n * 是否为URL\n * @param str - 要验证的字符串\n * @returns 是否为URL\n * @example\n * ```ts\n * isUrl('https://example.com'); // true\n * isUrl('http://example.com'); // true\n * isUrl('ftp://example.com'); // true\n * isUrl('invalid-url'); // false\n * ```\n */\nexport function isUrl(str: string | null | undefined): boolean {\n  if (!str || typeof str !== 'string') return false;\n  try {\n    new URL(str);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * 是否为手机号\n * @param str - 要验证的字符串\n * @returns 是否为手机号\n * @example\n * ```ts\n * isPhone('13812345678'); // true\n * isPhone('138-1234-5678'); // true\n * isPhone('invalid-phone'); // false\n * ```\n */\nexport function isPhone(str: string | null | undefined): boolean {\n  if (!str || typeof str !== 'string') return false;\n  return /^1[3-9]\\d{9}$/.test(str.replace(/\\D/g, ''));\n} ","/**\n * 字符串分割和合并工具函数\n * @packageDocumentation\n */\n\n/**\n * 分割字符串\n * @param str - 要分割的字符串\n * @param separator - 分隔符\n * @returns 分割后的字符串数组\n * @example\n * ```ts\n * split('Hello World', ' '); // ['Hello', 'World']\n * split('a,b,c', ','); // ['a', 'b', 'c']\n * ```\n */\nexport function split(str: string, separator: string): string[] {\n  return str.split(separator);\n}\n\n/**\n * 合并字符串数组\n * @param arr - 要合并的字符串数组\n * @param separator - 分隔符\n * @returns 合并后的字符串\n * @example\n * ```ts\n * join(['Hello', 'World'], ' '); // 'Hello World'\n * join(['a', 'b', 'c'], ','); // 'a,b,c'\n * ```\n */\nexport function join(arr: string[], separator: string): string {\n  return arr.join(separator);\n}\n\n/**\n * 按长度分割\n * @param str - 要分割的字符串\n * @param length - 每个部分的长度\n * @returns 分割后的字符串数组\n * @example\n * ```ts\n * splitByLength('Hello World', 5); // ['Hello', ' Worl', 'd']\n * splitByLength('123456', 2); // ['12', '34', '56']\n * ```\n */\nexport function splitByLength(str: string, length: number): string[] {\n  const result: string[] = [];\n  for (let i = 0; i < str.length; i += length) {\n    result.push(str.slice(i, i + length));\n  }\n  return result;\n}\n\n/**\n * 按行分割\n * @param str - 要分割的字符串\n * @returns 分割后的字符串数组\n * @example\n * ```ts\n * splitLines('Hello\\nWorld'); // ['Hello', 'World']\n * splitLines('Hello\\r\\nWorld'); // ['Hello', 'World']\n * ```\n */\nexport function splitLines(str: string): string[] {\n  return str.split(/\\r?\\n/);\n} ","/**\n * 类型检测工具函数\n */\n\n/**\n * 获取值的类型\n * \n * @param value - 要检查的值\n * @returns 类型字符串\n * @example\n * ```ts\n * getType(123); // 返回: 'number'\n * getType('abc'); // 返回: 'string'\n * getType(true); // 返回: 'boolean'\n * getType(null); // 返回: 'null'\n * getType(undefined); // 返回: 'undefined'\n * getType([]); // 返回: 'array'\n * getType({}); // 返回: 'object'\n * getType(new Date()); // 返回: 'date'\n * getType(/\\d+/); // 返回: 'regexp'\n * getType(new Map()); // 返回: 'map'\n * getType(new Set()); // 返回: 'set'\n * getType(() => {}); // 返回: 'function'\n * ```\n */\nexport const getType = (value: unknown): string => {\n  if (value === null) {\n    return 'null';\n  }\n  \n  if (value === undefined) {\n    return 'undefined';\n  }\n  \n  if (Array.isArray(value)) {\n    return 'array';\n  }\n  \n  const type = typeof value;\n  \n  if (type === 'object') {\n    // 检查内置对象类型\n    const objectType = Object.prototype.toString.call(value);\n    const match = objectType.match(/\\[object (\\w+)\\]/);\n    \n    if (match && match[1]) {\n      const detailedType = match[1].toLowerCase();\n      \n      // 对象、日期、正则表达式等\n      if (['date', 'regexp', 'map', 'set', 'weakmap', 'weakset'].includes(detailedType)) {\n        return detailedType;\n      }\n    }\n  }\n  \n  return type;\n};\n\n/**\n * 检查值是否为指定类型\n * \n * @param value - 要检查的值\n * @param type - 类型字符串或类型字符串数组\n * @returns 如果值是指定类型则返回true，否则返回false\n * @example\n * ```ts\n * isType(123, 'number'); // 返回: true\n * isType('abc', 'string'); // 返回: true\n * isType([], 'array'); // 返回: true\n * isType(null, 'null'); // 返回: true\n * isType(123, ['string', 'number']); // 返回: true\n * isType(undefined, ['null', 'undefined']); // 返回: true\n * ```\n */\nexport const isType = (value: unknown, type: string | string[]): boolean => {\n  const valueType = getType(value);\n  \n  if (Array.isArray(type)) {\n    return type.includes(valueType);\n  }\n  \n  return valueType === type;\n};\n\n/**\n * 检查值是否为 undefined\n * @param value - 要检查的值\n * @returns 是否为 undefined\n * @example\n * isUndefined(undefined) // true\n * isUndefined(null) // false\n * isUndefined('') // false\n */\nexport const isUndefined = (value: unknown): value is undefined => value === undefined;\n\n/**\n * 检查值是否为 null\n * @param value - 要检查的值\n * @returns 是否为 null\n * @example\n * isNull(null) // true\n * isNull(undefined) // false\n * isNull('') // false\n */\nexport const isNull = (value: unknown): value is null => value === null;\n\n/**\n * 检查值是否为布尔值\n * @param value - 要检查的值\n * @returns 是否为布尔值\n * @example\n * isBoolean(true) // true\n * isBoolean(false) // true\n * isBoolean(1) // false\n * isBoolean('true') // false\n */\nexport const isBoolean = (value: unknown): value is boolean => typeof value === 'boolean';\n\n/**\n * 检查值是否为 Promise\n * @param value - 要检查的值\n * @returns 是否为 Promise\n * @example\n * isPromise(Promise.resolve()) // true\n * isPromise(new Promise(() => {})) // true\n * isPromise({}) // false\n */\nexport const isPromise = (value: unknown): value is Promise<unknown> => {\n  return value instanceof Promise || \n    (typeof value === 'object' && value !== null && \n     typeof (value as any).then === 'function');\n};\n\n/**\n * 检查值是否为正则表达式\n * @param value - 要检查的值\n * @returns 是否为正则表达式\n * @example\n * isRegExp(/test/) // true\n * isRegExp(new RegExp('test')) // true\n * isRegExp('test') // false\n */\nexport const isRegExp = (value: unknown): value is RegExp => value instanceof RegExp;\n\n/**\n * 检查值是否为 Error 对象\n * @param value - 要检查的值\n * @returns 是否为 Error 对象\n * @example\n * isError(new Error()) // true\n * isError(new TypeError()) // true\n * isError({}) // false\n */\nexport const isError = (value: unknown): value is Error => value instanceof Error;\n\n/**\n * 检查值是否为 Symbol\n * @param value - 要检查的值\n * @returns 是否为 Symbol\n * @example\n * isSymbol(Symbol()) // true\n * isSymbol(Symbol('test')) // true\n * isSymbol('test') // false\n */\nexport const isSymbol = (value: unknown): value is symbol => typeof value === 'symbol';\n\n/**\n * 检查值是否为 BigInt\n * @param value - 要检查的值\n * @returns 是否为 BigInt\n * @example\n * isBigInt(BigInt(1)) // true\n * isBigInt(1n) // true\n * isBigInt(1) // false\n */\nexport const isBigInt = (value: unknown): value is bigint => typeof value === 'bigint';\n\n/**\n * 检查值是否为数字\n * @param value - 要检查的值\n * @returns 是否为数字\n * @example\n * isNumber(1) // true\n * isNumber(1.5) // true\n * isNumber(NaN) // true\n * isNumber('1') // false\n */\nexport const isNumber = (value: unknown): value is number => \n  typeof value === 'number' && !isNaN(value);\n\n/**\n * 检查值是否为整数\n * @param value - 要检查的值\n * @returns 是否为整数\n * @example\n * isInteger(1) // true\n * isInteger(1.0) // true\n * isInteger(1.5) // false\n * isInteger('1') // false\n */\nexport const isInteger = (value: unknown): value is number => \n  Number.isInteger(value as number);\n\n/**\n * 检查值是否为有限数字\n * @param value - 要检查的值\n * @returns 是否为有限数字\n * @example\n * isFinite(1) // true\n * isFinite(1.5) // true\n * isFinite(Infinity) // false\n * isFinite(NaN) // false\n */\nexport const isFiniteNumber = (value: unknown): value is number => \n  Number.isFinite(value as number);\n\n/**\n * 检查值是否为 NaN\n * @param value - 要检查的值\n * @returns 是否为 NaN\n * @example\n * isNaN(NaN) // true\n * isNaN(1) // false\n * isNaN('test') // false\n */\nexport const isNaN = (value: unknown): value is number => \n  Number.isNaN(value as number);\n\n/**\n * 检查值是否为字符串\n * @param value - 要检查的值\n * @returns 是否为字符串\n * @example\n * isString('test') // true\n * isString('') // true\n * isString(1) // false\n */\nexport const isString = (value: unknown): value is string => typeof value === 'string';\n\n/**\n * 检查值是否为对象\n * @param value - 要检查的值\n * @returns 是否为对象\n * @example\n * isObject({}) // true\n * isObject([]) // true\n * isObject(null) // false\n * isObject(undefined) // false\n */\nexport const isObject = (value: unknown): value is object => \n  typeof value === 'object' && value !== null;\n\n/**\n * 检查值是否为普通对象（由 Object 构造函数创建或原型链上没有其他对象）\n * @param value - 要检查的值\n * @returns 是否为普通对象\n * @example\n * isPlainObject({}) // true\n * isPlainObject(Object.create(null)) // true\n * isPlainObject(new Date()) // false\n * isPlainObject([]) // false\n */\nexport const isPlainObject = (value: unknown): value is Record<string, unknown> => {\n  if (typeof value !== 'object' || value === null) return false;\n  \n  const proto = Object.getPrototypeOf(value);\n  return proto === null || proto === Object.prototype;\n};\n\n/**\n * 检查值是否为数组\n * @param value - 要检查的值\n * @returns 是否为数组\n * @example\n * isArray([]) // true\n * isArray([1, 2, 3]) // true\n * isArray({}) // false\n */\nexport const isArray = (value: unknown): value is unknown[] => Array.isArray(value);\n\n/**\n * 检查值是否为函数\n * @param value - 要检查的值\n * @returns 是否为函数\n * @example\n * isFunction(() => {}) // true\n * isFunction(function() {}) // true\n * isFunction({}) // false\n */\nexport const isFunction = (value: unknown): value is Function => typeof value === 'function';\n\n/**\n * 检查值是否为日期对象\n * @param value - 要检查的值\n * @returns 是否为日期对象\n * @example\n * isDate(new Date()) // true\n * isDate('2024-03-18') // false\n */\nexport const isDate = (value: unknown): value is Date => value instanceof Date;\n\n/**\n * 检查值是否为 Map 对象\n * @param value - 要检查的值\n * @returns 是否为 Map 对象\n * @example\n * isMap(new Map()) // true\n * isMap({}) // false\n */\nexport const isMap = (value: unknown): value is Map<unknown, unknown> => value instanceof Map;\n\n/**\n * 检查值是否为 Set 对象\n * @param value - 要检查的值\n * @returns 是否为 Set 对象\n * @example\n * isSet(new Set()) // true\n * isSet([]) // false\n */\nexport const isSet = (value: unknown): value is Set<unknown> => value instanceof Set;\n\n/**\n * 检查值是否为 WeakMap 对象\n * @param value - 要检查的值\n * @returns 是否为 WeakMap 对象\n * @example\n * isWeakMap(new WeakMap()) // true\n * isWeakMap(new Map()) // false\n */\nexport const isWeakMap = (value: unknown): value is WeakMap<object, unknown> => \n  value instanceof WeakMap;\n\n/**\n * 检查值是否为 WeakSet 对象\n * @param value - 要检查的值\n * @returns 是否为 WeakSet 对象\n * @example\n * isWeakSet(new WeakSet()) // true\n * isWeakSet(new Set()) // false\n */\nexport const isWeakSet = (value: unknown): value is WeakSet<object> => \n  value instanceof WeakSet;\n\n/**\n * 检查值是否为可迭代对象\n * @param value - 要检查的值\n * @returns 是否为可迭代对象\n * @example\n * isIterable([]) // true\n * isIterable('') // true\n * isIterable(new Set()) // true\n * isIterable({}) // false\n */\nexport const isIterable = (value: unknown): value is Iterable<unknown> => {\n  return value !== null && \n    typeof (value as any)[Symbol.iterator] === 'function';\n};\n\n/**\n * 检查值是否为异步可迭代对象\n * @param value - 要检查的值\n * @returns 是否为异步可迭代对象\n * @example\n * isAsyncIterable({\n *   async *[Symbol.asyncIterator]() {\n *     yield 1;\n *   }\n * }) // true\n * isAsyncIterable([]) // false\n */\nexport const isAsyncIterable = (value: unknown): value is AsyncIterable<unknown> => {\n  return value !== null && \n    typeof (value as any)[Symbol.asyncIterator] === 'function';\n}; ","/**\n * 空值检测工具函数\n */\n\n/**\n * 检查值是否为 null 或 undefined\n * @param value - 要检查的值\n * @returns 是否为 null 或 undefined\n * @example\n * isNil(null) // true\n * isNil(undefined) // true\n * isNil('') // false\n * isNil(0) // false\n * isNil(false) // false\n */\nexport const isNil = (value: unknown): value is null | undefined => \n  value === null || value === undefined;\n\n/**\n * 检查值是否为空（null、undefined、空字符串、空数组、空对象）\n * @param value - 要检查的值\n * @returns 是否为空\n * @example\n * isEmpty(null) // true\n * isEmpty(undefined) // true\n * isEmpty('') // true\n * isEmpty([]) // true\n * isEmpty({}) // true\n * isEmpty(0) // false\n * isEmpty('0') // false\n */\nexport const isEmpty = (value: unknown): boolean => {\n  if (value === null || value === undefined) return true;\n  if (typeof value === 'string') return value.length === 0;\n  if (Array.isArray(value)) return value.length === 0;\n  if (typeof value === 'object') return Object.keys(value as object).length === 0;\n  return false;\n};\n\n/**\n * 判断字符串是否为空\n * @param str 要判断的字符串\n * @returns 是否为空字符串\n */\nexport function isEmptyString(str: string): boolean {\n  return str === '';\n}\n\n/**\n * 检查值是否为空数组\n * @param value - 要检查的值\n * @returns 是否为空数组\n * @example\n * isEmptyArray([]) // true\n * isEmptyArray([1, 2, 3]) // false\n * isEmptyArray({}) // false\n */\nexport const isEmptyArray = (value: unknown): value is [] => \n  Array.isArray(value) && value.length === 0;\n\n/**\n * 判断对象是否为空\n * @param obj 要判断的对象\n * @returns 是否为空对象\n */\nexport function isEmptyObject(obj: object): boolean {\n  if (Array.isArray(obj)) {\n    return false;\n  }\n  return Object.keys(obj).length === 0;\n}\n\n/**\n * 检查值是否为空 Map\n * @param value - 要检查的值\n * @returns 是否为空 Map\n * @example\n * isEmptyMap(new Map()) // true\n * isEmptyMap(new Map([['key', 'value']])) // false\n * isEmptyMap({}) // false\n */\nexport const isEmptyMap = (value: unknown): value is Map<never, never> => \n  value instanceof Map && value.size === 0;\n\n/**\n * 检查值是否为空 Set\n * @param value - 要检查的值\n * @returns 是否为空 Set\n * @example\n * isEmptySet(new Set()) // true\n * isEmptySet(new Set([1, 2, 3])) // false\n * isEmptySet([]) // false\n */\nexport const isEmptySet = (value: unknown): value is Set<never> => \n  value instanceof Set && value.size === 0;\n\n/**\n * 检查值是否为空 WeakMap\n * @param value - 要检查的值\n * @returns 是否为空 WeakMap\n * @example\n * isEmptyWeakMap(new WeakMap()) // true\n * isEmptyWeakMap(new Map()) // false\n */\nexport const isEmptyWeakMap = (value: unknown): value is WeakMap<object, never> => \n  value instanceof WeakMap;\n\n/**\n * 检查值是否为空 WeakSet\n * @param value - 要检查的值\n * @returns 是否为空 WeakSet\n * @example\n * isEmptyWeakSet(new WeakSet()) // true\n * isEmptyWeakSet(new Set()) // false\n */\nexport const isEmptyWeakSet = (value: unknown): value is WeakSet<object> => \n  value instanceof WeakSet;\n\n/**\n * 检查值是否为空 Date\n * @param value - 要检查的值\n * @returns 是否为空 Date\n * @example\n * isEmptyDate(new Date('')) // true\n * isEmptyDate(new Date()) // false\n */\nexport const isEmptyDate = (value: unknown): value is Date => \n  value instanceof Date && isNaN(value.getTime());\n\n/**\n * 检查值是否为空正则表达式\n * @param value - 要检查的值\n * @returns 是否为空正则表达式\n * @example\n * isEmptyRegExp(new RegExp('')) // true\n * isEmptyRegExp(/test/) // false\n */\nexport const isEmptyRegExp = (value: unknown): value is RegExp => \n  value instanceof RegExp && value.toString() === '/(?:)/';\n\n/**\n * 检查值是否为空 Error\n * @param value - 要检查的值\n * @returns 是否为空 Error\n * @example\n * isEmptyError(new Error('')) // true\n * isEmptyError(new Error('test')) // false\n */\nexport const isEmptyError = (value: unknown): value is Error => \n  value instanceof Error && value.message === '';\n\n/**\n * 判断 Promise 是否为空\n * @param promise 要判断的 Promise\n * @returns 是否为空 Promise\n */\nexport async function isEmptyPromise(promise: Promise<unknown>): Promise<boolean> {\n  try {\n    const value = await promise;\n    return value === undefined || value === null;\n  } catch {\n    return false;\n  }\n}\n\n/**\n * 检查值是否为空迭代器\n * @param value - 要检查的值\n * @returns 是否为空迭代器\n * @example\n * isEmptyIterator([][Symbol.iterator]()) // true\n * isEmptyIterator([1, 2, 3][Symbol.iterator]()) // false\n */\nexport const isEmptyIterator = (value: unknown): value is Iterator<never> => {\n  if (typeof value !== 'object' || value === null) return false;\n  const iterator = value as Iterator<unknown>;\n  return iterator.next().done === true;\n};\n\n/**\n * 检查值是否为空异步迭代器\n * @param value - 要检查的值\n * @returns 是否为空异步迭代器\n * @example\n * isEmptyAsyncIterator({\n *   async *[Symbol.asyncIterator]() {}\n * }[Symbol.asyncIterator]()) // true\n * isEmptyAsyncIterator({\n *   async *[Symbol.asyncIterator]() { yield 1; }\n * }[Symbol.asyncIterator]()) // false\n */\nexport const isEmptyAsyncIterator = async (value: unknown): Promise<boolean> => {\n  if (typeof value !== 'object' || value === null) return false;\n  const iterator = value as AsyncIterator<unknown>;\n  return iterator.next().then(result => result.done === true);\n};\n\n/**\n * 检查值是否为空或假值\n * @param value - 要检查的值\n * @returns 是否为空或假值\n * @example\n * isEmptyOrFalsy(null) // true\n * isEmptyOrFalsy(undefined) // true\n * isEmptyOrFalsy('') // true\n * isEmptyOrFalsy(0) // true\n * isEmptyOrFalsy(false) // true\n * isEmptyOrFalsy('test') // false\n * isEmptyOrFalsy(1) // false\n */\nexport const isEmptyOrFalsy = (value: unknown): boolean => {\n  if (value === null || value === undefined) return true;\n  if (typeof value === 'boolean') return !value;\n  if (typeof value === 'string') return value.length === 0;\n  if (typeof value === 'number') return value === 0;\n  return false;\n};\n\n/**\n * 检查值是否为空或假值（不包括空数组和空对象）\n * @param value - 要检查的值\n * @returns 是否为空或假值\n * @example\n * isEmptyOrFalsyStrict(null) // true\n * isEmptyOrFalsyStrict(undefined) // true\n * isEmptyOrFalsyStrict('') // true\n * isEmptyOrFalsyStrict(0) // true\n * isEmptyOrFalsyStrict(false) // true\n * isEmptyOrFalsyStrict([]) // false\n * isEmptyOrFalsyStrict({}) // false\n * isEmptyOrFalsyStrict('test') // false\n * isEmptyOrFalsyStrict(1) // false\n */\nexport const isEmptyOrFalsyStrict = (value: unknown): boolean => {\n  if (value === null || value === undefined) return true;\n  if (typeof value === 'boolean') return !value;\n  if (typeof value === 'string') return value.length === 0;\n  if (typeof value === 'number') return value === 0;\n  if (Array.isArray(value)) return false;\n  if (typeof value === 'object') return false;\n  return false;\n};\n\n/**\n * 检查值是否为空或假值（包括空数组和空对象）\n * @param value - 要检查的值\n * @returns 是否为空或假值\n * @example\n * isEmptyOrFalsyLoose(null) // true\n * isEmptyOrFalsyLoose(undefined) // true\n * isEmptyOrFalsyLoose('') // true\n * isEmptyOrFalsyLoose(0) // true\n * isEmptyOrFalsyLoose(false) // true\n * isEmptyOrFalsyLoose([]) // true\n * isEmptyOrFalsyLoose({}) // true\n * isEmptyOrFalsyLoose('test') // false\n * isEmptyOrFalsyLoose(1) // false\n */\nexport const isEmptyOrFalsyLoose = (value: unknown): boolean => {\n  if (value === null || value === undefined) return true;\n  if (typeof value === 'boolean') return !value;\n  if (typeof value === 'string') return value.length === 0;\n  if (typeof value === 'number') return value === 0;\n  if (Array.isArray(value)) return value.length === 0;\n  if (typeof value === 'object') return Object.keys(value as object).length === 0;\n  return false;\n};\n\n/**\n * 检查值是否为空或假值（包括空数组、空对象和空字符串）\n * @param value - 要检查的值\n * @returns 是否为空或假值\n * @example\n * isEmptyOrFalsyStrictest(null) // true\n * isEmptyOrFalsyStrictest(undefined) // true\n * isEmptyOrFalsyStrictest('') // true\n * isEmptyOrFalsyStrictest(0) // true\n * isEmptyOrFalsyStrictest(false) // true\n * isEmptyOrFalsyStrictest([]) // true\n * isEmptyOrFalsyStrictest({}) // true\n * isEmptyOrFalsyStrictest('test') // false\n * isEmptyOrFalsyStrictest(1) // false\n */\nexport const isEmptyOrFalsyStrictest = (value: unknown): boolean => {\n  if (value === null || value === undefined) return true;\n  if (typeof value === 'boolean') return !value;\n  if (typeof value === 'string') return value.length === 0;\n  if (typeof value === 'number') return value === 0;\n  if (Array.isArray(value)) return value.length === 0;\n  if (typeof value === 'object') return Object.keys(value as object).length === 0;\n  return false;\n}; ","/**\n * 布尔值工具函数\n */\n\n/**\n * 将值转换为布尔值\n * @param value - 要转换的值\n * @returns 布尔值\n * @example\n * toBoolean('true') // true\n * toBoolean('false') // false\n * toBoolean(1) // true\n * toBoolean(0) // false\n * toBoolean(null) // false\n * toBoolean(undefined) // false\n */\nexport const toBoolean = (value: unknown): boolean => {\n  if (typeof value === 'boolean') return value;\n  if (typeof value === 'string') {\n    const normalized = value.toLowerCase().trim();\n    if (normalized === 'true') return true;\n    if (normalized === 'false') return false;\n  }\n  if (typeof value === 'number') return value !== 0;\n  return false;\n};\n\n/**\n * 检查值是否为真值\n * @param value - 要检查的值\n * @returns 是否为真值\n * @example\n * isTruthy(true) // true\n * isTruthy(1) // true\n * isTruthy('test') // true\n * isTruthy([]) // true\n * isTruthy({}) // true\n * isTruthy(false) // false\n * isTruthy(0) // false\n * isTruthy('') // false\n * isTruthy(null) // false\n * isTruthy(undefined) // false\n */\nexport const isTruthy = (value: unknown): boolean => {\n  if (value === null || value === undefined) return false;\n  if (typeof value === 'boolean') return value;\n  if (typeof value === 'string') return value.length > 0;\n  if (typeof value === 'number') return value !== 0;\n  if (Array.isArray(value)) return value.length > 0;\n  if (typeof value === 'object') return Object.keys(value).length > 0;\n  return true;\n};\n\n/**\n * 检查值是否为假值\n * @param value - 要检查的值\n * @returns 是否为假值\n * @example\n * isFalsy(false) // true\n * isFalsy(0) // true\n * isFalsy('') // true\n * isFalsy(null) // true\n * isFalsy(undefined) // true\n * isFalsy(true) // false\n * isFalsy(1) // false\n * isFalsy('test') // false\n * isFalsy([]) // false\n * isFalsy({}) // false\n */\nexport const isFalsy = (value: unknown): boolean => !isTruthy(value); ","/**\n * Promise 工具函数\n */\n\n/**\n * 延迟执行\n * @param ms - 延迟时间（毫秒）\n * @returns Promise\n * @example\n * delay(1000).then(() => console.log('1秒后执行'))\n */\nexport const delay = (ms: number): Promise<void> => \n  new Promise(resolve => setTimeout(resolve, ms));\n\n/**\n * 超时处理\n * @param promise - Promise 对象\n * @param ms - 超时时间（毫秒）\n * @returns Promise\n * @example\n * timeout(fetch('https://api.example.com'), 5000)\n *   .then(response => response.json())\n *   .catch(error => console.error('请求超时'))\n */\nexport const timeout = <T>(promise: Promise<T>, ms: number): Promise<T> => {\n  const timeoutPromise = new Promise<T>((_, reject) => {\n    setTimeout(() => reject(new Error('Promise timeout')), ms);\n  });\n  return Promise.race([promise, timeoutPromise]);\n};\n\n/**\n * 重试执行\n * @param fn - 要执行的函数\n * @param retries - 重试次数\n * @param delay - 重试延迟（毫秒）\n * @returns Promise\n * @example\n * retry(() => fetch('https://api.example.com'), 3, 1000)\n *   .then(response => response.json())\n *   .catch(error => console.error('重试失败'))\n */\nexport const retry = <T>(\n  fn: () => Promise<T>,\n  retries: number,\n  delay: number\n): Promise<T> => {\n  return new Promise((resolve, reject) => {\n    const attempt = async (n: number) => {\n      try {\n        const result = await fn();\n        resolve(result);\n      } catch (error) {\n        if (n === 0) reject(error);\n        else setTimeout(() => attempt(n - 1), delay);\n      }\n    };\n    attempt(retries);\n  });\n};\n\n/**\n * 并发控制\n * @param tasks - 任务数组\n * @param limit - 并发限制\n * @returns Promise\n * @example\n * const tasks = [\n *   () => fetch('https://api1.example.com'),\n *   () => fetch('https://api2.example.com'),\n *   () => fetch('https://api3.example.com')\n * ];\n * concurrent(tasks, 2).then(results => console.log(results))\n */\nexport const concurrent = <T>(\n  tasks: (() => Promise<T>)[],\n  limit: number\n): Promise<T[]> => {\n  const results: T[] = [];\n  let current = 0;\n  let completed = 0;\n\n  return new Promise((resolve, reject) => {\n    const run = async (index: number) => {\n      try {\n        const result = await tasks[index]();\n        results[index] = result;\n        completed++;\n        if (completed === tasks.length) resolve(results);\n        else if (current < tasks.length) run(current++);\n      } catch (error) {\n        reject(error);\n      }\n    };\n\n    for (let i = 0; i < Math.min(limit, tasks.length); i++) {\n      run(current++);\n    }\n  });\n};\n\n/**\n * 防抖\n * @param fn - 要执行的函数\n * @param ms - 延迟时间（毫秒）\n * @returns 防抖后的函数\n * @example\n * const debouncedFn = debounce(() => console.log('执行'), 1000);\n * debouncedFn();\n * debouncedFn();\n * // 1秒后只执行一次\n */\nexport const debounce = <T extends (...args: any[]) => any>(\n  fn: T,\n  ms: number\n): ((...args: Parameters<T>) => void) => {\n  let timeoutId: ReturnType<typeof setTimeout>;\n  return (...args: Parameters<T>) => {\n    clearTimeout(timeoutId);\n    timeoutId = setTimeout(() => fn(...args), ms);\n  };\n};\n\n/**\n * 节流\n * @param fn - 要执行的函数\n * @param ms - 间隔时间（毫秒）\n * @returns 节流后的函数\n * @example\n * const throttledFn = throttle(() => console.log('执行'), 1000);\n * throttledFn();\n * throttledFn();\n * // 1秒内只执行一次\n */\nexport const throttle = <T extends (...args: any[]) => any>(\n  fn: T,\n  ms: number\n): ((...args: Parameters<T>) => void) => {\n  let lastTime = 0;\n  return (...args: Parameters<T>) => {\n    const now = Date.now();\n    if (now - lastTime >= ms) {\n      fn(...args);\n      lastTime = now;\n    }\n  };\n};\n\n/**\n * 包装 Promise\n * @param promise - Promise 对象\n * @returns 包装后的 Promise\n * @example\n * wrap(Promise.resolve(1))\n *   .then(([error, result]) => {\n *     if (error) console.error(error);\n *     else console.log(result);\n *   })\n */\nexport const wrap = <T>(\n  promise: Promise<T>\n): Promise<[Error | null, T | null]> => {\n  return promise\n    .then(result => [null, result] as [Error | null, T | null])\n    .catch(error => [error, null] as [Error | null, T | null]);\n};\n\n/**\n * 包装异步函数\n * @param fn - 异步函数\n * @returns 包装后的函数\n * @example\n * const wrappedFn = wrapAsync(async () => {\n *   const response = await fetch('https://api.example.com');\n *   return response.json();\n * });\n * const [error, result] = await wrappedFn();\n */\nexport const wrapAsync = <T extends (...args: any[]) => Promise<any>>(\n  fn: T\n): ((...args: Parameters<T>) => Promise<[Error | null, ReturnType<T> | null]>) => {\n  return (...args: Parameters<T>) => wrap(fn(...args));\n};\n\n/**\n * 创建可取消的 Promise\n * @returns 可取消的 Promise 和取消函数\n * @example\n * const [promise, cancel] = cancellable();\n * promise.then(() => console.log('完成'));\n * cancel();\n */\nexport const cancellable = <T>(): [\n  Promise<T>,\n  (reason?: any) => void\n] => {\n  let cancel: (reason?: any) => void;\n  const promise = new Promise<T>((_, reject) => {\n    cancel = (reason?: any) => reject(reason || new Error('Promise cancelled'));\n  });\n  return [promise, cancel!];\n};\n\n/**\n * 创建可取消的异步函数\n * @param fn - 异步函数\n * @returns 可取消的异步函数\n * @example\n * const cancellableFetch = cancellableAsync(async () => {\n *   const response = await fetch('https://api.example.com');\n *   return response.json();\n * });\n * const [promise, cancel] = cancellableFetch();\n * promise.then(result => console.log(result));\n * cancel();\n */\nexport const cancellableAsync = <T>(\n  fn: () => Promise<T>\n): () => [Promise<T>, (reason?: any) => void] => {\n  return () => {\n    const [promise, cancel] = cancellable<T>();\n    fn().then(\n      result => {\n        try {\n          (promise as any).resolve(result);\n        } catch {\n          // 如果 promise 已经被取消，忽略结果\n        }\n      },\n      error => {\n        try {\n          (promise as any).reject(error);\n        } catch {\n          // 如果 promise 已经被取消，忽略错误\n        }\n      }\n    );\n    return [promise, cancel];\n  };\n}; ","/**\n * 转义正则表达式中的特殊字符\n * @param str - 需要转义的字符串\n * @returns 转义后的字符串\n * @example\n * ```ts\n * escapeRegExp('.*+?^${}()|[]\\\\') // '\\.\\*\\+\\?\\^\\$\\{\\}\\(\\)\\|\\[\\]\\\\'\n * ```\n */\nexport const escapeRegExp = (str: string): string => {\n  return str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n};\n\n/**\n * 创建正则表达式对象\n * @param pattern - 正则表达式模式\n * @param flags - 正则表达式标志\n * @returns 正则表达式对象\n * @example\n * ```ts\n * createRegExp('test', 'gi') // /test/gi\n * ```\n */\nexport const createRegExp = (pattern: string, flags?: string): RegExp => {\n  return new RegExp(pattern, flags);\n};\n\n/**\n * 获取所有匹配结果\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 匹配结果数组\n * @example\n * ```ts\n * matchAll('test1 test2 test3', /\\w+(\\d+)/g) // [['test1', '1'], ['test2', '2'], ['test3', '3']]\n * ```\n */\nexport const matchAll = (str: string, regexp: RegExp): RegExpMatchArray[] => {\n  return Array.from(str.matchAll(regexp));\n};\n\n/**\n * 替换所有匹配项\n * @param str - 要替换的字符串\n * @param regexp - 正则表达式\n * @param replacement - 替换内容\n * @returns 替换后的字符串\n * @example\n * ```ts\n * replaceAll('test1 test2 test3', /\\w+(\\d+)/g, 'word$1') // 'word1 word2 word3'\n * ```\n */\nexport const replaceAll = (str: string, regexp: RegExp, replacement: string): string => {\n  return str.replace(new RegExp(regexp.source, regexp.flags + 'g'), replacement);\n};\n\n/**\n * 按正则表达式分割字符串\n * @param str - 要分割的字符串\n * @param regexp - 正则表达式\n * @returns 分割后的字符串数组\n * @example\n * ```ts\n * split('test1,test2;test3', /[,;]/) // ['test1', 'test2', 'test3']\n * ```\n */\nexport const split = (str: string, regexp: RegExp): string[] => {\n  return str.split(regexp);\n};\n\n/**\n * 测试字符串是否匹配正则表达式\n * @param str - 要测试的字符串\n * @param regexp - 正则表达式\n * @returns 是否匹配\n * @example\n * ```ts\n * test('test123', /\\d+/) // true\n * test('test', /\\d+/) // false\n * ```\n */\nexport const test = (str: string, regexp: RegExp): boolean => {\n  return regexp.test(str);\n};\n\n/**\n * 执行正则表达式匹配\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 匹配结果\n * @example\n * ```ts\n * exec('test123', /(\\d+)/) // ['123', '123']\n * ```\n */\nexport const exec = (str: string, regexp: RegExp): RegExpExecArray | null => {\n  return regexp.exec(str);\n};\n\n/**\n * 执行所有正则表达式匹配\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配结果\n * @example\n * ```ts\n * execAll('test1 test2 test3', /\\w+(\\d+)/g) // [['test1', '1'], ['test2', '2'], ['test3', '3']]\n * ```\n */\nexport const execAll = (str: string, regexp: RegExp): RegExpExecArray[] => {\n  const results: RegExpExecArray[] = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    results.push(match);\n  }\n  return results;\n};\n\n/**\n * 返回匹配结果\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 匹配结果\n * @example\n * ```ts\n * match('test123', /(\\d+)/) // ['123', '123']\n * ```\n */\nexport const match = (str: string, regexp: RegExp): RegExpMatchArray | null => {\n  return str.match(regexp);\n};\n\n/**\n * 返回匹配位置\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 匹配位置\n * @example\n * ```ts\n * search('test123', /\\d+/) // 4\n * search('test', /\\d+/) // -1\n * ```\n */\nexport const search = (str: string, regexp: RegExp): number => {\n  return str.search(regexp);\n};\n\n/**\n * 替换匹配项\n * @param str - 要替换的字符串\n * @param regexp - 正则表达式\n * @param replacement - 替换内容\n * @returns 替换后的字符串\n * @example\n * ```ts\n * replace('test123', /(\\d+)/, '456') // 'test456'\n * ```\n */\nexport const replace = (str: string, regexp: RegExp, replacement: string): string => {\n  return str.replace(regexp, replacement);\n};\n\n/**\n * 获取正则表达式的所有捕获组\n * @param regexp - 正则表达式\n * @returns 捕获组数组\n * @example\n * ```ts\n * getCaptureGroups(/test-(\\\\d+)-(\\\\w+)/) // ['$1', '$2']\n * ```\n */\nexport const getCaptureGroups = (regexp: RegExp): string[] => {\n  const groups: string[] = [];\n  const source = regexp.source;\n  const groupRegex = /\\([^)]*\\)/g;\n  let index = 0;\n  while (groupRegex.exec(source) !== null) {\n    groups.push(`$${++index}`);\n  }\n  return groups;\n};\n\n/**\n * 获取正则表达式的所有标志\n * @param regexp - 正则表达式\n * @returns 标志数组\n * @example\n * ```ts\n * getFlags(/test/gi) // ['g', 'i']\n * ```\n */\nexport const getFlags = (regexp: RegExp): string[] => {\n  return regexp.flags.split('');\n};\n\n/**\n * 检查正则表达式是否包含指定标志\n * @param regexp - 正则表达式\n * @param flag - 要检查的标志\n * @returns 是否包含标志\n * @example\n * ```ts\n * hasFlag(/test/gi, 'g') // true\n * hasFlag(/test/gi, 'm') // false\n * ```\n */\nexport const hasFlag = (regexp: RegExp, flag: string): boolean => {\n  return regexp.flags.includes(flag);\n};\n\n/**\n * 添加正则表达式标志\n * @param regexp - 正则表达式\n * @param flag - 要添加的标志\n * @returns 新的正则表达式\n * @example\n * ```ts\n * addFlag(/test/, 'g') // /test/g\n * ```\n */\nexport const addFlag = (regexp: RegExp, flag: string): RegExp => {\n  return new RegExp(regexp.source, regexp.flags + flag);\n};\n\n/**\n * 移除正则表达式标志\n * @param regexp - 正则表达式\n * @param flag - 要移除的标志\n * @returns 新的正则表达式\n * @example\n * ```ts\n * removeFlag(/test/gi, 'i') // /test/g\n * ```\n */\nexport const removeFlag = (regexp: RegExp, flag: string): RegExp => {\n  return new RegExp(regexp.source, regexp.flags.replace(flag, ''));\n};\n\n/**\n * 获取正则表达式的源字符串\n * @param regexp - 正则表达式\n * @returns 源字符串\n * @example\n * ```ts\n * getSource(/test/) // 'test'\n * ```\n */\nexport const getSource = (regexp: RegExp): string => {\n  return regexp.source;\n};\n\n/**\n * 获取正则表达式的完整字符串表示\n * @param regexp - 正则表达式\n * @returns 完整字符串表示\n * @example\n * ```ts\n * toString(/test/gi) // '/test/gi'\n * ```\n */\nexport const toString = (regexp: RegExp): string => {\n  return regexp.toString();\n};\n\n/**\n * 克隆正则表达式\n * @param regexp - 正则表达式\n * @returns 新的正则表达式\n * @example\n * ```ts\n * clone(/test/gi) // /test/gi\n * ```\n */\nexport const clone = (regexp: RegExp): RegExp => {\n  return new RegExp(regexp.source, regexp.flags);\n};\n\n/**\n * 合并多个正则表达式\n * @param patterns - 正则表达式数组\n * @param flags - 正则表达式标志\n * @returns 合并后的正则表达式\n * @example\n * ```ts\n * combine([/\\d+/, /\\w+/], 'g') // /(\\d+)|(\\w+)/g\n * ```\n */\nexport const combine = (patterns: RegExp[], flags?: string): RegExp => {\n  const source = patterns.map(p => `(${p.source})`).join('|');\n  return new RegExp(source, flags);\n};\n\n/**\n * 获取正则表达式的匹配次数\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 匹配次数\n * @example\n * ```ts\n * countMatches('test1 test2 test3', /\\w+(\\d+)/g) // 3\n * ```\n */\nexport const countMatches = (str: string, regexp: RegExp): number => {\n  return (str.match(regexp) || []).length;\n};\n\n/**\n * 获取正则表达式的第一个匹配位置\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 第一个匹配位置\n * @example\n * ```ts\n * firstMatchIndex('test123', /\\d+/) // 4\n * ```\n */\nexport const firstMatchIndex = (str: string, regexp: RegExp): number => {\n  const match = str.match(regexp);\n  return match ? str.indexOf(match[0]) : -1;\n};\n\n/**\n * 获取正则表达式的最后一个匹配位置\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 最后一个匹配位置\n * @example\n * ```ts\n * lastMatchIndex('test123', /\\d+/) // 4\n * ```\n */\nexport const lastMatchIndex = (str: string, regexp: RegExp): number => {\n  const matches = str.match(regexp);\n  return matches ? str.lastIndexOf(matches[matches.length - 1]) : -1;\n};\n\n/**\n * 获取正则表达式的所有匹配位置\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配位置\n * @example\n * ```ts\n * allMatchIndices('test1 test2 test3', /\\w+(\\d+)/g) // [0, 6, 12]\n * ```\n */\nexport const allMatchIndices = (str: string, regexp: RegExp): number[] => {\n  const indices: number[] = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    indices.push(match.index);\n  }\n  return indices;\n};\n\n/**\n * 获取正则表达式的所有匹配范围\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配范围\n * @example\n * ```ts\n * allMatchRanges('test1 test2 test3', /\\w+(\\d+)/g) // [[0, 5], [6, 11], [12, 17]]\n * ```\n */\nexport const allMatchRanges = (str: string, regexp: RegExp): [number, number][] => {\n  const ranges: [number, number][] = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    ranges.push([match.index, match.index + match[0].length]);\n  }\n  return ranges;\n};\n\n/**\n * 获取正则表达式的所有匹配文本\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配文本\n * @example\n * ```ts\n * allMatchTexts('test1 test2 test3', /\\w+(\\d+)/g) // ['test1', 'test2', 'test3']\n * ```\n */\nexport const allMatchTexts = (str: string, regexp: RegExp): string[] => {\n  return (str.match(regexp) || []);\n};\n\n/**\n * 获取正则表达式的所有捕获组值\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有捕获组值\n * @example\n * ```ts\n * allCaptureGroups('test1 test2 test3', /\\w+(\\d+)/g) // [['1'], ['2'], ['3']]\n * ```\n */\nexport const allCaptureGroups = (str: string, regexp: RegExp): string[][] => {\n  const groups: string[][] = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    groups.push(match.slice(1));\n  }\n  return groups;\n};\n\n/**\n * 获取正则表达式的所有命名捕获组\n * @param regexp - 正则表达式\n * @returns 所有命名捕获组\n * @example\n * ```ts\n * getNamedCaptureGroups(/(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/) // ['year', 'month', 'day']\n * ```\n */\nexport const getNamedCaptureGroups = (regexp: RegExp): string[] => {\n  const groups: string[] = [];\n  const source = regexp.source;\n  const groupRegex = /\\(\\?<(\\w+)>[^)]*\\)/g;\n  let match: RegExpExecArray | null;\n  while ((match = groupRegex.exec(source)) !== null) {\n    groups.push(match[1]);\n  }\n  return groups;\n};\n\n/**\n * 获取正则表达式的所有命名捕获组值\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有命名捕获组值\n * @example\n * ```ts\n * allNamedCaptureGroups('2023-01-01', /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/) // [{ year: '2023', month: '01', day: '01' }]\n * ```\n */\nexport const allNamedCaptureGroups = (str: string, regexp: RegExp): Array<Record<string, string>> => {\n  const results: Array<Record<string, string>> = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    if (match.groups) {\n      results.push(match.groups as Record<string, string>);\n    }\n  }\n  return results;\n};\n\n/**\n * 获取正则表达式的所有匹配位置和文本\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配位置和文本\n * @example\n * ```ts\n * allMatchPositions('test1 test2 test3', /\\w+(\\d+)/g) // [{ index: 0, text: 'test1' }, { index: 6, text: 'test2' }, { index: 12, text: 'test3' }]\n * ```\n */\nexport const allMatchPositions = (str: string, regexp: RegExp): Array<{ index: number; text: string }> => {\n  const positions: Array<{ index: number; text: string }> = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    positions.push({\n      index: match.index,\n      text: match[0]\n    });\n  }\n  return positions;\n};\n\n/**\n * 获取正则表达式的所有匹配范围和文本\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配范围和文本\n * @example\n * ```ts\n * allMatchRangesWithText('test1 test2 test3', /\\w+(\\d+)/g) // [{ start: 0, end: 5, text: 'test1' }, { start: 6, end: 11, text: 'test2' }, { start: 12, end: 17, text: 'test3' }]\n * ```\n */\nexport const allMatchRangesWithText = (str: string, regexp: RegExp): Array<{ start: number; end: number; text: string }> => {\n  const ranges: Array<{ start: number; end: number; text: string }> = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    ranges.push({\n      start: match.index,\n      end: match.index + match[0].length,\n      text: match[0]\n    });\n  }\n  return ranges;\n};\n\n/**\n * 获取正则表达式的所有匹配位置和捕获组\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配位置和捕获组\n * @example\n * ```ts\n * allMatchPositionsWithGroups('test1 test2 test3', /\\w+(\\d+)/g) // [{ index: 0, groups: ['1'] }, { index: 6, groups: ['2'] }, { index: 12, groups: ['3'] }]\n * ```\n */\nexport const allMatchPositionsWithGroups = (str: string, regexp: RegExp): Array<{ index: number; groups: string[] }> => {\n  const positions: Array<{ index: number; groups: string[] }> = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    positions.push({\n      index: match.index,\n      groups: match.slice(1)\n    });\n  }\n  return positions;\n};\n\n/**\n * 获取正则表达式的所有匹配范围和捕获组\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配范围和捕获组\n * @example\n * ```ts\n * allMatchRangesWithGroups('test1 test2 test3', /\\w+(\\d+)/g) // [{ start: 0, end: 5, groups: ['1'] }, { start: 6, end: 11, groups: ['2'] }, { start: 12, end: 17, groups: ['3'] }]\n * ```\n */\nexport const allMatchRangesWithGroups = (str: string, regexp: RegExp): Array<{ start: number; end: number; groups: string[] }> => {\n  const ranges: Array<{ start: number; end: number; groups: string[] }> = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    ranges.push({\n      start: match.index,\n      end: match.index + match[0].length,\n      groups: match.slice(1)\n    });\n  }\n  return ranges;\n};\n\n/**\n * 获取正则表达式的所有匹配位置和命名捕获组\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配位置和命名捕获组\n * @example\n * ```ts\n * allMatchPositionsWithNamedGroups('2023-01-01', /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/) // [{ index: 0, groups: { year: '2023', month: '01', day: '01' } }]\n * ```\n */\nexport const allMatchPositionsWithNamedGroups = (str: string, regexp: RegExp): Array<{ index: number; groups: Record<string, string> }> => {\n  const results: Array<{ index: number; groups: Record<string, string> }> = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    if (match.groups) {\n      results.push({\n        index: match.index,\n        groups: match.groups as Record<string, string>\n      });\n    }\n  }\n  return results;\n};\n\n/**\n * 获取正则表达式的所有匹配范围和命名捕获组\n * @param str - 要匹配的字符串\n * @param regexp - 正则表达式\n * @returns 所有匹配范围和命名捕获组\n * @example\n * ```ts\n * allMatchRangesWithNamedGroups('2023-01-01', /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/) // [{ start: 0, end: 10, groups: { year: '2023', month: '01', day: '01' } }]\n * ```\n */\nexport const allMatchRangesWithNamedGroups = (str: string, regexp: RegExp): Array<{ start: number; end: number; groups: Record<string, string> }> => {\n  const results: Array<{ start: number; end: number; groups: Record<string, string> }> = [];\n  let match: RegExpExecArray | null;\n  while ((match = regexp.exec(str)) !== null) {\n    if (match.groups) {\n      results.push({\n        start: match.index,\n        end: match.index + match[0].length,\n        groups: match.groups as Record<string, string>\n      });\n    }\n  }\n  return results;\n}; ","/**\n * 错误处理工具函数\n */\n\n/**\n * 创建自定义错误类\n * @param name - 错误名称\n * @param message - 错误信息\n * @param code - 错误代码\n * @returns 自定义错误实例\n * @example\n * createError('ValidationError', 'Invalid input', 'E001')\n */\nexport class CustomError extends Error {\n  constructor(\n    name: string,\n    message: string,\n    public code?: string\n  ) {\n    super(message);\n    this.name = name;\n  }\n}\n\n/**\n * 创建验证错误\n * @param message - 错误信息\n * @param code - 错误代码\n * @returns 验证错误实例\n * @example\n * createValidationError('Invalid input', 'E001')\n */\nexport const createValidationError = (message: string, code?: string): CustomError => \n  new CustomError('ValidationError', message, code);\n\n/**\n * 创建业务错误\n * @param message - 错误信息\n * @param code - 错误代码\n * @returns 业务错误实例\n * @example\n * createBusinessError('Operation failed', 'E002')\n */\nexport const createBusinessError = (message: string, code?: string): CustomError => \n  new CustomError('BusinessError', message, code);\n\n/**\n * 创建网络错误\n * @param message - 错误信息\n * @param code - 错误代码\n * @returns 网络错误实例\n * @example\n * createNetworkError('Connection failed', 'E003')\n */\nexport const createNetworkError = (message: string, code?: string): CustomError => \n  new CustomError('NetworkError', message, code);\n\n/**\n * 创建权限错误\n * @param message - 错误信息\n * @param code - 错误代码\n * @returns 权限错误实例\n * @example\n * createPermissionError('Access denied', 'E004')\n */\nexport const createPermissionError = (message: string, code?: string): CustomError => \n  new CustomError('PermissionError', message, code);\n\n/**\n * 创建资源错误\n * @param message - 错误信息\n * @param code - 错误代码\n * @returns 资源错误实例\n * @example\n * createResourceError('Resource not found', 'E005')\n */\nexport const createResourceError = (message: string, code?: string): CustomError => \n  new CustomError('ResourceError', message, code);\n\n/**\n * 检查是否为自定义错误\n * @param error - 错误对象\n * @returns 是否为自定义错误\n * @example\n * isCustomError(new CustomError('Test', 'test')) // true\n * isCustomError(new Error('test')) // false\n */\nexport const isCustomError = (error: unknown): error is CustomError => \n  error instanceof CustomError;\n\n/**\n * 检查是否为验证错误\n * @param error - 错误对象\n * @returns 是否为验证错误\n * @example\n * isValidationError(createValidationError('test')) // true\n * isValidationError(new Error('test')) // false\n */\nexport const isValidationError = (error: unknown): error is CustomError => \n  isCustomError(error) && error.name === 'ValidationError';\n\n/**\n * 检查是否为业务错误\n * @param error - 错误对象\n * @returns 是否为业务错误\n * @example\n * isBusinessError(createBusinessError('test')) // true\n * isBusinessError(new Error('test')) // false\n */\nexport const isBusinessError = (error: unknown): error is CustomError => \n  isCustomError(error) && error.name === 'BusinessError';\n\n/**\n * 检查是否为网络错误\n * @param error - 错误对象\n * @returns 是否为网络错误\n * @example\n * isNetworkError(createNetworkError('test')) // true\n * isNetworkError(new Error('test')) // false\n */\nexport const isNetworkError = (error: unknown): error is CustomError => \n  isCustomError(error) && error.name === 'NetworkError';\n\n/**\n * 检查是否为权限错误\n * @param error - 错误对象\n * @returns 是否为权限错误\n * @example\n * isPermissionError(createPermissionError('test')) // true\n * isPermissionError(new Error('test')) // false\n */\nexport const isPermissionError = (error: unknown): error is CustomError => \n  isCustomError(error) && error.name === 'PermissionError';\n\n/**\n * 检查是否为资源错误\n * @param error - 错误对象\n * @returns 是否为资源错误\n * @example\n * isResourceError(createResourceError('test')) // true\n * isResourceError(new Error('test')) // false\n */\nexport const isResourceError = (error: unknown): error is CustomError => \n  isCustomError(error) && error.name === 'ResourceError';\n\n/**\n * 获取错误堆栈信息\n * @param error - 错误对象\n * @returns 错误堆栈信息\n * @example\n * getErrorStack(new Error('test'))\n */\nexport const getErrorStack = (error: Error): string => \n  error.stack || '';\n\n/**\n * 获取错误消息\n * @param error - 错误对象\n * @returns 错误消息\n * @example\n * getErrorMessage(new Error('test')) // 'test'\n */\nexport const getErrorMessage = (error: unknown): string => \n  error instanceof Error ? error.message : String(error);\n\n/**\n * 获取错误代码\n * @param error - 错误对象\n * @returns 错误代码\n * @example\n * getErrorCode(createCustomError('Test', 'test', 'E001')) // 'E001'\n */\nexport const getErrorCode = (error: unknown): string | undefined => \n  isCustomError(error) ? error.code : undefined;\n\n/**\n * 获取错误名称\n * @param error - 错误对象\n * @returns 错误名称\n * @example\n * getErrorName(new Error('test')) // 'Error'\n */\nexport const getErrorName = (error: unknown): string => \n  error instanceof Error ? error.name : 'UnknownError'; ","/**\n * Symbol 工具函数\n */\n\n/**\n * 创建唯一的 Symbol\n * @param description - Symbol 描述\n * @returns 唯一的 Symbol\n * @example\n * createSymbol('test') // Symbol('test')\n */\nexport const createSymbol = (description?: string): symbol => \n  Symbol(description);\n\n/**\n * 创建全局唯一的 Symbol\n * @param key - Symbol 键名\n * @returns 全局唯一的 Symbol\n * @example\n * createGlobalSymbol('test') // Symbol.for('test')\n */\nexport const createGlobalSymbol = (key: string): symbol => \n  Symbol.for(key);\n\n/**\n * 获取 Symbol 的描述\n * @param sym - Symbol 对象\n * @returns Symbol 描述\n * @example\n * getSymbolDescription(Symbol('test')) // 'test'\n */\nexport const getSymbolDescription = (sym: symbol): string | undefined => \n  sym.description;\n\n/**\n * 获取 Symbol 的键名\n * @param sym - Symbol 对象\n * @returns Symbol 键名\n * @example\n * getSymbolKey(Symbol.for('test')) // 'test'\n */\nexport const getSymbolKey = (sym: symbol): string | undefined => \n  Symbol.keyFor(sym);\n\n/**\n * 检查是否为 Symbol\n * @param value - 要检查的值\n * @returns 是否为 Symbol\n * @example\n * isSymbol(Symbol('test')) // true\n * isSymbol('test') // false\n */\nexport const isSymbol = (value: unknown): value is symbol => \n  typeof value === 'symbol';\n\n/**\n * 检查是否为全局 Symbol\n * @param sym - Symbol 对象\n * @returns 是否为全局 Symbol\n * @example\n * isGlobalSymbol(Symbol.for('test')) // true\n * isGlobalSymbol(Symbol('test')) // false\n */\nexport const isGlobalSymbol = (sym: symbol): boolean => \n  Symbol.keyFor(sym) !== undefined;\n\n/**\n * 创建 Symbol 迭代器\n * @param sym - Symbol 对象\n * @returns Symbol 迭代器\n * @example\n * createSymbolIterator(Symbol('test'))\n */\nexport const createSymbolIterator = (sym: symbol): Iterator<symbol> => ({\n  next: () => ({ value: sym, done: true })\n});\n\n/**\n * 创建 Symbol 异步迭代器\n * @param sym - Symbol 对象\n * @returns Symbol 异步迭代器\n * @example\n * createSymbolAsyncIterator(Symbol('test'))\n */\nexport const createSymbolAsyncIterator = (sym: symbol): AsyncIterator<symbol> => ({\n  next: async () => ({ value: sym, done: true })\n});\n\n/**\n * 创建 Symbol 生成器\n * @param sym - Symbol 对象\n * @returns Symbol 生成器\n * @example\n * createSymbolGenerator(Symbol('test'))\n */\nexport function* createSymbolGenerator(sym: symbol): Generator<symbol> {\n  yield sym;\n}\n\n/**\n * 创建 Symbol 异步生成器\n * @param sym - Symbol 对象\n * @returns Symbol 异步生成器\n * @example\n * createSymbolAsyncGenerator(Symbol('test'))\n */\nexport async function* createSymbolAsyncGenerator(sym: symbol): AsyncGenerator<symbol> {\n  yield sym;\n}\n\n/**\n * 创建 Symbol 数组\n * @param descriptions - Symbol 描述数组\n * @returns Symbol 数组\n * @example\n * createSymbolArray(['test1', 'test2']) // [Symbol('test1'), Symbol('test2')]\n */\nexport const createSymbolArray = (descriptions: string[]): symbol[] => \n  descriptions.map(description => Symbol(description));\n\n/**\n * 创建全局 Symbol 数组\n * @param keys - Symbol 键名数组\n * @returns 全局 Symbol 数组\n * @example\n * createGlobalSymbolArray(['test1', 'test2']) // [Symbol.for('test1'), Symbol.for('test2')]\n */\nexport const createGlobalSymbolArray = (keys: string[]): symbol[] => \n  keys.map(key => Symbol.for(key));\n\n/**\n * 创建 Symbol 映射\n * @param descriptions - Symbol 描述数组\n * @returns Symbol 映射\n * @example\n * createSymbolMap(['test1', 'test2']) // { test1: Symbol('test1'), test2: Symbol('test2') }\n */\nexport const createSymbolMap = (descriptions: string[]): Record<string, symbol> => \n  descriptions.reduce((map, description) => ({\n    ...map,\n    [description]: Symbol(description)\n  }), {});\n\n/**\n * 创建全局 Symbol 映射\n * @param keys - Symbol 键名数组\n * @returns 全局 Symbol 映射\n * @example\n * createGlobalSymbolMap(['test1', 'test2']) // { test1: Symbol.for('test1'), test2: Symbol.for('test2') }\n */\nexport const createGlobalSymbolMap = (keys: string[]): Record<string, symbol> => \n  keys.reduce((map, key) => ({\n    ...map,\n    [key]: Symbol.for(key)\n  }), {}); ","/**\n * BigInt 工具函数\n */\n\n/**\n * 创建 BigInt\n * @param value - 要转换的值\n * @returns BigInt 值\n * @example\n * createBigInt(123) // 123n\n * createBigInt('123') // 123n\n */\nexport const createBigInt = (value: number | string): bigint => \n  BigInt(value);\n\n/**\n * 检查是否为 BigInt\n * @param value - 要检查的值\n * @returns 是否为 BigInt\n * @example\n * isBigInt(123n) // true\n * isBigInt(123) // false\n */\nexport const isBigInt = (value: unknown): value is bigint => \n  typeof value === 'bigint';\n\n/**\n * 检查是否为有效的 BigInt\n * @param value - 要检查的值\n * @returns 是否为有效的 BigInt\n * @example\n * isValidBigInt(123n) // true\n * isValidBigInt('123') // true\n * isValidBigInt('abc') // false\n */\nexport const isValidBigInt = (value: unknown): boolean => {\n  try {\n    if (typeof value === 'bigint') return true;\n    if (typeof value === 'string') {\n      BigInt(value);\n      return true;\n    }\n    return false;\n  } catch {\n    return false;\n  }\n};\n\n/**\n * 将 BigInt 转换为字符串\n * @param value - BigInt 值\n * @param radix - 进制\n * @returns 字符串\n * @example\n * bigIntToString(123n) // '123'\n * bigIntToString(123n, 16) // '7b'\n */\nexport const bigIntToString = (value: bigint, radix: number = 10): string => \n  value.toString(radix);\n\n/**\n * 将字符串转换为 BigInt\n * @param value - 字符串\n * @param radix - 进制\n * @returns BigInt 值\n * @example\n * stringToBigInt('123') // 123n\n * stringToBigInt('7b', 16) // 123n\n */\nexport const stringToBigInt = (value: string, radix: number = 10): bigint => \n  BigInt(parseInt(value, radix));\n\n/**\n * 获取 BigInt 的绝对值\n * @param value - BigInt 值\n * @returns 绝对值\n * @example\n * bigIntAbs(-123n) // 123n\n */\nexport const bigIntAbs = (value: bigint): bigint => \n  value < 0n ? -value : value;\n\n/**\n * 获取 BigInt 的符号\n * @param value - BigInt 值\n * @returns 符号（1、0 或 -1）\n * @example\n * bigIntSign(123n) // 1\n * bigIntSign(0n) // 0\n * bigIntSign(-123n) // -1\n */\nexport const bigIntSign = (value: bigint): number => \n  value === 0n ? 0 : value > 0n ? 1 : -1;\n\n/**\n * 获取 BigInt 的位数\n * @param value - BigInt 值\n * @returns 位数\n * @example\n * bigIntLength(123n) // 3\n */\nexport const bigIntLength = (value: bigint): number => \n  bigIntToString(bigIntAbs(value)).length;\n\n/**\n * 检查 BigInt 是否为偶数\n * @param value - BigInt 值\n * @returns 是否为偶数\n * @example\n * isBigIntEven(123n) // false\n * isBigIntEven(124n) // true\n */\nexport const isBigIntEven = (value: bigint): boolean => \n  value % 2n === 0n;\n\n/**\n * 检查 BigInt 是否为奇数\n * @param value - BigInt 值\n * @returns 是否为奇数\n * @example\n * isBigIntOdd(123n) // true\n * isBigIntOdd(124n) // false\n */\nexport const isBigIntOdd = (value: bigint): boolean => \n  value % 2n === 1n;\n\n/**\n * 检查 BigInt 是否为质数\n * @param value - BigInt 值\n * @returns 是否为质数\n * @example\n * isBigIntPrime(17n) // true\n * isBigIntPrime(18n) // false\n */\nexport const isBigIntPrime = (value: bigint): boolean => {\n  if (value <= 1n) return false;\n  if (value <= 3n) return true;\n  if (isBigIntEven(value)) return false;\n\n  const sqrt = bigIntSqrt(value);\n  for (let i = 3n; i <= sqrt; i += 2n) {\n    if (value % i === 0n) return false;\n  }\n  return true;\n};\n\n/**\n * 获取 BigInt 的平方根\n * @param value - BigInt 值\n * @returns 平方根\n * @example\n * bigIntSqrt(16n) // 4n\n * bigIntSqrt(17n) // 4n\n */\nexport const bigIntSqrt = (value: bigint): bigint => {\n  if (value < 0n) throw new Error('Cannot calculate square root of negative number');\n  if (value <= 1n) return value;\n\n  let x = value / 2n;\n  let y = (x + value / x) / 2n;\n\n  while (y < x) {\n    x = y;\n    y = (x + value / x) / 2n;\n  }\n\n  return x;\n};\n\n/**\n * 获取 BigInt 的幂\n * @param base - 底数\n * @param exponent - 指数\n * @returns 幂\n * @example\n * bigIntPow(2n, 3n) // 8n\n */\nexport const bigIntPow = (base: bigint, exponent: bigint): bigint => {\n  if (exponent < 0n) throw new Error('Exponent must be non-negative');\n  if (exponent === 0n) return 1n;\n  if (exponent === 1n) return base;\n\n  let result = 1n;\n  let current = base;\n\n  while (exponent > 0n) {\n    if (exponent % 2n === 1n) {\n      result *= current;\n    }\n    current *= current;\n    exponent /= 2n;\n  }\n\n  return result;\n};\n\n/**\n * 获取 BigInt 的最大公约数\n * @param a - 第一个数\n * @param b - 第二个数\n * @returns 最大公约数\n * @example\n * bigIntGcd(12n, 18n) // 6n\n */\nexport const bigIntGcd = (a: bigint, b: bigint): bigint => {\n  a = bigIntAbs(a);\n  b = bigIntAbs(b);\n  while (b !== 0n) {\n    [a, b] = [b, a % b];\n  }\n  return a;\n};\n\n/**\n * 获取 BigInt 的最小公倍数\n * @param a - 第一个数\n * @param b - 第二个数\n * @returns 最小公倍数\n * @example\n * bigIntLcm(12n, 18n) // 36n\n */\nexport const bigIntLcm = (a: bigint, b: bigint): bigint => {\n  a = bigIntAbs(a);\n  b = bigIntAbs(b);\n  return (a * b) / bigIntGcd(a, b);\n}; ","/**\n * Q-Utils 工具函数库\n * \n * 一个功能丰富的前端工具函数库，提供了日常开发中常用的各类实用工具函数。\n * 按功能分类，可按需引入。\n * \n * @packageDocumentation\n */\n\n// 导入模块并重新导出\nimport * as array from './array';\nimport * as browser from './browser';\nimport * as color from './color';\nimport * as date from './date';\nimport * as dom from './dom';\nimport * as file from './file';\nimport * as func from './function';\nimport * as network from './network';\nimport * as number from './number';\nimport * as object from './object';\nimport * as storage from './storage';\nimport * as string from './string';\nimport * as type from './type';\nimport * as empty from './empty';\nimport * as boolean from './boolean';\nimport * as promise from './promise';\nimport * as regexp from './regexp';\nimport * as error from './error';\nimport * as symbol from './symbol';\nimport * as bigint from './bigint';\n\n// 命名空间方式导出\nexport {\n    array,\n    browser,\n    color,\n    date,\n    dom,\n    file,   \n    func,\n    network,\n    number,\n    object,\n    storage,\n    string,\n    type,\n    empty,\n    boolean,\n    promise,\n    regexp,\n    error,\n    symbol,\n    bigint,\n}\n\n// 创建一个包含所有命名空间的对象，作为默认导出\nconst qUtils = {\n    array,\n    browser,\n    color,\n    date,\n    dom,\n    file,   \n    func,\n    network,\n    number,\n    object,\n    storage,\n    string,\n    type,\n    empty,\n    boolean,\n    promise,\n    regexp,\n    error,\n    symbol,\n    bigint,\n};\n\n// 默认导出整个库\nexport default qUtils;\n\n"],"names":["arr","predicate","Array","isArray","every","some","options","idKey","parentKey","childrenKey","map","Map","result","forEach","item","set","node","get","parentId","push","parent","size","i","length","slice","from","Math","ceil","_","reduce","acc","key","String","arr1","arr2","compareFn","filter","otherItem","filterTree","tree","children","findTreeNode","found","flatten","depth","Infinity","val","concat","index","defaultValue","keyOrFn","groups","subArr","j","fromIndex","toIndex","splice","floor","random","count","tempArr","randomIndex","start","end","range","len","normalizedCount","order","a","b","aVal","bVal","sort","conditions","balanced","group","sum","avg","min","max","index1","index2","keyFn","valueFn","obj","value","transformFn","Set","separator","join","traverse","nodes","rest","existingItem","seen","has","add","getBrowserInfo","userAgent","navigator","name","version","isMobile","test","match","isBrowser","browserName","toLowerCase","vendor","window","opera","isTablet","screenWidth","innerWidth","document","documentElement","clientWidth","body","isPortrait","matchMedia","matches","innerHeight","devicePixelRatio","MSStream","maxTouchPoints","msMaxTouchPoints","property","style","inputType","input","createElement","setAttribute","type","query","api","color","adjustments","lightness","saturation","hue","alpha","hsl","r","g","hex","replace","console","error","fullHex","split","c","parseInt","substring","h","s","l","d","round","toHSL","undefined","hslToString","hNormalized","sNormalized","lNormalized","hue2rgb","p","q","t","hslToRgb","format","cleanHex","char","red","green","blue","prefix","toString","padStart","getFirstDayOfMonth","date","Date","getFullYear","getMonth","getLastDayOfMonth","startOfDay","setHours","endOfDay","solarToLunar","baseDate","offset","getTime","year","month","day","leap","convertTimeZone","fromZone","toZone","fromOffset","getTimezoneOffset","diff","timezone","UTC","isToday","today","getDate","addDays","days","setDate","generateCalendarMonth","firstDay","daysInMonth","prevMonthDays","getDay","prevMonth","isCurrentMonth","isWeekend","remainingDays","months","setMonth","years","setFullYear","hours","getHours","minutes","getMinutes","seconds","getSeconds","milliseconds","getMilliseconds","week","weekStart","getStartOfWeek","grid","range1","range2","start1","end1","start2","end2","startDate","endDate","dates","curDate","lunar","firstDayOfYear","pastDaysOfYear","dayOfWeek","compareDate","isNaN","time","date1","date2","Intl","DateTimeFormat","resolvedOptions","timeZone","setStyle","element","on","eventType","handler","addEventListener","off","removeEventListener","className","classList","properties","duration","timing","transitions","prop","transition","selector","closest","async","text","clipboard","writeText","err","textarea","appendChild","select","execCommand","removeChild","tag","attributes","Object","entries","child","createTextNode","event","matched","target","call","form","elements","removeAttribute","callback","opacity","display","performance","now","animate","currentTime","elapsed","progress","requestAnimationFrame","getComputedStyle","getPropertyValue","dataset","width","parseFloat","borderLeftWidth","borderRightWidth","height","borderTopWidth","borderBottomWidth","scrollWidth","scrollHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","rect","getBoundingClientRect","top","scrollY","left","scrollX","scrollTop","scrollLeft","field","HTMLInputElement","checked","innerHTML","textContent","contains","newElement","targetElement","parentNode","insertBefore","nextSibling","threshold","windowHeight","windowWidth","visibleHeight","bottom","visibleWidth","right","elementHeight","elementWidth","tabIndex","getAttribute","tagName","visibility","onceHandler","querySelector","remove","reset","formData","FormData","data","position","html","styles","overflow","toggle","base64","filename","binaryString","startsWith","extension","pop","atob","e","Error","bytes","Uint8Array","charCodeAt","blob","Blob","File","lastModified","file","includePrefix","Promise","resolve","reject","reader","FileReader","onload","dataUrl","onerror","message","readAsDataURL","includeDot","basename","lastSlashIndex","lastIndexOf","lastDotIndex","formatted","precision","locale","units","unitIndex","log","safeUnitIndex","pow","toLocaleString","minimumFractionDigits","maximumFractionDigits","allowedTypes","endsWith","includes","mimeType","txt","htm","css","csv","pdf","json","js","xml","zip","doc","docx","xls","xlsx","ppt","pptx","png","jpg","jpeg","gif","svg","webp","bmp","ico","mp3","wav","ogg","flac","m4a","mp4","webm","avi","mov","wmv","flv","ttf","otf","woff","woff2","getMimeTypeFromExtension","readAs","readAsText","readAsArrayBuffer","readAsBinaryString","content","endings","ArrayBuffer","isView","blobUrl","URL","createObjectURL","link","href","download","click","setTimeout","revokeObjectURL","debouncedFn","timeout","clearTimeout","throttledFn","funcs","arg","reduceRight","composed","func","arity","curried","args","moreArgs","wait","immediate","timeoutId","debounced","context","this","callNow","apply","cancel","resolver","cache","called","ms","previous","leading","trailing","later","funcArgs","remaining","baseUrl","params","url","searchParams","append","hasParams","paramEntries","encodeURIComponent","forceDownload","headers","response","fetch","method","ok","status","contentDisposition","filenameMatch","exec","urlParts","controller","AbortController","signal","abort","fetchOptions","then","catch","pathname","location","hostname","protocol","baseURL","relativeURL","callbackParam","callbackName","script","originalWindow","cleanup","jsonpUrl","src","head","urlToParse","queryIndex","indexOf","queryString","hashIndex","pairs","pair","decodeURIComponent","startTime","mode","credentials","redirect","referrerPolicy","responseTime","config","URLSearchParams","JSON","stringify","queryParams","contentType","isEven","isPrime","sqrt","gcd","abs","temp","factorial","Number","isInteger","randomInt","inclusive","NaN","mean","numbers","num","variance","standardDeviation","percentile","sorted","lower","upper","compound","principal","rate","frequency","loan","annualRate","monthlyRate","constants","PI","E","PHI","GAMMA","CATALAN","APERY","TWIN_PRIME","RAMANUJAN_SOLDNER","GROSCHMANN","PORTER","LN2","LN10","LOG2E","LOG10E","SQRT1_2","SQRT2","income","taxRate","initialValue","finalValue","p0","p1","p2","p3","oneMinusT","oneMinusTSquared","tSquared","repeat","toFixed","fn","celsius","periods","init","final","x","y","validPairs","xi","n","sumX","sumY","sumXY","sumX2","sumY2","numerator","denominator","degree","cost","salvage","life","period","bookValue","depreciation","originalPrice","discountRate","discountedPrice","values","bins","validValues","v","binSize","binStart","binEnd","em","baseFontSize","ema","fahrenheit","slope","intercept","NumberFormat","presentValue","cashFlows","iteration","npv","flow","derivative","newRate","isFinite","kg","km","stdDev","lb","middle","mile","maxFreq","freq","windowSize","average","targetMin","targetMax","decimals","radix","allowNaN","allowInfinity","trim","withSymbol","base","exponent","futureValue","px","viewportWidth","q1","q2","q3","radian","crypto","randomUUID","rem","initialInvestment","multiplier","fill","counts","totalCount","array","sign","unit","findIndex","u","toUpperCase","tension","friction","damping","exp","cos","amount","lastTime","useTraditional","useCapital","digits","parts","digit","part","unshift","currency","notation","log10","coefficient","engineeringExp","compactExp","compactCoeff","suffix","firstHalf","secondHalf","firstAvg","secondAvg","vw","isObject","deepClone","parse","deepMergeTwo","source","clone","prototype","hasOwnProperty","targetValue","sourceValue","customMerge","customValue","arrayMode","RegExp","flags","copy","weakMap","WeakMap","valueCopy","remainingObjects","path","keys","segments","segment","parsed","parsePath","current","isEqual","other","valueArray","otherArray","valueKeys","otherKeys","lastIndex","isLocalStorageSupported","testKey","localStorage","setItem","getItem","removeItem","isSessionStorageSupported","sessionStorage","setCookie","cookieStr","expires","expiresDate","toUTCString","domain","secure","sameSite","cookie","getCookie","cookies","nameEQ","clear","decodedCookie","separatorIndex","fromEntries","isEmpty","str","capitalize","charAt","isChinese","charCode","byteToHex","letter","delimiter","word","str1","str2","localeCompare","searchStr","escape","unescapeMap","btoa","unescape","escapeMap","template","formatNamed","paramIndex","formatPrintf","idx","formatIndexed","padStr","padEnd","charset","getRandomValue","getRandomValues","buffer","replaceStr","reverse","longer","shorter","costs","lastValue","newValue","normalized","trimStart","trimEnd","omission","countingChineseCharsAsTwo","currentLength","charLength","getType","detailedType","Symbol","asyncIterator","iterator","proto","getPrototypeOf","valueType","WeakSet","next","done","promise","isTruthy","wrap","cancellable","reason","tasks","limit","results","completed","run","retries","delay","attempt","timeoutPromise","race","regexp","flag","indices","positions","ranges","patterns","pattern","groupRegex","matchAll","replacement","search","CustomError","code","constructor","super","isCustomError","stack","for","description","descriptions","sym","keyFor","bigIntToString","bigIntAbs","isBigIntEven","bigIntSqrt","bigIntGcd","BigInt","qUtils","browser","dom","network","number","object","storage","string","empty","boolean","symbol","bigint"],"mappings":"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"}